import{r as d,t as y,j as e}from"./react-vendor-DBHNAGPW.js";import{d as se}from"./index-BB04Wo6n.js";import{am as ae,a0 as K,U as le,Q as q,aa as J,a2 as re,F as B,v as Z,A as ee,C as H,z as ne,ab as U,u as te,e as X,o as ie,ac as de,ag as ce,b as xe}from"./ui-vendor-Vc_pfhQB.js";import{R as Q,T as W,C as me}from"./CategoricalChart-CWQd-BIh.js";import{B as oe,C as ue,X as he,Y as pe,a as _}from"./BarChart-C6yCk-EP.js";import{L as je}from"./Legend-BZ-cqQwb.js";import{P as fe,a as Ne}from"./PieChart-BMCiRpQ9.js";import{D as k,c as N,b as O,a as g,s as F,i as Y}from"./index-C5wiI25D.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";function be({customerId:x,onBack:D}){const[i,E]=d.useState(null),[c,C]=d.useState([]),[o,G]=d.useState([]),[p,T]=d.useState(!0),[u,$]=d.useState("overview"),[I,z]=d.useState("all");d.useEffect(()=>{P()},[x]);const P=async()=>{T(!0);try{const t=await fetch(`/api/customers/${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error("Failed to load customer");const a=await t.json();E(a.data);const l=await fetch(`/api/invoices?customerId=${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(l.ok){const m=await l.json();C(m.data||[]),R(m.data||[])}}catch(t){console.error("Failed to load customer details:",t),y.error("Müşteri bilgileri yüklenemedi")}finally{T(!1)}},R=t=>{const a=[];let l=0;[...t].sort((s,r)=>new Date(s.issueDate).getTime()-new Date(r.issueDate).getTime()).forEach(s=>{l+=s.grandTotal,a.push({id:s.id*2,date:s.issueDate,type:"invoice",description:`Fatura #${s.invoiceNumber}`,debit:s.grandTotal,credit:0,balance:l}),s.paidAmount>0&&(l-=s.paidAmount,a.push({id:s.id*2+1,date:s.issueDate,type:"payment",description:`Tahsilat - Fatura #${s.invoiceNumber}`,debit:0,credit:s.paidAmount,balance:l}))}),G(a)},n=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),v=t=>new Date(t).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}),L=()=>c.reduce((t,a)=>t+(a.grandTotal-a.paidAmount),0),M=()=>c.filter(t=>new Date(t.dueDate)<new Date&&t.status!=="paid").reduce((t,a)=>t+(a.grandTotal-a.paidAmount),0),V=()=>c.reduce((t,a)=>t+a.paidAmount,0),j=()=>{const t=new Date,a={current:0,days30:0,days60:0,days90Plus:0};return c.forEach(l=>{if(l.status==="paid")return;const m=new Date(l.dueDate),s=Math.floor((t.getTime()-m.getTime())/(1e3*60*60*24)),r=l.grandTotal-l.paidAmount;s<=0?a.current+=r:s<=30?a.days30+=r:s<=60?a.days60+=r:a.days90Plus+=r}),[{name:"Vadesi Gelmemiş",value:a.current,color:"#10b981"},{name:"1-30 Gün",value:a.days30,color:"#f59e0b"},{name:"31-60 Gün",value:a.days60,color:"#ef4444"},{name:"60+ Gün",value:a.days90Plus,color:"#dc2626"}].filter(l=>l.value>0)},w=()=>{const t=new Map;return c.forEach(a=>{const l=new Date(a.issueDate).toLocaleDateString("tr-TR",{year:"2-digit",month:"short"}),m=t.get(l)||{invoiced:0,collected:0};m.invoiced+=a.grandTotal,m.collected+=a.paidAmount,t.set(l,m)}),Array.from(t.entries()).map(([a,l])=>({month:a,faturalanan:l.invoiced,tahsil:l.collected})).slice(-6)},A=()=>{y.success("Ekstre PDF olarak indirilecek (yakÄ±nda)")};if(p)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-neutral-600",children:"Yükleniyor..."})});if(!i)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-neutral-600",children:"Müşteri bilgisi bulunamadı"}),e.jsx("button",{onClick:D,className:"mt-4 text-neutral-900 hover:underline",children:"Geri Dön"})]});const h=L(),S=M(),f=V();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:D,className:"p-2 hover:bg-neutral-100 rounded-xl transition-colors",children:e.jsx(ae,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:i.fullName}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Cari Hesap Kartı"})]})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors",children:[e.jsx(K,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Ekstre Ä°ndir"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-neutral-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(le,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Müşteri Adı"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:i.fullName})]})]}),i.email&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(q,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"E-posta"}),e.jsx("p",{className:"font-semibold text-neutral-900 text-sm break-all",children:i.email})]})]}),i.phone&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Telefon"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:i.phone})]})]}),i.taxNumber&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(re,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Vergi No"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:i.taxNumber}),i.taxOffice&&e.jsx("p",{className:"text-xs text-neutral-600",children:i.taxOffice})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-5 border border-neutral-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-neutral-900 rounded-xl flex items-center justify-center",children:e.jsx(B,{className:"text-white",size:20})})}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-1",children:c.length}),e.jsx("p",{className:"text-sm text-neutral-700",children:"Toplam Fatura"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-5 border border-neutral-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-neutral-900 rounded-xl flex items-center justify-center",children:e.jsx(Z,{className:"text-white",size:20})})}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-1",children:n(h)}),e.jsx("p",{className:"text-sm text-neutral-700",children:"Toplam Borç§"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-5 border border-neutral-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-neutral-800 rounded-xl flex items-center justify-center",children:e.jsx(ee,{className:"text-white",size:20})})}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-1",children:n(S)}),e.jsx("p",{className:"text-sm text-neutral-700",children:"Vadesi Geçmiş"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-5 border border-neutral-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-neutral-900 rounded-xl flex items-center justify-center",children:e.jsx(H,{className:"text-white",size:20})})}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-1",children:n(f)}),e.jsx("p",{className:"text-sm text-neutral-700",children:"Tahsil Edilen"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-neutral-200 overflow-x-auto",children:[{id:"overview",label:"Genel BakÄ±ÅŸ",icon:e.jsx(ne,{size:16})},{id:"invoices",label:"Faturalar",icon:e.jsx(B,{size:16})},{id:"transactions",label:"Hesap Hareketleri",icon:e.jsx(U,{size:16})},{id:"aging",label:"YaÅŸlandÄ±rma",icon:e.jsx(te,{size:16})}].map(t=>e.jsxs("button",{onClick:()=>$(t.id),className:`flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ${u===t.id?"text-neutral-900 border-b-2 border-neutral-900 bg-neutral-50":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50"}`,children:[t.icon,t.label]},t.id))}),e.jsxs("div",{className:"p-6",children:[u==="overview"&&e.jsxs("div",{className:"space-y-6",children:[w().length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"AylÄ±k Trend"}),e.jsx(Q,{width:"100%",height:300,children:e.jsxs(oe,{data:w(),children:[e.jsx(ue,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(he,{dataKey:"month",tick:{fontSize:12}}),e.jsx(pe,{tick:{fontSize:12}}),e.jsx(W,{formatter:t=>n(t)}),e.jsx(je,{}),e.jsx(_,{dataKey:"faturalanan",fill:"#3b82f6",name:"Faturalanan",radius:[8,8,0,0]}),e.jsx(_,{dataKey:"tahsil",fill:"#10b981",name:"Tahsil Edilen",radius:[8,8,0,0]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Tahsilat OranÄ±"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:c.length>0?`${Math.round(f/(h+f)*100)}%`:"0%"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Ortalama Fatura"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:c.length>0?n((h+f)/c.length):n(0)})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Ödenmemiş Fatura"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:c.filter(t=>t.status!=="paid").length})]})]})]}),u==="invoices"&&e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-700 uppercase",children:"Fatura No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-700 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-700 uppercase",children:"Vade"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Tutar"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Ödenen"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Kalan"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-neutral-700 uppercase",children:"Durum"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200",children:c.map(t=>{const a=t.grandTotal-t.paidAmount,l=new Date(t.dueDate)<new Date&&t.status!=="paid";return e.jsxs("tr",{className:"hover:bg-neutral-50",children:[e.jsxs("td",{className:"px-4 py-3 font-medium text-neutral-900",children:["#",t.invoiceNumber]}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:v(t.issueDate)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:l?"text-neutral-900 font-medium":"text-neutral-600",children:v(t.dueDate)})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:n(t.grandTotal)}),e.jsx("td",{className:"px-4 py-3 text-right text-neutral-900",children:n(t.paidAmount)}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:n(a)}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.status==="paid"?e.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-800 rounded-full text-xs font-medium",children:"Ödendi"}):l?e.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-800 rounded-full text-xs font-medium",children:"Vadesi Geçti"}):e.jsx("span",{className:"px-3 py-1 bg-neutral-100 text-neutral-800 rounded-full text-xs font-medium",children:"Bekliyor"})})]},t.id)})})]})})}),u==="transactions"&&e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-700 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-700 uppercase",children:"Açıklama"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Borç"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Alacak"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-700 uppercase",children:"Bakiye"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:v(t.date)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.type==="invoice"?e.jsx(B,{className:"text-neutral-900",size:16}):t.type==="payment"?e.jsx(H,{className:"text-neutral-900",size:16}):e.jsx(U,{className:"text-neutral-900",size:16}),e.jsx("span",{className:"text-sm text-neutral-900",children:t.description})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-neutral-900",children:t.debit>0?n(t.debit):"â€”"}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-neutral-900",children:t.credit>0?n(t.credit):"â€”"}),e.jsx("td",{className:"px-4 py-3 text-right font-bold text-neutral-900",children:n(t.balance)})]},t.id))})]})})}),u==="aging"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Borç Yaşlandırma Analizi"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Vadesi geçen borçların dağılımı"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[j().length>0&&e.jsx("div",{className:"bg-neutral-50 rounded-xl p-6",children:e.jsx(Q,{width:"100%",height:300,children:e.jsxs(fe,{children:[e.jsx(Ne,{data:j(),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:t=>`${t.name}: ${n(t.value)}`,children:j().map((t,a)=>e.jsx(me,{fill:t.color},`cell-${a}`))}),e.jsx(W,{formatter:t=>n(t)})]})})}),e.jsx("div",{className:"space-y-3",children:j().map((t,a)=>e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:t.name}),e.jsx("span",{className:"text-lg font-bold text-neutral-900",children:n(t.value)})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all",style:{width:`${t.value/h*100}%`,backgroundColor:t.color}})}),e.jsxs("p",{className:"text-xs text-neutral-600 mt-1",children:["Toplam borcun %",Math.round(t.value/h*100),"'si"]})]},a))})]})]})]})]})]})}function Se(){var j,w,A,h,S,f,t,a,l,m;const[x,D]=d.useState([]),[i,E]=d.useState([]),[c,C]=d.useState(!0),[o,G]=d.useState(""),[p,T]=d.useState("all"),[u,$]=d.useState("debt"),[I,z]=d.useState(null);d.useEffect(()=>{P()},[]),d.useEffect(()=>{R()},[x,o,p,u]);const P=async()=>{C(!0);try{const s=await se.getCariSummary(),r=s.data.data||s.data;D(r)}catch(s){console.error("Failed to load accounts:",s),y.error("Cari hesaplar yüklenemedi")}finally{C(!1)}},R=()=>{let s=[...x];o&&(s=s.filter(r=>{var b;return r.customerName.toLowerCase().includes(o.toLowerCase())||r.email.toLowerCase().includes(o.toLowerCase())||((b=r.phone)==null?void 0:b.includes(o))})),p==="overdue"?s=s.filter(r=>r.overdueDebt>0):p==="active"&&(s=s.filter(r=>r.totalDebt>0)),s.sort((r,b)=>{switch(u){case"name":return r.customerName.localeCompare(b.customerName,"tr");case"debt":return b.totalDebt-r.totalDebt;case"overdue":return b.overdueDebt-r.overdueDebt;default:return 0}}),E(s)},n=s=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),v=()=>x.reduce((s,r)=>s+r.totalDebt,0),L=()=>x.reduce((s,r)=>s+r.overdueDebt,0),M=()=>x.filter(s=>s.overdueDebt>0).length,V=()=>{y.success("Excel dışa aktarma özelliği yakında eklenecek")};return I?e.jsx(be,{customerId:I,onBack:()=>z(null)}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`${(w=(j=k)==null?void 0:j.typography)==null?void 0:w.h2} ${(h=(A=k)==null?void 0:A.colors)==null?void 0:h.text.primary}`,children:"Cari Hesap Kartları"}),e.jsx("p",{className:`${(f=(S=k)==null?void 0:S.typography)==null?void 0:f.body.sm} ${(a=(t=k)==null?void 0:t.colors)==null?void 0:a.text.tertiary} mt-1`,children:"Müşteri bazlı alacak-borç takibi"})]}),e.jsxs("button",{onClick:V,className:N(O("md","secondary","md"),"gap-2"),children:[e.jsx(K,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Dışa Aktar"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",style:{boxSizing:"border-box"},children:[e.jsxs("div",{className:g("md","sm","default","xl"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:F("neutral"),children:e.jsx(X,{className:"text-neutral-700",size:20})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Aktif"})]}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-0.5",children:x.length}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Toplam Cari"})]}),e.jsxs("div",{className:g("md","sm","default","xl"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:F("success"),children:e.jsx(Z,{className:"text-green-700",size:20})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Alacak"})]}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-0.5",children:n(v())}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Toplam Alacak"})]}),e.jsxs("div",{className:g("md","sm","default","xl"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:F("error"),children:e.jsx(ee,{className:"text-red-700",size:20})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Gecikmiş"})]}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-0.5",children:n(L())}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Vadesi Geçmiş"})]}),e.jsxs("div",{className:g("md","sm","default","xl"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:F("warning"),children:e.jsx(te,{className:"text-orange-700",size:20})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Risk"})]}),e.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-0.5",children:M()}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Gecikmiş Hesap"})]})]}),e.jsx("div",{className:g("sm","sm","default","lg"),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${(m=(l=k)==null?void 0:l.colors)==null?void 0:m.text.muted}`,size:18}),e.jsx("input",{type:"text",placeholder:"Müşteri adı, email veya telefon ara...",value:o,onChange:s=>G(s.target.value),className:N(Y("md","default",void 0,"md"),"pl-10")})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs("select",{value:p,onChange:s=>T(s.target.value),className:N(Y("md","default",void 0,"md"),"flex-1 min-w-[150px] max-w-[200px]"),style:{boxSizing:"border-box"},children:[e.jsx("option",{value:"all",children:"Tüm Hesaplar"}),e.jsx("option",{value:"active",children:"Aktif Borçlar"}),e.jsx("option",{value:"overdue",children:"Vadesi Geçmiş"})]}),e.jsxs("select",{value:u,onChange:s=>$(s.target.value),className:N(Y("md","default",void 0,"md"),"flex-1 min-w-[130px]"),children:[e.jsx("option",{value:"debt",children:"Borca Göre"}),e.jsx("option",{value:"overdue",children:"Vadeye Göre"}),e.jsx("option",{value:"name",children:"İsme Göre"})]}),e.jsxs("button",{onClick:()=>y.success("Dışa aktarma özelliği yakında eklenecek"),className:N(O("md","outline","md"),"gap-2 whitespace-nowrap"),children:[e.jsx(K,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Dışa Aktar"})]}),e.jsxs("button",{onClick:()=>y.success("Yeni cari hesap ekleme özelliği yakında eklenecek"),className:N(O("md","primary","md"),"gap-2 whitespace-nowrap"),children:[e.jsx(de,{size:18}),e.jsx("span",{children:"Yeni Cari Hesap"})]})]})]})}),e.jsx("div",{className:N(g("md","sm","default","xl"),"overflow-hidden"),children:c?e.jsx("div",{className:"p-12 text-center text-neutral-600",children:"Yükleniyor..."}):i.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(X,{className:"mx-auto text-neutral-400 mb-3",size:48}),e.jsx("p",{className:"text-neutral-600",children:o||p!=="all"?"Arama kriterlerine uygun cari hesap bulunamadı":"Henüz cari hesap bulunmuyor"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[900px]",children:[e.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-700 uppercase tracking-wider",children:"Müşteri Bilgileri"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-neutral-700 uppercase tracking-wider",children:"Toplam Borç"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-neutral-700 uppercase tracking-wider",children:"Vadesi Geçmiş"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-neutral-700 uppercase tracking-wider",children:"Fatura Sayısı"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-neutral-700 uppercase tracking-wider",children:"İşlemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:i.map(s=>e.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors cursor-pointer",onClick:()=>z(s.customerId),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-neutral-900",children:s.customerName}),e.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-neutral-600",children:[e.jsx(q,{size:14}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-neutral-600",children:[e.jsx(J,{size:14}),e.jsx("span",{children:s.phone})]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"text-lg font-bold text-neutral-900",children:n(s.totalDebt)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.overdueDebt>0?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-lg font-bold text-neutral-900",children:n(s.overdueDebt)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-neutral-100 text-neutral-800 rounded-full font-medium",children:"Gecikmiş"})]}):e.jsx("span",{className:"text-neutral-400",children:"—"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-neutral-100 text-neutral-800 rounded-full text-sm font-medium",children:[e.jsx(B,{size:14}),s.invoiceCount]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("button",{onClick:r=>{r.stopPropagation(),z(s.customerId)},className:"inline-flex items-center gap-1 px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-xl transition-colors text-sm font-medium",children:[e.jsx(ce,{size:16}),e.jsx("span",{children:"Detay"}),e.jsx(xe,{size:16})]})})]},s.customerId))})]})})}),!c&&i.length>0&&e.jsxs("div",{className:"text-sm text-neutral-600 text-center",children:[i.length," cari hesap gösteriliyor",x.length!==i.length&&` (toplam ${x.length} hesap)`]})]})}export{Se as default};
