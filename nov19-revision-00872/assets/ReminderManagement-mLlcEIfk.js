import{r as o,j as e,t as x}from"./react-vendor-DBHNAGPW.js";import{f as c}from"./index-BB04Wo6n.js";import{X as V,ac as _,u as N,B as $,f as S,A as H,C as F,aJ as q,Q as K,M as X,Y as J,a as Q,a5 as W,ap as Z}from"./ui-vendor-Vc_pfhQB.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";const d="http://localhost:4000",u=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),h={getAll:async s=>{const n=new URLSearchParams;return s!=null&&s.status&&n.append("status",s.status),s!=null&&s.type&&n.append("type",s.type),s!=null&&s.priority&&n.append("priority",s.priority),(await c.get(`${d}/api/reminders?${n.toString()}`,u())).data},getUpcoming:async()=>(await c.get(`${d}/api/reminders/upcoming`,u())).data,getOverdue:async()=>(await c.get(`${d}/api/reminders/overdue`,u())).data,getById:async s=>(await c.get(`${d}/api/reminders/${s}`,u())).data,create:async s=>(await c.post(`${d}/api/reminders`,s,u())).data,update:async(s,n)=>(await c.put(`${d}/api/reminders/${s}`,n,u())).data,markAsSent:async s=>(await c.post(`${d}/api/reminders/${s}/sent`,{},u())).data,markAsCompleted:async s=>(await c.post(`${d}/api/reminders/${s}/complete`,{},u())).data,cancel:async s=>(await c.post(`${d}/api/reminders/${s}/cancel`,{},u())).data,delete:async s=>{await c.delete(`${d}/api/reminders/${s}`,u())},getStats:async()=>(await c.get(`${d}/api/reminders/stats/summary`,u())).data},ee=({open:s,onClose:n,onSuccess:m,reminder:l})=>{const[a,i]=o.useState({title:"",description:"",type:"payment",priority:"medium",reminderDate:"",dueDate:"",sendEmail:!0,sendSms:!1,sendPush:!0,isRecurring:!1,recurrence:"",recurrenceEnd:""}),[p,g]=o.useState(!1);o.useEffect(()=>{l&&i({title:l.title,description:l.description||"",type:l.type,priority:l.priority,reminderDate:l.reminderDate.split("T")[0]+"T"+l.reminderDate.split("T")[1].substring(0,5),dueDate:l.dueDate?l.dueDate.split("T")[0]:"",sendEmail:l.sendEmail,sendSms:l.sendSms,sendPush:l.sendPush,isRecurring:l.isRecurring,recurrence:l.recurrence||"",recurrenceEnd:l.recurrenceEnd?l.recurrenceEnd.split("T")[0]:"",invoiceId:l.invoiceId,customerId:l.customerId})},[l]);const b=async r=>{if(r.preventDefault(),!a.title||!a.reminderDate){x.error("Lütfen gerekli alanları doldurun");return}try{g(!0),l?(await h.update(l.id,a),x.success("Hatırlatma güncellendi")):(await h.create(a),x.success("Hatırlatma oluşturuldu")),m()}catch(j){console.error("Error saving reminder:",j),x.error("Hatırlatma kaydedilemedi")}finally{g(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:l?"Hatırlatmayı Düzenle":"Yeni Hatırlatma"}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(V,{size:20})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Başlık ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title,onChange:r=>i({...a,title:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",placeholder:"Ödeme hatırlatması",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Açıklama"}),e.jsx("textarea",{value:a.description,onChange:r=>i({...a,description:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",placeholder:"Detaylı açıklama...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tür"}),e.jsxs("select",{value:a.type,onChange:r=>i({...a,type:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[e.jsx("option",{value:"payment",children:"Ödeme"}),e.jsx("option",{value:"invoice",children:"Fatura"}),e.jsx("option",{value:"due_date",children:"Vade Tarihi"}),e.jsx("option",{value:"custom",children:"Özel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Öncelik"}),e.jsxs("select",{value:a.priority,onChange:r=>i({...a,priority:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[e.jsx("option",{value:"low",children:"Düşük"}),e.jsx("option",{value:"medium",children:"Orta"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"urgent",children:"Acil"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Hatırlatma Tarihi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:a.reminderDate,onChange:r=>i({...a,reminderDate:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Vade Tarihi"}),e.jsx("input",{type:"date",value:a.dueDate,onChange:r=>i({...a,dueDate:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Bildirim Kanalları"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.sendEmail,onChange:r=>i({...a,sendEmail:r.target.checked}),className:"w-5 h-5 text-neutral-900 rounded focus:ring-2 focus:ring-neutral-900"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Email Gönder"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.sendSms,onChange:r=>i({...a,sendSms:r.target.checked}),className:"w-5 h-5 text-neutral-900 rounded focus:ring-2 focus:ring-neutral-900"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"SMS Gönder"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.sendPush,onChange:r=>i({...a,sendPush:r.target.checked}),className:"w-5 h-5 text-neutral-900 rounded focus:ring-2 focus:ring-neutral-900"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Push Bildirimi"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:a.isRecurring,onChange:r=>i({...a,isRecurring:r.target.checked}),className:"w-5 h-5 text-neutral-900 rounded focus:ring-2 focus:ring-neutral-900"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Tekrarlayan Hatırlatma"})]}),a.isRecurring&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tekrar Sıklığı"}),e.jsxs("select",{value:a.recurrence,onChange:r=>i({...a,recurrence:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"daily",children:"Günlük"}),e.jsx("option",{value:"weekly",children:"Haftalık"}),e.jsx("option",{value:"monthly",children:"Aylık"}),e.jsx("option",{value:"yearly",children:"Yıllık"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Bitiş Tarihi"}),e.jsx("input",{type:"date",value:a.recurrenceEnd,onChange:r=>i({...a,recurrenceEnd:r.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-neutral-200",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 border border-neutral-200 text-neutral-700 rounded-xl hover:bg-neutral-50 transition-colors",disabled:p,children:"İptal"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors disabled:opacity-50",disabled:p,children:p?"Kaydediliyor...":l?"Güncelle":"Oluştur"})]})]})]})}):null},ne=()=>{const[s,n]=o.useState([]),[m,l]=o.useState(null),[a,i]=o.useState(!0),[p,g]=o.useState("all"),[b,r]=o.useState(""),[j,R]=o.useState(""),[k,A]=o.useState(""),[C,w]=o.useState(!1),[P,D]=o.useState(null);o.useEffect(()=>{f(),v()},[p,b,j,k]);const f=async()=>{try{i(!0);let t;p==="upcoming"?t=await h.getUpcoming():p==="overdue"?t=await h.getOverdue():t=await h.getAll({status:b||void 0,type:j||void 0,priority:k||void 0}),n(t)}catch(t){console.error("Error loading reminders:",t),x.error("Hatırlatmalar yüklenemedi")}finally{i(!1)}},v=async()=>{try{const t=await h.getStats();l(t)}catch(t){console.error("Error loading stats:",t)}},B=async t=>{try{await h.markAsCompleted(t),x.success("Hatırlatma tamamlandı"),f(),v()}catch{x.error("Hatırlatma tamamlanamadı")}},Y=async t=>{try{await h.cancel(t),x.success("Hatırlatma iptal edildi"),f(),v()}catch{x.error("Hatırlatma iptal edilemedi")}},I=async t=>{if(confirm("Bu hatırlatmayı silmek istediğinize emin misiniz?"))try{await h.delete(t),x.success("Hatırlatma silindi"),f(),v()}catch{x.error("Hatırlatma silinemedi")}},G=t=>{D(t),w(!0)},z=()=>{w(!1),D(null)},O=()=>{f(),v(),z()},M=t=>{switch(t){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-neutral-200";default:return"text-neutral-600 bg-neutral-50 border-neutral-200"}},L=t=>{switch(t){case"completed":return"text-green-600 bg-green-50 border-green-200";case"sent":return"text-blue-600 bg-blue-50 border-neutral-200";case"cancelled":return"text-neutral-600 bg-neutral-50 border-neutral-200";case"pending":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-neutral-600 bg-neutral-50 border-neutral-200"}},U=t=>{switch(t){case"payment":return e.jsx($,{size:16});case"invoice":return e.jsx(S,{size:16});case"due_date":return e.jsx(H,{size:16});default:return e.jsx(N,{size:16})}},T=t=>new Date(t).toLocaleDateString("tr-TR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=(t,y)=>y==="pending"&&new Date(t)<new Date;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Hatırlatmalar"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Ödeme ve vade tarih hatırlatmaları"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-neutral-900 text-white px-4 py-2 rounded-xl hover:bg-neutral-800 transition-colors",children:[e.jsx(_,{size:20}),"Yeni Hatırlatma"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-neutral-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Toplam"}),e.jsx(N,{className:"text-blue-600",size:20})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:m.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-900",children:"Bekleyen"}),e.jsx($,{className:"text-orange-600",size:20})]}),e.jsx("p",{className:"text-3xl font-bold text-orange-900",children:m.pending})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-900",children:"Yaklaşan"}),e.jsx(S,{className:"text-purple-600",size:20})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:m.upcoming})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-red-900",children:"Gecikmiş"}),e.jsx(H,{className:"text-red-600",size:20})]}),e.jsx("p",{className:"text-3xl font-bold text-red-900",children:m.overdue})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Tamamlanan"}),e.jsx(F,{className:"text-green-600",size:20})]}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:m.completed})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-4 border border-neutral-200",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(q,{size:20,className:"text-neutral-600"}),e.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-xl transition-colors ${p==="all"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Tümü"}),e.jsx("button",{onClick:()=>g("upcoming"),className:`px-4 py-2 rounded-xl transition-colors ${p==="upcoming"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Yaklaşan"}),e.jsx("button",{onClick:()=>g("overdue"),className:`px-4 py-2 rounded-xl transition-colors ${p==="overdue"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Gecikmiş"}),e.jsxs("select",{value:b,onChange:t=>r(t.target.value),className:"px-4 py-2 rounded-xl border border-neutral-200 bg-white text-neutral-700",children:[e.jsx("option",{value:"",children:"Durum (Tümü)"}),e.jsx("option",{value:"pending",children:"Bekleyen"}),e.jsx("option",{value:"sent",children:"Gönderildi"}),e.jsx("option",{value:"completed",children:"Tamamlandı"}),e.jsx("option",{value:"cancelled",children:"İptal"})]}),e.jsxs("select",{value:j,onChange:t=>R(t.target.value),className:"px-4 py-2 rounded-xl border border-neutral-200 bg-white text-neutral-700",children:[e.jsx("option",{value:"",children:"Tür (Tümü)"}),e.jsx("option",{value:"payment",children:"Ödeme"}),e.jsx("option",{value:"invoice",children:"Fatura"}),e.jsx("option",{value:"due_date",children:"Vade Tarihi"}),e.jsx("option",{value:"custom",children:"Özel"})]}),e.jsxs("select",{value:k,onChange:t=>A(t.target.value),className:"px-4 py-2 rounded-xl border border-neutral-200 bg-white text-neutral-700",children:[e.jsx("option",{value:"",children:"Öncelik (Tümü)"}),e.jsx("option",{value:"urgent",children:"Acil"}),e.jsx("option",{value:"high",children:"Yüksek"}),e.jsx("option",{value:"medium",children:"Orta"}),e.jsx("option",{value:"low",children:"Düşük"})]})]})}),e.jsx("div",{className:"space-y-3",children:a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-900 mx-auto"}),e.jsx("p",{className:"text-neutral-600 mt-4",children:"Yükleniyor..."})]}):s.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-neutral-200",children:[e.jsx(N,{className:"mx-auto text-neutral-400 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Hatırlatma Bulunamadı"}),e.jsx("p",{className:"text-neutral-600",children:"Yeni bir hatırlatma oluşturarak başlayın"})]}):s.map(t=>e.jsx("div",{className:`bg-white rounded-2xl p-6 border-2 transition-all hover:shadow-lg ${E(t.reminderDate,t.status)?"border-red-300 bg-red-50":"border-neutral-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[U(t.type),e.jsx("h3",{className:"font-semibold text-neutral-900",children:t.title})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${M(t.priority)}`,children:[t.priority==="urgent"&&"Acil",t.priority==="high"&&"Yüksek",t.priority==="medium"&&"Orta",t.priority==="low"&&"Düşük"]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(t.status)}`,children:[t.status==="pending"&&"Bekleyen",t.status==="sent"&&"Gönderildi",t.status==="completed"&&"Tamamlandı",t.status==="cancelled"&&"İptal"]}),E(t.reminderDate,t.status)&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 border border-red-200",children:"GECİKMİŞ"})]}),t.description&&e.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-neutral-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{size:16}),e.jsx("span",{children:T(t.reminderDate)})]}),t.dueDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16}),e.jsxs("span",{children:["Vade: ",T(t.dueDate)]})]}),t.customer&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium",children:t.customer.name})}),t.invoice&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["Fatura: ",t.invoice.invoiceNumber]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[t.sendEmail&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-600",children:[e.jsx(K,{size:14}),"Email"]}),t.sendSms&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-600",children:[e.jsx(X,{size:14}),"SMS"]}),t.sendPush&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-600",children:[e.jsx(J,{size:14}),"Push"]}),t.isRecurring&&e.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-lg border border-purple-200",children:"Tekrarlı"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="pending"&&e.jsx("button",{onClick:()=>B(t.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Tamamla",children:e.jsx(F,{size:20})}),t.status==="pending"&&e.jsx("button",{onClick:()=>Y(t.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"İptal Et",children:e.jsx(Q,{size:20})}),e.jsx("button",{onClick:()=>G(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Düzenle",children:e.jsx(W,{size:20})}),e.jsx("button",{onClick:()=>I(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",children:e.jsx(Z,{size:20})})]})]})},t.id))}),C&&e.jsx(ee,{open:C,onClose:z,onSuccess:O,reminder:P||void 0})]})};export{ne as default};
