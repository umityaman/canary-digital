import{a as ys,r as h,j as e}from"./react-vendor-DBHNAGPW.js";import{c as l,D as t,s as f,a as u,i as rs,b as is,d as Ns}from"./index-C5wiI25D.js";import{o as fs}from"./index-BB04Wo6n.js";import{v as gs,C as bs,u as cs,o as vs,ac as ws,f as ns,ag as Ts,ao as $s,a0 as Es,Q as ks}from"./ui-vendor-Vc_pfhQB.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";const r="px-6 py-3 text-left text-xs font-medium text-neutral-600 uppercase tracking-wider bg-neutral-50",i="px-6 py-4 text-sm text-neutral-900",As=()=>{var $,E,k,C,D,S,z,L,R,A,O,F,P,q,B,G,I,W,_,V,K,Y,H,M,U,J,Q,X,Z,ee,se,te,ae,le,re,ie,ce,ne,de,oe,me,xe,he,ue,pe,je,ye,Ne,fe,ge,be,ve,we,Te,$e,Ee,ke,Ce,De,Se,ze,Le;const p=ys(),[n,N]=h.useState([]),[ds,g]=h.useState(!0),[c,os]=h.useState(""),[d,ms]=h.useState("");h.useEffect(()=>{xs()},[]);const xs=async()=>{try{g(!0);const s=await fs.getAll();s.data.success?N(s.data.data||[]):N([])}catch(s){console.error("Teklifler yüklenirken hata:",s),N([])}finally{g(!1)}},hs=n.reduce((s,a)=>s+(a.grandTotal||0),0),b=n.filter(s=>s.status==="ACCEPTED"),us=b.reduce((s,a)=>s+(a.grandTotal||0),0),v=n.filter(s=>s.status==="SENT"||s.status==="DRAFT"),ps=v.reduce((s,a)=>s+(a.grandTotal||0),0),w=n.filter(s=>{var o,m,x;const a=c===""||((o=s.offerNumber)==null?void 0:o.toLowerCase().includes(c.toLowerCase()))||((x=(m=s.customer)==null?void 0:m.name)==null?void 0:x.toLowerCase().includes(c.toLowerCase())),y=d===""||s.status===d;return a&&y}),j=s=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2}).format(s),T=s=>s?new Date(s).toLocaleDateString("tr-TR"):"-",js=s=>{const a=Ns(s,"offer","sm","solid");return e.jsx("span",{className:a.className,children:a.label})};return ds?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-900"})}):e.jsxs("div",{className:"space-y-6",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",style:{boxSizing:"border-box"},children:[e.jsx("div",{className:l(u("md","sm","default","lg"),"p-6"),style:{boxSizing:"border-box"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`${(k=(E=($=t)==null?void 0:$.typography)==null?void 0:E.label)==null?void 0:k.lg} ${(S=(D=(C=t)==null?void 0:C.colors)==null?void 0:D.text)==null?void 0:S.tertiary} mb-1`,children:"Toplam Teklif DeÄŸeri"}),e.jsx("p",{className:`${(L=(z=t)==null?void 0:z.typography)==null?void 0:L.h2} ${(O=(A=(R=t)==null?void 0:R.colors)==null?void 0:A.text)==null?void 0:O.primary} mb-2`,children:j(hs)}),e.jsxs("p",{className:`${(q=(P=(F=t)==null?void 0:F.typography)==null?void 0:P.body)==null?void 0:q.sm} ${(I=(G=(B=t)==null?void 0:B.colors)==null?void 0:G.text)==null?void 0:I.tertiary}`,children:[n.length," teklif"]})]}),e.jsx("div",{className:f("primary"),children:e.jsx(gs,{size:16})})]})}),e.jsx("div",{className:l(u("md","sm","default","lg"),"p-6"),style:{boxSizing:"border-box"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`${(V=(_=(W=t)==null?void 0:W.typography)==null?void 0:_.label)==null?void 0:V.lg} ${(H=(Y=(K=t)==null?void 0:K.colors)==null?void 0:Y.text)==null?void 0:H.tertiary} mb-1`,children:"Kabul Edilen"}),e.jsx("p",{className:`${(U=(M=t)==null?void 0:M.typography)==null?void 0:U.h2} ${(X=(Q=(J=t)==null?void 0:J.colors)==null?void 0:Q.text)==null?void 0:X.primary} mb-2`,children:j(us)}),e.jsxs("p",{className:`${(se=(ee=(Z=t)==null?void 0:Z.typography)==null?void 0:ee.body)==null?void 0:se.sm} ${(le=(ae=(te=t)==null?void 0:te.colors)==null?void 0:ae.text)==null?void 0:le.tertiary}`,children:[b.length," teklif"]})]}),e.jsx("div",{className:f("success"),children:e.jsx(bs,{size:16})})]})}),e.jsx("div",{className:l(u("md","sm","default","lg"),"p-6"),style:{boxSizing:"border-box"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`${(ce=(ie=(re=t)==null?void 0:re.typography)==null?void 0:ie.label)==null?void 0:ce.lg} ${(oe=(de=(ne=t)==null?void 0:ne.colors)==null?void 0:de.text)==null?void 0:oe.tertiary} mb-1`,children:"Bekleyen"}),e.jsx("p",{className:`${(xe=(me=t)==null?void 0:me.typography)==null?void 0:xe.h2} ${(pe=(ue=(he=t)==null?void 0:he.colors)==null?void 0:ue.text)==null?void 0:pe.primary} mb-2`,children:j(ps)}),e.jsxs("p",{className:`${(Ne=(ye=(je=t)==null?void 0:je.typography)==null?void 0:ye.body)==null?void 0:Ne.sm} ${(be=(ge=(fe=t)==null?void 0:fe.colors)==null?void 0:ge.text)==null?void 0:be.tertiary}`,children:[v.length," teklif"]})]}),e.jsx("div",{className:f("warning"),children:e.jsx(cs,{size:16})})]})})]}),e.jsx("div",{className:u("sm","none","default","lg"),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(vs,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${(we=(ve=t)==null?void 0:ve.colors)==null?void 0:we.text.muted}`,size:18}),e.jsx("input",{type:"text",placeholder:"Teklif ara...",value:c,onChange:s=>os(s.target.value),className:l(rs("md","default",void 0,"md"),"pl-10")})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs("select",{value:d,onChange:s=>ms(s.target.value),className:l(rs("md","default",void 0,"md"),"flex-1 min-w-[150px] max-w-[200px]"),style:{boxSizing:"border-box"},children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"DRAFT",children:"Taslak"}),e.jsx("option",{value:"SENT",children:"Gönderildi"}),e.jsx("option",{value:"ACCEPTED",children:"Kabul Edildi"}),e.jsx("option",{value:"REJECTED",children:"Reddedildi"}),e.jsx("option",{value:"CONVERTED",children:"Faturaya Dönüştü"}),e.jsx("option",{value:"EXPIRED",children:"Süresi Doldu"})]}),e.jsxs("button",{onClick:()=>p("/accounting/quote/new"),className:l(is("md","primary","md"),"gap-2 whitespace-nowrap"),children:[e.jsx(ws,{size:18}),e.jsx("span",{children:"Yeni Teklif"})]})]})]})}),e.jsx("div",{className:l(u("md","sm","default","lg"),"overflow-hidden"),style:{width:"100%",maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"},children:e.jsx("div",{className:"overflow-x-auto",style:{width:"100%",maxWidth:"100%"},children:e.jsxs("table",{className:"w-full",style:{tableLayout:"fixed",width:"100%",maxWidth:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:r,style:{width:"12%"},children:"Teklif No"}),e.jsx("th",{className:r,style:{width:"18%"},children:"Müşteri"}),e.jsx("th",{className:r,style:{width:"12%"},children:"Tarih"}),e.jsx("th",{className:r,style:{width:"12%"},children:"Geçerlilik"}),e.jsx("th",{className:r,style:{width:"15%"},children:"Tutar"}),e.jsx("th",{className:r,style:{width:"13%"},children:"Durum"}),e.jsx("th",{className:r,style:{width:"18%"},children:"İşlemler"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200",children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ns,{className:(Ee=($e=(Te=t)==null?void 0:Te.colors)==null?void 0:$e.text)==null?void 0:Ee.muted,size:48}),e.jsx("p",{className:`${(De=(Ce=(ke=t)==null?void 0:ke.typography)==null?void 0:Ce.body)==null?void 0:De.lg} ${(Le=(ze=(Se=t)==null?void 0:Se.colors)==null?void 0:ze.text)==null?void 0:Le.secondary}`,children:c||d?"Arama kriterlerine uygun teklif bulunamadı":"Henüz teklif bulunmuyor"}),!c&&!d&&e.jsx("button",{onClick:()=>p("/accounting/quote/new"),className:l(is("md","primary","md"),"mt-2"),children:"İlk Teklifi Oluştur"})]})})}):w.map(s=>{var a,y,o,m,x,Re,Ae,Oe,Fe,Pe,qe,Be,Ge,Ie,We,_e,Ve,Ke,Ye,He,Me,Ue,Je,Qe,Xe,Ze,es,ss,ts,as,ls;return e.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors",children:[e.jsx("td",{className:i,children:e.jsx("div",{className:"font-medium",children:s.offerNumber||`#${s.id}`})}),e.jsx("td",{className:i,children:e.jsx("div",{className:"font-medium",children:((a=s.customer)==null?void 0:a.name)||"-"})}),e.jsx("td",{className:i,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{size:14,className:(m=(o=(y=t)==null?void 0:y.colors)==null?void 0:o.text)==null?void 0:m.muted}),T(s.offerDate)]})}),e.jsx("td",{className:i,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{size:14,className:(Ae=(Re=(x=t)==null?void 0:x.colors)==null?void 0:Re.text)==null?void 0:Ae.muted}),T(s.validUntil)]})}),e.jsx("td",{className:i,children:e.jsx("div",{className:"font-semibold",children:j(s.grandTotal)})}),e.jsx("td",{className:i,children:js(s.status)}),e.jsx("td",{className:i,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(`/accounting/quote/${s.id}`),className:`${(Pe=(Fe=(Oe=t)==null?void 0:Oe.colors)==null?void 0:Fe.text)==null?void 0:Pe.secondary} hover:${(Ge=(Be=(qe=t)==null?void 0:qe.colors)==null?void 0:Be.text)==null?void 0:Ge.primary} transition-colors`,title:"Görüntüle",children:e.jsx(Ts,{size:18})}),e.jsx("button",{onClick:()=>p(`/accounting/quote/${s.id}/edit`),className:`${(_e=(We=(Ie=t)==null?void 0:Ie.colors)==null?void 0:We.text)==null?void 0:_e.secondary} hover:${(Ye=(Ke=(Ve=t)==null?void 0:Ve.colors)==null?void 0:Ke.text)==null?void 0:Ye.primary} transition-colors`,title:"Düzenle",children:e.jsx($s,{size:18})}),e.jsx("button",{onClick:()=>{},className:`${(Ue=(Me=(He=t)==null?void 0:He.colors)==null?void 0:Me.text)==null?void 0:Ue.secondary} hover:${(Xe=(Qe=(Je=t)==null?void 0:Je.colors)==null?void 0:Qe.text)==null?void 0:Xe.primary} transition-colors`,title:"PDF İndir",children:e.jsx(Es,{size:18})}),e.jsx("button",{onClick:()=>{},className:`${(ss=(es=(Ze=t)==null?void 0:Ze.colors)==null?void 0:es.text)==null?void 0:ss.secondary} hover:${(ls=(as=(ts=t)==null?void 0:ts.colors)==null?void 0:as.text)==null?void 0:ls.primary} transition-colors`,title:"Email Gönder",children:e.jsx(ks,{size:18})})]})})]},s.id)})})]})})})]})};export{As as default};
