import{a as I,r,z as h,j as e}from"./react-vendor-DBHNAGPW.js";import{a as c,s as j,D as R,c as o,i as N,b as P}from"./index-C5wiI25D.js";import{i as B}from"./index-BB04Wo6n.js";import{v as G,D as $,u as W,o as Y,ac as _,F as M,f as K,ag as O,a0 as H,Q}from"./ui-vendor-Vc_pfhQB.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";const a="px-6 py-3 text-left text-xs font-medium text-neutral-600 uppercase tracking-wider bg-neutral-50",l="px-6 py-4 text-sm text-neutral-900";function ee(){var v,y;const p=I(),[w,D]=r.useState([]),[f,g]=r.useState(!0),[n,T]=r.useState(""),[d,E]=r.useState(""),[m,C]=r.useState("");r.useEffect(()=>{S()},[]);const S=async()=>{try{g(!0);const s=await B.getAll();s.data.success&&D(s.data.data||[])}catch(s){console.error("Faturalar yüklenirken hata:",s),h.error("Faturalar yüklenemedi")}finally{g(!1)}},x=s=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(s),b=s=>new Date(s).toLocaleDateString("tr-TR"),L=s=>{const t={PAID:"bg-green-100 text-green-800",PENDING:"bg-orange-100 text-orange-800",CANCELLED:"bg-red-100 text-red-800",DRAFT:"bg-neutral-100 text-neutral-800"},u={PAID:"Ödendi",PENDING:"Beklemede",CANCELLED:"İptal",DRAFT:"Taslak"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t[s]||"bg-neutral-100 text-neutral-800"}`,children:u[s]||s})},i=w.filter(s=>{const t=n===""||s.invoiceNumber.toLowerCase().includes(n.toLowerCase())||s.customer.name.toLowerCase().includes(n.toLowerCase()),u=d===""||s.status===d,z=m===""||s.type===m;return t&&u&&z}),k=i.reduce((s,t)=>s+t.grandTotal,0),A=i.reduce((s,t)=>s+t.paidAmount,0),F=i.filter(s=>s.status==="PENDING").reduce((s,t)=>s+(t.grandTotal-t.paidAmount),0);return f?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-600"})}):e.jsxs("div",{className:"space-y-6",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",style:{boxSizing:"border-box"},children:[e.jsxs("div",{className:c("sm","sm","default","lg"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:j("primary"),children:e.jsx(G,{className:"text-white",size:16})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Toplam"})]}),e.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-0.5",children:x(k)}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Ciro"})]}),e.jsxs("div",{className:c("sm","sm","default","lg"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:j("success"),children:e.jsx($,{className:"text-white",size:16})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Ödenen"})]}),e.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-0.5",children:x(A)}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Tahsilat"})]}),e.jsxs("div",{className:c("sm","sm","default","lg"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:j("warning"),children:e.jsx(W,{className:"text-white",size:16})}),e.jsx("span",{className:"text-xs font-medium text-neutral-600",children:"Bekleyen"})]}),e.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-0.5",children:x(F)}),e.jsx("p",{className:"text-xs font-medium text-neutral-600",children:"Alacak"})]})]}),e.jsx("div",{className:c("sm","sm","default","lg"),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${(y=(v=R)==null?void 0:v.colors)==null?void 0:y.text.muted}`,size:18}),e.jsx("input",{type:"text",placeholder:"Fatura ara...",value:n,onChange:s=>T(s.target.value),className:o(N("md","default",void 0,"md"),"pl-10")})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs("select",{value:m,onChange:s=>C(s.target.value),className:o(N("md","default",void 0,"md"),"flex-1 min-w-[150px] max-w-[200px]"),style:{boxSizing:"border-box"},children:[e.jsx("option",{value:"",children:"Tüm Tipler"}),e.jsx("option",{value:"SALES",children:"Satış Faturası"}),e.jsx("option",{value:"RENTAL",children:"Kiralama Faturası"})]}),e.jsxs("select",{value:d,onChange:s=>E(s.target.value),className:o(N("md","default",void 0,"md"),"flex-1 min-w-[130px]"),children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"PAID",children:"Ödendi"}),e.jsx("option",{value:"PENDING",children:"Beklemede"}),e.jsx("option",{value:"CANCELLED",children:"İptal"}),e.jsx("option",{value:"DRAFT",children:"Taslak"})]}),e.jsxs("button",{onClick:()=>p("/accounting/invoice/new"),className:o(P("md","primary","md"),"gap-2 whitespace-nowrap"),children:[e.jsx(_,{size:18}),e.jsx("span",{children:"Yeni Fatura"})]})]})]})}),e.jsx("div",{className:c("sm","sm","default","lg"),style:{overflow:"hidden",width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:f?e.jsx("div",{className:"p-12 text-center text-neutral-600",children:"Yükleniyor..."}):i.length===0?e.jsxs("div",{className:"p-12 text-center text-neutral-600",children:[e.jsx(M,{className:"mx-auto mb-4 text-neutral-400",size:48}),e.jsx("p",{className:"text-lg font-medium",children:"Fatura bulunamadı"}),e.jsx("p",{className:"text-sm mt-2",children:n||d||m?"Arama kriterlerinize uygun fatura bulunamAdı±":"Yeni fatura ekleyerek baÅŸlayÄ±n"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto",style:{maxWidth:"100%",width:"100%"},children:e.jsxs("table",{className:"w-full",style:{tableLayout:"fixed",width:"100%",maxWidth:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:a,children:"Fatura No"}),e.jsx("th",{className:`${a} hidden lg:table-cell`,children:"Tarih"}),e.jsx("th",{className:a,children:"Müşteri"}),e.jsx("th",{className:`${a} hidden md:table-cell`,children:"Vade"}),e.jsx("th",{className:a,children:"Tutar"}),e.jsx("th",{className:a,children:"Durum"}),e.jsx("th",{className:a,children:"İşlemler"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors",children:[e.jsx("td",{className:l,children:e.jsx("div",{className:"font-medium text-neutral-900",children:s.invoiceNumber})}),e.jsx("td",{className:`${l} hidden lg:table-cell`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{size:14,className:"text-neutral-400"}),e.jsx("span",{className:"text-sm text-neutral-900",children:b(s.invoiceDate)})]})}),e.jsx("td",{className:l,children:e.jsx("div",{className:"font-medium text-neutral-900",children:s.customer.name})}),e.jsx("td",{className:`${l} hidden md:table-cell`,children:e.jsx("span",{className:"text-sm text-neutral-600",children:b(s.dueDate)})}),e.jsx("td",{className:l,children:e.jsx("span",{className:"font-medium text-neutral-900",children:x(s.grandTotal)})}),e.jsx("td",{className:l,children:L(s.status)}),e.jsx("td",{className:l,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(`/invoices/${s.id}`),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",title:"Görüntüle",children:e.jsx(O,{className:"text-neutral-600",size:16})}),e.jsx("button",{onClick:()=>h.info("PDF indirme özelliği yakında..."),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",title:"PDF İndir",children:e.jsx(H,{className:"text-neutral-600",size:16})}),e.jsx("button",{onClick:()=>h.info("E-posta gönderme özelliği yakında..."),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",title:"E-posta Gönder",children:e.jsx(Q,{className:"text-neutral-600",size:16})})]})})]},s.id))})]})})})})]})}export{ee as default};
