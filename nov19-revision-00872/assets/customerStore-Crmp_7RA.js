import{c as d}from"./state-vendor-JOdu_MDH.js";import{b as n}from"./index-BB04Wo6n.js";const g=d((e,m)=>({customers:[],loading:!1,error:null,fetchCustomers:async a=>{var t,o;e({loading:!0,error:null});try{const r=a?{search:a}:{},s=await n.get("/customers",{params:r});e({customers:s.data,loading:!1})}catch(r){e({error:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to fetch customers",loading:!1})}},getCustomer:async a=>{var t,o;e({loading:!0,error:null});try{const r=await n.get(`/customers/${a}`);return e({loading:!1}),r.data}catch(r){return e({error:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to fetch customer",loading:!1}),null}},createCustomer:async a=>{var t,o;e({loading:!0,error:null});try{const s=(await n.post("/customers",a)).data;return e(l=>({customers:[s,...l.customers],loading:!1})),s}catch(r){throw e({error:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to create customer",loading:!1}),r}},updateCustomer:async(a,t)=>{var o,r;e({loading:!0,error:null});try{const l=(await n.put(`/customers/${a}`,t)).data;return e(c=>({customers:c.customers.map(u=>u.id===a?l:u),loading:!1})),l}catch(s){throw e({error:((r=(o=s.response)==null?void 0:o.data)==null?void 0:r.error)||"Failed to update customer",loading:!1}),s}},deleteCustomer:async a=>{var t,o;e({loading:!0,error:null});try{await n.delete(`/customers/${a}`),e(r=>({customers:r.customers.filter(s=>s.id!==a),loading:!1}))}catch(r){throw e({error:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||"Failed to delete customer",loading:!1}),r}}}));export{g as u};
