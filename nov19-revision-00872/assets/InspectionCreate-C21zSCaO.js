import{r as h,j as e,S as A,a as M,R as O}from"./react-vendor-DBHNAGPW.js";import{b as C}from"./index-BB04Wo6n.js";import{P as T,a9 as K,C as P,ap as w,ac as F,au as I,a8 as H,X as R,a7 as L,n as q,aq as k,bi as D,i as $,am as U}from"./ui-vendor-Vc_pfhQB.js";import{u as G}from"./inspectionStore-HnKYWeT3.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";function B({data:o,onChange:N}){var u;const[n,a]=h.useState([]),[d,m]=h.useState([]),[c,b]=h.useState([]),[i,p]=h.useState(!0),[j,y]=h.useState(null);h.useEffect(()=>{f()},[]);const f=async()=>{try{p(!0);const[t,l,r]=await Promise.all([C.get("/orders"),C.get("/equipment"),C.get("/auth/users")]);a(t.data),m(l.data),b(r.data)}catch(t){console.error("Veri yÃ¼kleme hatasÄ±:",t),b([{id:1,name:"Admin KullanÄ±cÄ±",email:"admin@canary.com"}])}finally{p(!1)}},g=t=>{var r,x;const l=n.find(v=>v.id===parseInt(t));y(l),l&&N({orderId:l.id,customerId:l.customerId,equipmentId:(x=(r=l.items)==null?void 0:r[0])==null?void 0:x.equipmentId})},s=(t,l)=>{N({[t]:l})};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Genel Bilgiler"}),e.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Kontrol iÅŸleminin temel bilgilerini girin"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Kontrol Tipi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>s("inspectionType","CHECKOUT"),className:`p-4 border-2 rounded-xl transition-all ${o.inspectionType==="CHECKOUT"?"border-neutral-600 bg-blue-50":"border-neutral-200 hover:border-neutral-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"mx-auto mb-2 text-blue-600",size:24}),e.jsx("p",{className:"font-semibold text-neutral-900",children:"Teslim AlÄ±ÅŸ"}),e.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:"MÃ¼ÅŸteriye ekipman teslim edilirken yapÄ±lÄ±r"})]})}),e.jsx("button",{type:"button",onClick:()=>s("inspectionType","CHECKIN"),className:`p-4 border-2 rounded-xl transition-all ${o.inspectionType==="CHECKIN"?"border-purple-600 bg-purple-50":"border-neutral-200 hover:border-neutral-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"mx-auto mb-2 text-purple-600",size:24}),e.jsx("p",{className:"font-semibold text-neutral-900",children:"Teslim EdiÅŸ"}),e.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:"MÃ¼ÅŸteriden ekipman geri alÄ±nÄ±rken yapÄ±lÄ±r"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["SipariÅŸ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.orderId||"",onChange:t=>g(t.target.value),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-500",required:!0,children:[e.jsx("option",{value:"",children:"SipariÅŸ seÃ§in..."}),n.map(t=>{var l;return e.jsxs("option",{value:t.id,children:["SipariÅŸ #",t.id," - ",((l=t.customer)==null?void 0:l.name)||"MÃ¼ÅŸteri"," - ",t.status]},t.id)})]}),j&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"MÃ¼ÅŸteri:"})," ",(u=j.customer)==null?void 0:u.name]}),e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Tarih:"})," ",new Date(j.startDate).toLocaleDateString("tr-TR")," - ",new Date(j.endDate).toLocaleDateString("tr-TR")]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Ekipman ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.equipmentId||"",onChange:t=>s("equipmentId",parseInt(t.target.value)),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-500",required:!0,children:[e.jsx("option",{value:"",children:"Ekipman seÃ§in..."}),d.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.serialNumber," (",t.status,")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Kontrol Eden ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.inspectorId||"",onChange:t=>s("inspectorId",parseInt(t.target.value)),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-500",required:!0,children:[e.jsx("option",{value:"",children:"Kontrol eden kiÅŸiyi seÃ§in..."}),c.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.email]},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:[e.jsx(K,{className:"inline mr-1",size:16}),"Konum"]}),e.jsx("input",{type:"text",value:o.location||"",onChange:t=>s("location",t.target.value),placeholder:"Ã–rn: Ä°stanbul Merkez Depo, Ankara Åube...",className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-500"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"KontrolÃ¼n yapÄ±ldÄ±ÄŸÄ± fiziksel konum (opsiyonel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Notlar"}),e.jsx("textarea",{value:o.notes||"",onChange:t=>s("notes",t.target.value),placeholder:"Genel notlar, Ã¶zel durumlar...",rows:4,className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"â„¹ï¸ Dikkat:"})," YÄ±ldÄ±zlÄ± (*) alanlar zorunludur. Ä°leri geÃ§meden Ã¶nce lÃ¼tfen tÃ¼m gerekli alanlarÄ± doldurun."]})})]})}const Y=[{id:"1",category:"Fiziksel Durum",label:"GÃ¶vde ve kasa hasarÄ± var mÄ±?",checked:!1,required:!0,notes:""},{id:"2",category:"Fiziksel Durum",label:"Objektif ve lens temiz mi?",checked:!1,required:!0,notes:""},{id:"3",category:"Fiziksel Durum",label:"LCD ekran Ã§alÄ±ÅŸÄ±yor mu?",checked:!1,required:!0,notes:""},{id:"4",category:"Fiziksel Durum",label:"TÃ¼m dÃ¼ÄŸmeler Ã§alÄ±ÅŸÄ±yor mu?",checked:!1,required:!0,notes:""},{id:"5",category:"Aksesuar KontrolÃ¼",label:"Batarya mevcut mu?",checked:!1,required:!0,notes:""},{id:"6",category:"Aksesuar KontrolÃ¼",label:"Åarj cihazÄ± mevcut mu?",checked:!1,required:!0,notes:""},{id:"7",category:"Aksesuar KontrolÃ¼",label:"HafÄ±za kartÄ± mevcut mu?",checked:!1,required:!1,notes:""},{id:"8",category:"Aksesuar KontrolÃ¼",label:"TaÅŸÄ±ma Ã§antasÄ± temiz mi?",checked:!1,required:!1,notes:""},{id:"9",category:"Fonksiyonel Test",label:"Kamera aÃ§Ä±lÄ±yor mu?",checked:!1,required:!0,notes:""},{id:"10",category:"Fonksiyonel Test",label:"Video kaydÄ± Ã§alÄ±ÅŸÄ±yor mu?",checked:!1,required:!0,notes:""},{id:"11",category:"Fonksiyonel Test",label:"FotoÄŸraf Ã§ekimi Ã§alÄ±ÅŸÄ±yor mu?",checked:!1,required:!0,notes:""},{id:"12",category:"Fonksiyonel Test",label:"Zoom ve focus Ã§alÄ±ÅŸÄ±yor mu?",checked:!1,required:!0,notes:""}];function J({data:o,onChange:N}){const[n,a]=h.useState(()=>o.checklistData&&Array.isArray(o.checklistData)?o.checklistData:Y),[d,m]=h.useState({category:"",label:""}),[c,b]=h.useState(!1),i=(t,l)=>{const r=n.map(x=>x.id===t?{...x,checked:l}:x);a(r),N({checklistData:r})},p=(t,l)=>{const r=n.map(x=>x.id===t?{...x,notes:l}:x);a(r),N({checklistData:r})},j=()=>{if(!d.category||!d.label){alert("LÃ¼tfen kategori ve madde bilgilerini girin");return}const t={id:Date.now().toString(),category:d.category,label:d.label,checked:!1,required:!1,notes:""},l=[...n,t];a(l),N({checklistData:l}),m({category:"",label:""}),b(!1)},y=t=>{if(window.confirm("Bu kontrol maddesini silmek istediÄŸinizden emin misiniz?")){const l=n.filter(r=>r.id!==t);a(l),N({checklistData:l})}},f=t=>{N({overallCondition:t})},g=Array.from(new Set(n.map(t=>t.category))),u=(()=>{const t=n.length,l=n.filter(x=>x.checked).length,r=t>0?Math.round(l/t*100):0;return{total:t,checked:l,percentage:r}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Kontrol Listesi"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"EkipmanÄ±n durumunu kontrol edin ve notlar ekleyin"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Ä°lerleme"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[u.checked," / ",u.total," (",u.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u.percentage}%`}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Genel Durum DeÄŸerlendirmesi"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"EXCELLENT",label:"MÃ¼kemmel",color:"green"},{value:"GOOD",label:"Ä°yi",color:"blue"},{value:"FAIR",label:"Orta",color:"yellow"},{value:"POOR",label:"KÃ¶tÃ¼",color:"red"}].map(t=>e.jsx("button",{type:"button",onClick:()=>f(t.value),className:`p-3 border-2 rounded-xl transition-all ${o.overallCondition===t.value?`border-${t.color}-600 bg-${t.color}-50`:"border-neutral-200 hover:border-neutral-300"}`,children:e.jsx("p",{className:"font-semibold text-neutral-900",children:t.label})},t.value))})]}),g.map(t=>e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:t}),e.jsx("div",{className:"space-y-3",children:n.filter(l=>l.category===t).map(l=>e.jsx("div",{className:"bg-white rounded-lg p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(l.id,!l.checked),className:`mt-0.5 flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${l.checked?"bg-green-600 border-green-600":"border-neutral-300 hover:border-neutral-400"}`,children:l.checked&&e.jsx(P,{size:16,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${l.checked?"text-neutral-600 line-through":"text-neutral-900"}`,children:l.label}),e.jsx("textarea",{value:l.notes||"",onChange:r=>p(l.id,r.target.value),placeholder:"Not ekle...",rows:2,className:"mt-2 w-full px-3 py-2 text-xs border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none"})]}),e.jsx("button",{type:"button",onClick:()=>y(l.id),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"Sil",children:e.jsx(w,{size:16})})]})},l.id))})]},t)),e.jsx("div",{className:"border-2 border-dashed border-neutral-300 rounded-xl p-4",children:c?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:d.category,onChange:t=>m({...d,category:t.target.value}),placeholder:"Kategori (Ã¶r: Fiziksel Durum)",className:"w-full px-3 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:d.label,onChange:t=>m({...d,label:t.target.value}),placeholder:"Kontrol maddesi",className:"w-full px-3 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors",children:"Ekle"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),m({category:"",label:""})},className:"flex-1 px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 transition-colors",children:"Ä°ptal"})]})]}):e.jsxs("button",{type:"button",onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 text-neutral-600 hover:text-neutral-900 transition-colors",children:[e.jsx(F,{size:20}),"Yeni Kontrol Maddesi Ekle"]})}),e.jsx("div",{className:"bg-blue-50 border border-neutral-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"ğŸ’¡ Ä°pucu:"})," Her maddeyi kontrol ettikten sonra iÅŸaretleyin. Ã–zel durumlar varsa not alanÄ±na yazÄ±n."]})})]})}const _=({onUpload:o,onRemove:N,photos:n,maxFiles:a=10,maxSizeMB:d=5,acceptedFormats:m=["image/jpeg","image/jpg","image/png","image/webp"]})=>{const[c,b]=h.useState(!1),[i,p]=h.useState(""),j=h.useRef(null),y=r=>{if(!m.includes(r.type))return`GeÃ§ersiz dosya formatÄ±: ${r.name}. Sadece JPG, PNG, WebP desteklenir.`;const x=r.size/(1024*1024);return x>d?`Dosya Ã§ok bÃ¼yÃ¼k: ${r.name} (${x.toFixed(2)}MB). Maksimum ${d}MB.`:null},f=r=>{if(!r||r.length===0)return;if(p(""),n.length+r.length>a){p(`Maksimum ${a} fotoÄŸraf yÃ¼kleyebilirsiniz.`);return}const x=[],v=[];if(Array.from(r).forEach(S=>{const z=y(S);z?v.push(z):x.push(S)}),v.length>0){p(v.join(`
`));return}x.length>0&&o(x)},g=r=>{r.preventDefault(),b(!0)},s=r=>{r.preventDefault(),b(!1)},u=r=>{r.preventDefault(),b(!1),f(r.dataTransfer.files)},t=r=>{f(r.target.files),j.current&&(j.current.value="")},l=()=>{var r;(r=j.current)==null||r.click()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`
          border-2 border-dashed rounded-xl p-8 text-center transition-all
          ${c?"border-neutral-500 bg-blue-50":"border-neutral-300 bg-neutral-50 hover:border-gray-400 hover:bg-neutral-100"}
          ${n.length>=a?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,onDragOver:g,onDragLeave:s,onDrop:u,onClick:n.length<a?l:void 0,children:[e.jsx("input",{ref:j,type:"file",multiple:!0,accept:m.join(","),onChange:t,className:"hidden",disabled:n.length>=a}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c?e.jsx(I,{size:48,className:"text-blue-500"}):e.jsx(H,{size:48,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-neutral-700",children:n.length>=a?"Maksimum fotoÄŸraf sayÄ±sÄ±na ulaÅŸtÄ±nÄ±z":"FotoÄŸraflarÄ± sÃ¼rÃ¼kleyin veya tÄ±klayÄ±n"}),n.length<a&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["JPG, PNG, WebP â€¢ Maksimum ",d,"MB â€¢ ",a-n.length," fotoÄŸraf daha ekleyebilirsiniz"]})]}),n.length<a&&e.jsx("button",{type:"button",className:"px-4 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors",onClick:r=>{r.stopPropagation(),l()},children:"Dosya SeÃ§"})]})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-800 whitespace-pre-line",children:i})}),n.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h4",{className:"text-sm font-medium text-neutral-700",children:["YÃ¼klenen FotoÄŸraflar (",n.length,"/",a,")"]})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map((r,x)=>e.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border-2 border-neutral-200 hover:border-neutral-300 transition-all",children:[e.jsx("img",{src:r,alt:`FotoÄŸraf ${x+1}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>N(x),className:"opacity-0 group-hover:opacity-100 transition-opacity p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"FotoÄŸrafÄ± Sil",children:e.jsx(R,{size:20})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:x+1})]},x))})]}),n.length===0&&!i&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(L,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"HenÃ¼z fotoÄŸraf yÃ¼klenmedi"})]})]})};function W({data:o,onChange:N}){const[n,a]=h.useState([]),[d,m]=h.useState(!1),[c,b]=h.useState([]),[i,p]=h.useState({id:"",damageType:"SCRATCH",severity:"MINOR",description:"",location:"",estimatedCost:0,responsibleParty:"CUSTOMER"});h.useEffect(()=>{N({...o,photos:n,damages:c})},[n,c]);const j=s=>{const u=s.map(t=>new Promise(l=>{const r=new FileReader;r.onload=x=>{var v;(v=x.target)!=null&&v.result&&l(x.target.result)},r.readAsDataURL(t)}));Promise.all(u).then(t=>{a([...n,...t])})},y=s=>{a(n.filter((u,t)=>t!==s))},f=()=>{if(!i.description){alert("LÃ¼tfen hasar aÃ§Ä±klamasÄ± girin");return}const s={...i,id:Date.now().toString()};b([...c,s]),p({id:"",damageType:"SCRATCH",severity:"MINOR",description:"",location:"",estimatedCost:0,responsibleParty:"CUSTOMER"}),m(!1)},g=s=>{b(c.filter(u=>u.id!==s))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"FotoÄŸraflar & Hasar Raporu"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"EkipmanÄ±n fotoÄŸraflarÄ±nÄ± ekleyin ve varsa hasar durumlarÄ±nÄ± kaydedin"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:[e.jsx(I,{className:"inline mr-1",size:16}),"Ekipman FotoÄŸraflarÄ±"]}),e.jsx(_,{photos:n,onUpload:j,onRemove:y,maxFiles:10,maxSizeMB:5})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(q,{className:"text-yellow-600 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-1",children:"Hasar Durumu"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Ekipmanda herhangi bir hasar var mÄ±?"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:`p-3 border-2 rounded-lg transition-all ${d?"border-neutral-200 bg-white text-neutral-700":"border-green-600 bg-green-50 text-green-900"}`,children:e.jsx("p",{className:"font-semibold",children:"âœ“ HasarsÄ±z"})}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:`p-3 border-2 rounded-lg transition-all ${d?"border-red-600 bg-red-50 text-red-900":"border-neutral-200 bg-white text-neutral-700"}`,children:e.jsx("p",{className:"font-semibold",children:"âœ— Hasar Var"})})]})]}),d&&e.jsxs("div",{className:"bg-white border border-red-200 rounded-xl p-4 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Hasar DetaylarÄ±"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Hasar Tipi"}),e.jsxs("select",{value:i.damageType,onChange:s=>p({...i,damageType:s.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"SCRATCH",children:"Ã‡izik"}),e.jsx("option",{value:"DENT",children:"Ezik/Ã‡Ã¶kÃ¼k"}),e.jsx("option",{value:"BROKEN",children:"KÄ±rÄ±k"}),e.jsx("option",{value:"MISSING_PART",children:"Eksik ParÃ§a"}),e.jsx("option",{value:"MALFUNCTION",children:"ArÄ±za"}),e.jsx("option",{value:"COSMETIC",children:"Kozmetik"}),e.jsx("option",{value:"FUNCTIONAL",children:"Fonksiyonel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Åiddet Derecesi"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["MINOR","MODERATE","MAJOR","CRITICAL"].map(s=>e.jsx("button",{type:"button",onClick:()=>p({...i,severity:s}),className:`p-2 border-2 rounded-lg text-sm font-medium transition-all ${i.severity===s?s==="MINOR"?"border-yellow-500 bg-yellow-50 text-yellow-900":s==="MODERATE"?"border-orange-500 bg-orange-50 text-orange-900":s==="MAJOR"?"border-red-500 bg-red-50 text-red-900":"border-red-700 bg-red-100 text-red-900":"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-50"}`,children:s==="MINOR"?"Hafif":s==="MODERATE"?"Orta":s==="MAJOR"?"Ciddi":"Kritik"},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Konum/BÃ¶lge"}),e.jsx("input",{type:"text",value:i.location,onChange:s=>p({...i,location:s.target.value}),placeholder:"Ã–r: Ã–n lens, gÃ¶vde saÄŸ Ã¼st kÃ¶ÅŸe",className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["AÃ§Ä±klama ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{rows:3,value:i.description,onChange:s=>p({...i,description:s.target.value}),placeholder:"HasarÄ±n detaylÄ± aÃ§Ä±klamasÄ±...",className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tahmini Maliyet (â‚º)"}),e.jsx("input",{type:"number",value:i.estimatedCost,onChange:s=>p({...i,estimatedCost:parseFloat(s.target.value)||0}),placeholder:"0.00",className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Sorumlu Taraf"}),e.jsxs("select",{value:i.responsibleParty,onChange:s=>p({...i,responsibleParty:s.target.value}),className:"w-full px-4 py-2 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"CUSTOMER",children:"MÃ¼ÅŸteri"}),e.jsx("option",{value:"COMPANY",children:"Firma"}),e.jsx("option",{value:"THIRD_PARTY",children:"3. Taraf"}),e.jsx("option",{value:"UNKNOWN",children:"Bilinmiyor"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Hasar Ekle"}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-lg hover:bg-neutral-200 transition-colors",children:"Ä°ptal"})]})]}),c.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900",children:["KayÄ±tlÄ± Hasarlar (",c.length,")"]}),c.map(s=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${s.severity==="MINOR"?"bg-yellow-200 text-yellow-900":s.severity==="MODERATE"?"bg-orange-200 text-orange-900":s.severity==="MAJOR"?"bg-red-200 text-red-900":"bg-red-300 text-red-950"}`,children:s.severity==="MINOR"?"Hafif":s.severity==="MODERATE"?"Orta":s.severity==="MAJOR"?"Ciddi":"Kritik"}),e.jsx("span",{className:"text-sm font-medium text-red-900",children:s.damageType==="SCRATCH"?"Ã‡izik":s.damageType==="DENT"?"Ezik":s.damageType==="BROKEN"?"KÄ±rÄ±k":s.damageType==="MISSING_PART"?"Eksik ParÃ§a":s.damageType==="MALFUNCTION"?"ArÄ±za":s.damageType==="COSMETIC"?"Kozmetik":"Fonksiyonel"})]}),e.jsx("p",{className:"text-sm text-neutral-700 mb-1",children:s.description}),s.location&&e.jsxs("p",{className:"text-xs text-neutral-600",children:["ğŸ“ ",s.location]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-neutral-600",children:[s.estimatedCost>0&&e.jsxs("span",{children:["ğŸ’° â‚º",s.estimatedCost.toLocaleString()]}),e.jsxs("span",{children:["ğŸ‘¤ ",s.responsibleParty==="CUSTOMER"?"MÃ¼ÅŸteri":s.responsibleParty==="COMPANY"?"Firma":s.responsibleParty==="THIRD_PARTY"?"3. Taraf":"Bilinmiyor"]})]})]}),e.jsx("button",{type:"button",onClick:()=>g(s.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"HasarÄ± Sil",children:e.jsx(R,{size:16})})]})},s.id))]}),e.jsx("div",{className:"bg-blue-50 border border-neutral-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"ğŸ’¡ Ä°pucu:"})," FotoÄŸraflar PDF raporuna eklenecektir. HasarlÄ± bÃ¶lgelerin net fotoÄŸraflarÄ±nÄ± Ã§ekin."]})}),e.jsx("div",{className:"bg-neutral-50 rounded-xl p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:n.length}),e.jsx("p",{className:"text-sm text-neutral-600",children:"FotoÄŸraf"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-900",children:c.length}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Hasar"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["â‚º",c.reduce((s,u)=>s+u.estimatedCost,0).toLocaleString()]}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Tahmini Maliyet"})]})]})})]})}const E=({onSave:o,label:N="Ä°mza",width:n=500,height:a=200,disabled:d=!1,initialSignature:m})=>{const c=h.useRef(null),[b,i]=h.useState(!!m),[p,j]=h.useState(m||""),y=()=>{var s;(s=c.current)==null||s.clear(),i(!1),j("")},f=()=>{var u,t;if((u=c.current)!=null&&u.isEmpty()){alert("LÃ¼tfen Ã¶nce imza atÄ±nÄ±z!");return}const s=(t=c.current)==null?void 0:t.toDataURL("image/png");s&&(j(s),i(!0),o(s))},g=()=>{var s,u;if(!((s=c.current)!=null&&s.isEmpty())&&!d){const t=(u=c.current)==null?void 0:u.toDataURL("image/png");t&&(j(t),i(!0),o(t))}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:N}),p&&b?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"border-2 border-green-500 rounded-lg p-2 bg-green-50",children:e.jsx("img",{src:p,alt:N,className:"w-full h-auto",style:{maxHeight:a}})}),!d&&e.jsx("button",{type:"button",onClick:()=>{y(),i(!1)},className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(w,{size:16})}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[e.jsx(k,{size:16,className:"mr-1"}),"Ä°mza kaydedildi"]})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"border-2 border-neutral-300 rounded-lg overflow-hidden bg-white",style:{width:"100%",maxWidth:n},children:e.jsx(A,{ref:c,canvasProps:{width:n,height:a,className:"signature-canvas w-full"},backgroundColor:"white",penColor:"black",onEnd:g})}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("button",{type:"button",onClick:y,disabled:d,className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(w,{size:16}),"Temizle"]}),e.jsxs("button",{type:"button",onClick:f,disabled:d,className:"px-4 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(k,{size:16}),"Ä°mzayÄ± Kaydet"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"* ParmaÄŸÄ±nÄ±z veya mouse ile imza atÄ±nÄ±z"})]})]})};function V({data:o,onChange:N}){const[n,a]=h.useState(!1),[d,m]=h.useState(!1),[c,b]=h.useState(o.customerSignature||""),[i,p]=h.useState(o.inspectorSignature||"");h.useEffect(()=>{N({...o,customerSignature:c,inspectorSignature:i})},[c,i]);const j=f=>{b(f),a(!0)},y=f=>{p(f),m(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Ä°mzalar & Onay"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Kontrol iÅŸlemini tamamlamak iÃ§in gerekli onaylarÄ± alÄ±n"})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Kontrol Ã–zeti"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Kontrol Tipi:"}),e.jsx("span",{className:"font-medium text-neutral-900",children:o.inspectionType==="CHECKOUT"?"Teslim AlÄ±ÅŸ":"Teslim EdiÅŸ"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Genel Durum:"}),e.jsx("span",{className:"font-medium text-neutral-900",children:o.overallCondition||"Belirtilmedi"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Kontrol Listesi:"}),e.jsxs("span",{className:"font-medium text-neutral-900",children:[Array.isArray(o.checklistData)?o.checklistData.length:0," madde"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(D,{className:"text-blue-600 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-1",children:"MÃ¼ÅŸteri Ä°mzasÄ±"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"MÃ¼ÅŸteri, ekipmanÄ±n teslim alÄ±ndÄ±ÄŸÄ±nÄ±/verildiÄŸini ve kontrolÃ¼ onayladÄ±ÄŸÄ±nÄ± beyan eder"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(E,{label:"MÃ¼ÅŸteri Ä°mzasÄ±",onSave:j,width:600,height:200,initialSignature:c})}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:f=>a(f.target.checked),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"YukarÄ±da belirtilen ekipmanÄ± kontrol ettim ve mevcut durumunu onaylÄ±yorum. Hasar durumlarÄ± doÄŸru bir ÅŸekilde kaydedilmiÅŸtir."})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(D,{className:"text-green-600 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-1",children:"Kontrol Eden Ä°mzasÄ±"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"KontrolÃ¼ yapan personel, iÅŸlemi onaylar"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(E,{label:"Kontrol Eden Ä°mzasÄ±",onSave:y,width:600,height:200,initialSignature:i})}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:f=>m(f.target.checked),className:"mt-1 w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"KontrolÃ¼ titizlikle gerÃ§ekleÅŸtirdim ve tÃ¼m bulgularÄ± doÄŸru bir ÅŸekilde kaydettim. Bu rapor gerÃ§ek durumu yansÄ±tmaktadÄ±r."})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"text-yellow-600 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Ã–nemli Notlar"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Bu kontrol raporu yasal bir belge niteliÄŸindedir"}),e.jsx("li",{children:"Ä°mzalandÄ±ktan sonra deÄŸiÅŸiklik yapÄ±lamaz"}),e.jsx("li",{children:"Hasar durumlarÄ± maliyetlendirmeye esas teÅŸkil eder"}),e.jsx("li",{children:"Rapor mÃ¼ÅŸteri ile paylaÅŸÄ±lacaktÄ±r"})]})]})]})}),(!n||!d)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"âš ï¸ UyarÄ±:"})," Kaydetmek iÃ§in hem mÃ¼ÅŸteri hem de kontrol eden personelin onay kutucuklarÄ±nÄ± iÅŸaretlemesi gerekmektedir."]})}),n&&d&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"âœ“ HazÄ±r!"}),' TÃ¼m onaylar alÄ±ndÄ±. "Kaydet ve Tamamla" butonuna tÄ±klayarak iÅŸlemi tamamlayabilirsiniz.']})})]})}function re(){const o=M(),{createInspection:N,loading:n}=G(),[a,d]=h.useState(1),[m,c]=h.useState({inspectionType:"CHECKOUT",overallCondition:"GOOD",checklistData:[]}),b=[{number:1,title:"Genel Bilgiler",component:B},{number:2,title:"Kontrol Listesi",component:J},{number:3,title:"FotoÄŸraf & Hasar",component:W},{number:4,title:"Ä°mzalar",component:V}],i=()=>{a<b.length&&d(a+1)},p=()=>{a>1&&d(a-1)},j=g=>{c({...m,...g})},y=async()=>{var g,s;try{if(!m.orderId||!m.equipmentId||!m.inspectorId){alert("LÃ¼tfen gerekli tÃ¼m alanlarÄ± doldurun");return}const u=await N(m);alert("âœ… Kontrol kaydÄ± baÅŸarÄ±yla oluÅŸturuldu!"),o(`/inspection/${u.id}`)}catch(u){console.error("Kontrol oluÅŸturma hatasÄ±:",u),alert("âŒ Hata: "+(((s=(g=u.response)==null?void 0:g.data)==null?void 0:s.error)||u.message))}},f=b[a-1].component;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>o("/inspection"),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors border border-neutral-200 rounded-xl",children:e.jsx(U,{size:20})}),e.jsxs("p",{className:"text-sm text-neutral-600",children:["AdÄ±m ",a," / ",b.length,": ",b[a-1].title]})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:b.map((g,s)=>e.jsxs(O.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-colors ${a>g.number?"bg-green-500 text-white":a===g.number?"bg-neutral-900 text-white":"bg-neutral-200 text-neutral-600"}`,children:a>g.number?e.jsx(k,{size:20}):g.number}),e.jsx("div",{className:"hidden md:block",children:e.jsx("p",{className:`text-sm font-medium ${a>=g.number?"text-neutral-900":"text-neutral-500"}`,children:g.title})})]}),s<b.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${a>g.number?"bg-green-500":"bg-neutral-200"}`})]},g.number))})}),e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:e.jsx(f,{data:m,onChange:j})}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsx("button",{onClick:p,disabled:a===1,className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-xl hover:bg-neutral-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Geri"}),e.jsxs("div",{className:"text-sm text-neutral-600",children:["AdÄ±m ",a," / ",b.length]}),a<b.length?e.jsx("button",{onClick:i,className:"px-6 py-2 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors",children:"Ä°leri"}):e.jsx("button",{onClick:y,disabled:n,className:"px-6 py-2 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{size:20}),"Kaydet ve Tamamla"]})})]})]})}export{re as default};
