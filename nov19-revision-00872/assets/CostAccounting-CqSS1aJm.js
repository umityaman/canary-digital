import{r as x,z as p,j as e}from"./react-vendor-DBHNAGPW.js";import{D as r,c as i,b as ee,a as n,i as te}from"./index-C5wiI25D.js";import{g as se,ac as ue,P as ae,e as pe,Z as le,D as je,v as re,E as Ne,a0 as ge,z as fe,ao as ye,F as ve}from"./ui-vendor-Vc_pfhQB.js";import"./chart-vendor-R5Y1AjBI.js";function Fe(){var k,z,M,F,S,D,P,$,T,G,A,E,B,R,I,O,H,K,L,Y,U,_,q,Z,J,Q,V,W;const[ie,g]=x.useState(!1),[w,ne]=x.useState("month"),[de,ce]=x.useState("all"),[be,f]=x.useState([]),[c,y]=x.useState([]),xe=t=>({material:"material",hammadde:"material",malzeme:"material",labor:"labor",işçilik:"labor",personel:"labor",overhead:"overhead",genel:"overhead",other:"other",diğer:"other"})[t==null?void 0:t.toLowerCase()]||"other";x.useEffect(()=>{me()},[w]);const me=async()=>{var t,l;g(!0);try{const b=localStorage.getItem("token"),X=await fetch("http://localhost:4000/api/cost-accounting/reports/cost",{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(X.ok){const N=await X.json();if(N.success&&N.data){const oe=((t=N.data.costs)==null?void 0:t.map(s=>{var u;return{id:((u=s.id)==null?void 0:u.toString())||"",name:s.name||s.description||"İsimsiz Maliyet",category:xe(s.category||s.type),amount:parseFloat(s.amount||s.totalAmount||0),date:s.date||s.createdAt?new Date(s.date||s.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],project:s.project||s.projectName}}))||[],he=((l=N.data.products)==null?void 0:l.map(s=>{var u;return{id:((u=s.id)==null?void 0:u.toString())||"",productName:s.name||s.productName||"İsimsiz Ürün",materialCost:parseFloat(s.materialCost||0),laborCost:parseFloat(s.laborCost||0),overheadCost:parseFloat(s.overheadCost||0),totalCost:parseFloat(s.totalCost||0),sellingPrice:parseFloat(s.sellingPrice||0),profit:parseFloat(s.profit||0),profitMargin:parseFloat(s.profitMargin||0)}}))||[];f(oe),y(he)}else f([]),y([])}else throw new Error("Maliyet verileri yüklenemedi");g(!1)}catch(b){console.error("Maliyet verileri yüklenirken hata:",b),f([]),y([]),p.error("Maliyet verileri yüklenemedi"),g(!1)}},m=c.reduce((t,l)=>t+l.materialCost,0),o=c.reduce((t,l)=>t+l.laborCost,0),h=c.reduce((t,l)=>t+l.overheadCost,0),d=c.reduce((t,l)=>t+l.totalCost,0),j=c.reduce((t,l)=>t+l.sellingPrice,0),v=c.reduce((t,l)=>t+l.profit,0),C=j>0?(v/j*100).toFixed(2):"0.00",a=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return ie?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`${(z=(k=r)==null?void 0:k.typography)==null?void 0:z.h1} ${(F=(M=r)==null?void 0:M.colors)==null?void 0:F.text.primary} flex items-center gap-3`,children:[e.jsx(se,{className:"w-8 h-8 text-neutral-900"}),"Maliyet Muhasebesi"]}),e.jsx("p",{className:`${(D=(S=r)==null?void 0:S.typography)==null?void 0:D.body.md} ${($=(P=r)==null?void 0:P.colors)==null?void 0:$.text.secondary} mt-1`,children:"Üretim maliyetlerini takip edin ve karlılık analizi yapın"})]}),e.jsxs("button",{onClick:()=>p.success("Yeni maliyet kaydı ekleniyor..."),className:i(ee("md","primary","md"),"gap-2"),children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Yeni Maliyet"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Toplam Maliyet"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:a(d)}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Bu dönem"})]}),e.jsx("div",{className:"w-12 h-12 bg-neutral-900 rounded-xl flex items-center justify-center",children:e.jsx(se,{className:"text-white",size:24})})]})}),e.jsx("div",{className:n("md","lg","default","lg"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Hammadde"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:a(m)}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[(m/d*100).toFixed(1),"% oran"]})]}),e.jsx("div",{className:"w-12 h-12 bg-neutral-100 rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"text-neutral-900",size:24})})]})}),e.jsx("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"İşçilik"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:a(o)}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[(o/d*100).toFixed(1),"% oran"]})]}),e.jsx("div",{className:"w-12 h-12 bg-neutral-100 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"text-neutral-900",size:24})})]})}),e.jsx("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Genel Gider"}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:a(h)}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[(h/d*100).toFixed(1),"% oran"]})]}),e.jsx("div",{className:"w-12 h-12 bg-neutral-100 rounded-xl flex items-center justify-center",children:e.jsx(le,{className:"text-neutral-900",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center",children:e.jsx(je,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Toplam Gelir"}),e.jsx("p",{className:"text-xl font-bold text-neutral-900",children:a(j)})]})]}),e.jsx("div",{className:"h-1 bg-neutral-900 rounded-full"})]}),e.jsxs("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Toplam Kar"}),e.jsx("p",{className:"text-xl font-bold text-neutral-900",children:a(v)})]})]}),e.jsx("div",{className:"h-1 bg-neutral-900 rounded-full"})]}),e.jsxs("div",{className:i(n("sm","md","default","lg"),"min-w-0"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center",children:e.jsx(Ne,{className:"text-neutral-900",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600",children:"Ortalama Kar Marjı"}),e.jsxs("p",{className:"text-xl font-bold text-neutral-900",children:["%",C]})]})]}),e.jsx("div",{className:"h-1 bg-neutral-800 rounded-full"})]})]}),e.jsx("div",{className:i(n("sm","md","default","lg"),"max-w-full"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:i((G=(T=r)==null?void 0:T.typography)==null?void 0:G.label.lg,(E=(A=r)==null?void 0:A.colors)==null?void 0:E.text.secondary,"block mb-2"),children:"Dönem"}),e.jsxs("select",{value:w,onChange:t=>ne(t.target.value),className:te("md","default",void 0,"md"),children:[e.jsx("option",{value:"week",children:"Bu Hafta"}),e.jsx("option",{value:"month",children:"Bu Ay"}),e.jsx("option",{value:"quarter",children:"Bu Çeyrek"}),e.jsx("option",{value:"year",children:"Bu Yıl"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:i((R=(B=r)==null?void 0:B.typography)==null?void 0:R.label.lg,(O=(I=r)==null?void 0:I.colors)==null?void 0:O.text.secondary,"block mb-2"),children:"Kategori"}),e.jsxs("select",{value:de,onChange:t=>ce(t.target.value),className:te("md","default",void 0,"md"),children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"material",children:"Hammadde"}),e.jsx("option",{value:"labor",children:"İşçilik"}),e.jsx("option",{value:"overhead",children:"Genel Gider"}),e.jsx("option",{value:"other",children:"Diğer"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>p.success("Rapor indiriliyor..."),className:i(ee("md","outline","md"),"gap-2"),children:[e.jsx(ge,{className:"w-4 h-4"}),"Excel"]})})]})}),e.jsxs("div",{className:i(n("md","sm","default","lg"),"p-0 overflow-hidden"),children:[e.jsx("div",{className:"px-6 py-4 border-b border-neutral-200",children:e.jsxs("h3",{className:`${(K=(H=r)==null?void 0:H.typography)==null?void 0:K.h3} ${(Y=(L=r)==null?void 0:L.colors)==null?void 0:Y.text.primary} flex items-center gap-2`,children:[e.jsx(fe,{className:"text-neutral-900",size:20}),"Ürün Bazlı Maliyet Analizi"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-neutral-700 uppercase",children:"Ürün"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase hidden lg:table-cell",children:"Hammadde"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase hidden md:table-cell",children:"İşçilik"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase hidden xl:table-cell",children:"G.Gider"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase",children:"Maliyet"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase hidden md:table-cell",children:"Fiyat"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase",children:"Kar"}),e.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-neutral-700 uppercase hidden lg:table-cell",children:"Marj"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-neutral-700 uppercase",children:"İşlem"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-3 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-neutral-900 text-sm",children:t.productName})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right text-xs text-neutral-600 hidden lg:table-cell",children:a(t.materialCost)}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right text-xs text-neutral-600 hidden md:table-cell",children:a(t.laborCost)}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right text-xs text-neutral-600 hidden xl:table-cell",children:a(t.overheadCost)}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right font-medium text-neutral-900 text-sm",children:a(t.totalCost)}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right text-xs text-neutral-600 hidden md:table-cell",children:a(t.sellingPrice)}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right",children:e.jsx("span",{className:"font-medium text-neutral-900",children:a(t.profit)})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-center hidden lg:table-cell",children:e.jsxs("span",{className:"inline-flex items-center justify-center rounded-full px-2 py-0.5 text-xs font-medium bg-neutral-100 text-neutral-800",children:["%",t.profitMargin.toFixed(1)]})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>p.success("Düzenleme açılıyor..."),className:"p-1.5 hover:bg-neutral-100 rounded-lg transition-colors",title:"Düzenle",children:e.jsx(ye,{className:"text-neutral-600",size:14})}),e.jsx("button",{onClick:()=>p.success("Detay görüntüleniyor..."),className:"p-1.5 hover:bg-neutral-100 rounded-lg transition-colors",title:"Detay",children:e.jsx(ve,{className:"text-neutral-900",size:14})})]})})]},t.id)),e.jsxs("tr",{className:"bg-neutral-100 font-bold",children:[e.jsx("td",{className:"px-3 py-3 text-neutral-900 text-sm",children:"TOPLAM"}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-xs hidden lg:table-cell",children:a(m)}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-xs hidden md:table-cell",children:a(o)}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-xs hidden xl:table-cell",children:a(h)}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-sm",children:a(d)}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-xs hidden md:table-cell",children:a(j)}),e.jsx("td",{className:"px-2 py-3 text-right text-neutral-900 text-sm",children:a(v)}),e.jsxs("td",{className:"px-2 py-3 text-center text-neutral-900 text-xs hidden lg:table-cell",children:["%",C]}),e.jsx("td",{className:"px-2 py-3"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:n("md","lg","default","lg"),children:[e.jsx("h3",{className:`${(_=(U=r)==null?void 0:U.typography)==null?void 0:_.h3} ${(Z=(q=r)==null?void 0:q.colors)==null?void 0:Z.text.primary} mb-4`,children:"Maliyet Dağılımı"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Hammadde"}),e.jsx("span",{className:"text-sm font-medium text-neutral-900",children:a(m)})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-neutral-900 h-2 rounded-full",style:{width:`${m/d*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"İşçilik"}),e.jsx("span",{className:"text-sm font-medium text-neutral-900",children:a(o)})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-neutral-800 h-2 rounded-full",style:{width:`${o/d*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Genel Gider"}),e.jsx("span",{className:"text-sm font-medium text-neutral-900",children:a(h)})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-neutral-700 h-2 rounded-full",style:{width:`${h/d*100}%`}})})]})]})]}),e.jsxs("div",{className:n("md","lg","default","lg"),children:[e.jsx("h3",{className:`${(Q=(J=r)==null?void 0:J.typography)==null?void 0:Q.h3} ${(W=(V=r)==null?void 0:V.colors)==null?void 0:W.text.primary} mb-4`,children:"Öneriler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-neutral-50 rounded-lg",children:[e.jsx(re,{className:"text-neutral-900 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Kar Marjı İyileştirme"}),e.jsx("p",{className:"text-xs text-neutral-700 mt-1",children:"Hammadde maliyetlerini %5 azaltarak kar marjınızı artırabilirsiniz."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-neutral-50 rounded-lg",children:[e.jsx(ae,{className:"text-neutral-900 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Stok Optimizasyonu"}),e.jsx("p",{className:"text-xs text-neutral-700 mt-1",children:"Yüksek cirolu ürünlerin stokunu artırın."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-neutral-50 rounded-lg",children:[e.jsx(le,{className:"text-neutral-900 flex-shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Enerji Tasarrufu"}),e.jsx("p",{className:"text-xs text-neutral-700 mt-1",children:"Genel gider maliyetlerinde tasarruf fırsatı var."})]})]})]})]})]})]})}export{Fe as default};
