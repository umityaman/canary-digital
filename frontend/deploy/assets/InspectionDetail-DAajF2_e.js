import{o as E,a as T,r as A,j as e,v as R}from"./react-vendor-DBHNAGPW.js";import{u as I,i as O}from"./inspectionStore-DsZfnHUq.js";import{A as i,am as P,bh as L,ao as B,ap as S,P as F,e as K,U,a9 as $,f as M,F as q,C as f,au as G,u as H}from"./ui-vendor-CIs_GH3f.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";import"./index-C00KFl1S.js";function W(){var o,m,h,u,p,j,b,N,g;const{id:r}=E(),d=T(),{selectedInspection:c,loading:v,error:x,getInspection:y,deleteInspection:w}=I();A.useEffect(()=>{r&&y(parseInt(r))},[r]);const k=async()=>{if(window.confirm("Bu kontrol√º silmek istediƒüinizden emin misiniz?"))try{await w(parseInt(r)),d("/inspection")}catch(s){console.error("Silme hatasƒ±:",s)}},D=async()=>{try{const s=await O.generatePDF(parseInt(r)),a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`inspection-${r}-${new Date().getTime()}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a)}catch(s){console.error("PDF indirme hatasƒ±:",s),alert("PDF indirilirken bir hata olu≈ütu. L√ºtfen tekrar deneyin.")}};if(v)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-900"})});if(x)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:[e.jsx(i,{className:"text-red-600 mb-2",size:32}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Hata"}),e.jsx("p",{className:"text-red-700",children:x}),e.jsx("button",{onClick:()=>d("/inspection"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors",children:"Listeye D√∂n"})]})});if(!c)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-neutral-600",children:"Kontrol bulunamadƒ±"})});const t=c,n=typeof t.checklistData=="string"?JSON.parse(t.checklistData||"[]"):t.checklistData||[],C=s=>{const a={PENDING:{label:"Beklemede",className:"bg-yellow-100 text-yellow-800",icon:e.jsx(H,{size:16})},APPROVED:{label:"Onaylandƒ±",className:"bg-green-100 text-green-800",icon:e.jsx(f,{size:16})},DAMAGE_FOUND:{label:"Hasar Bulundu",className:"bg-red-100 text-red-800",icon:e.jsx(i,{size:16})}},l=a[s]||a.PENDING;return e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${l.className}`,children:[l.icon,l.label]})},z=s=>{const a={EXCELLENT:{label:"M√ºkemmel",className:"bg-green-100 text-green-800"},GOOD:{label:"ƒ∞yi",className:"bg-neutral-100 text-neutral-800"},FAIR:{label:"Orta",className:"bg-yellow-100 text-yellow-800"},POOR:{label:"K√∂t√º",className:"bg-red-100 text-red-800"}},l=a[s]||a.FAIR;return e.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${l.className}`,children:l.label})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>d("/inspection"),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors border border-neutral-200 rounded-xl",children:e.jsx(P,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors",children:[e.jsx(L,{size:18}),"PDF ƒ∞ndir"]}),e.jsxs(R,{to:`/inspection/${t.id}/edit`,className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 text-white rounded-xl hover:bg-neutral-800 transition-colors",children:[e.jsx(B,{size:18}),"D√ºzenle"]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors",children:[e.jsx(S,{size:18}),"Sil"]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Durum"}),C(t.status)]}),e.jsx("div",{className:"h-12 w-px bg-neutral-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Kontrol Tipi"}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${t.inspectionType==="CHECKOUT"?"bg-neutral-100 text-neutral-800":"bg-purple-100 text-purple-800"}`,children:t.inspectionType==="CHECKOUT"?"Teslim Alƒ±≈ü":"Teslim Edi≈ü"})]}),e.jsx("div",{className:"h-12 w-px bg-neutral-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Genel Durum"}),t.overallCondition&&z(t.overallCondition)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-xl flex items-center justify-center",children:e.jsx(F,{size:20,className:"text-neutral-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Ekipman Bilgileri"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Kontrol edilen ekipman"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Ekipman Adƒ±"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:((o=t.equipment)==null?void 0:o.name)||"Bilinmiyor"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Seri Numarasƒ±"}),e.jsx("p",{className:"font-medium text-neutral-700",children:((m=t.equipment)==null?void 0:m.serialNumber)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Durum"}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${((h=t.equipment)==null?void 0:h.status)==="AVAILABLE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:((u=t.equipment)==null?void 0:u.status)||"Bilinmiyor"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(K,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"M√º≈üteri Bilgileri"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"ƒ∞lgili m√º≈üteri"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"M√º≈üteri Adƒ±"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:((p=t.customer)==null?void 0:p.name)||"Bilinmiyor"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Telefon"}),e.jsx("p",{className:"font-medium text-neutral-700",children:((j=t.customer)==null?void 0:j.phone)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"E-posta"}),e.jsx("p",{className:"font-medium text-neutral-700",children:((b=t.customer)==null?void 0:b.email)||"-"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(U,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Kontrol Eden"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Yetkili personel"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Ad Soyad"}),e.jsx("p",{className:"font-semibold text-neutral-900",children:((N=t.inspector)==null?void 0:N.name)||"Bilinmiyor"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"E-posta"}),e.jsx("p",{className:"font-medium text-neutral-700",children:((g=t.inspector)==null?void 0:g.email)||"-"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx($,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Konum & Tarih"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Detay bilgiler"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Konum"}),e.jsx("p",{className:"font-medium text-neutral-900",children:t.location||"Belirtilmemi≈ü"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Kontrol Tarihi"}),e.jsxs("div",{className:"flex items-center gap-2 text-neutral-900",children:[e.jsx(M,{size:16}),e.jsx("span",{className:"font-medium",children:new Date(t.inspectionDate).toLocaleDateString("tr-TR")})]})]})]})]})]}),n.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-xl flex items-center justify-center",children:e.jsx(q,{size:20,className:"text-neutral-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Kontrol Listesi"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[n.filter(s=>s.checked).length," / ",n.length," tamamlandƒ±"]})]})]}),e.jsx("div",{className:"space-y-2",children:n.map((s,a)=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${s.checked?"bg-green-50":"bg-neutral-50"}`,children:[e.jsx("div",{className:"mt-0.5",children:s.checked?e.jsx(f,{size:18,className:"text-green-600"}):e.jsx(i,{size:18,className:"text-neutral-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`text-sm font-medium ${s.checked?"text-green-900":"text-neutral-700"}`,children:[s.category," - ",s.label]}),s.notes&&e.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:s.notes})]})]},a))})]}),t.photos&&t.photos.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(G,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Fotoƒüraflar"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[t.photos.length," fotoƒüraf"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.photos.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.photoUrl,alt:s.caption||"Inspection photo",className:"w-full h-32 object-cover rounded-lg border border-neutral-200"}),s.caption&&e.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:s.caption})]},s.id))})]}),t.damageReports&&t.damageReports.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsx(i,{size:20,className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Hasar Raporlarƒ±"}),e.jsxs("p",{className:"text-sm text-red-700",children:[t.damageReports.length," hasar kaydƒ±"]})]})]}),e.jsx("div",{className:"space-y-4",children:t.damageReports.map(s=>e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-900",children:s.damageType}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium mt-1 ${s.severity==="MINOR"?"bg-yellow-100 text-yellow-800":s.severity==="MODERATE"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:s.severity})]}),s.estimatedCost&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-red-700",children:"Tahmini Maliyet"}),e.jsxs("p",{className:"font-bold text-red-900",children:["‚Ç∫",s.estimatedCost]})]})]}),e.jsx("p",{className:"text-sm text-red-800",children:s.description}),s.location&&e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["üìç ",s.location]})]},s.id))})]}),t.notes&&e.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-2",children:"Notlar"}),e.jsx("p",{className:"text-neutral-800",children:t.notes})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.customerSignature&&e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:"M√º≈üteri ƒ∞mzasƒ±"}),e.jsx("div",{className:"border border-neutral-200 rounded-lg p-4 bg-neutral-50",children:e.jsx("img",{src:t.customerSignature,alt:"Customer signature",className:"max-h-32 mx-auto"})})]}),t.inspectorSignature&&e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:"Kontrol Eden ƒ∞mzasƒ±"}),e.jsx("div",{className:"border border-neutral-200 rounded-lg p-4 bg-neutral-50",children:e.jsx("img",{src:t.inspectorSignature,alt:"Inspector signature",className:"max-h-32 mx-auto"})})]})]})]})}export{W as default};
