import{r as y,j as n,_ as C,x as se,w as xt,R as fn}from"./react-vendor-DBHNAGPW.js";import{n as je,q as Ce,y as gn,al as xn,F as Ge,t as K,C as xe,v as we,ag as In,aF as St,L as X,r as bn,aG as yn,h as nt,w as jn,ah as It,ab as Ae,z as Q,ad as Cn,M as wn,a2 as vn,af as fe,az as rt,aD as ge,aE as ue,aH as bt,f as Fe,Q as D,T as v,K as Ie,U as st,X as Se,aI as yt,P as $,V as Tn,R as N,O as J,aJ as jt}from"./index-C00KFl1S.js";import{u as Mn,n as En,j as Sn,k as Pn,l as kn,G as T,m as Rn,C as oe,o as Pe,b as Xe,p as q,q as G,i as Ye,h as He,c as Je,d as Qe,e as Ze,f as le,T as M,g as et,L as Ct,A as wt,D as vt,r as Dn,s as _e}from"./AdapterDateFns-Di3tMUlI.js";import{t as Tt}from"./tr-DhsOPUdB.js";import{t as Pt}from"./longFormatters-CHeuiwJ9.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";import"./ui-vendor-CIs_GH3f.js";function An(e){return je("PrivateSwitchBase",e)}Ce("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Fn=e=>{const{classes:t,checked:r,disabled:s,edge:i}=e,g={root:["root",r&&"checked",s&&"disabled",i&&`edge${xe(i)}`],input:["input"]};return we(g,An,t)},On=K(In,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Vn=K("input",{name:"MuiSwitchBase",shouldForwardProp:St})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Bn=y.forwardRef(function(t,r){const{autoFocus:s,checked:i,checkedIcon:g,defaultChecked:l,disabled:c,disableFocusRipple:m=!1,edge:h=!1,icon:o,id:a,inputProps:f,inputRef:I,name:p,onBlur:d,onChange:b,onFocus:x,readOnly:u,required:j=!1,tabIndex:E,type:w,value:S,slots:R={},slotProps:_={},...Y}=t,[L,ae]=gn({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),V=xn(),H=k=>{x&&x(k),V&&V.onFocus&&V.onFocus(k)},ee=k=>{d&&d(k),V&&V.onBlur&&V.onBlur(k)},ce=k=>{if(k.nativeEvent.defaultPrevented)return;const O=k.target.checked;ae(O),b&&b(k,O)};let U=c;V&&typeof U>"u"&&(U=V.disabled);const me=w==="checkbox"||w==="radio",te={...t,checked:L,disabled:U,disableFocusRipple:m,edge:h},F=Fn(te),A={slots:R,slotProps:{input:f,..._}},[ne,Le]=Ge("root",{ref:r,elementType:On,className:F.root,shouldForwardComponentProp:!0,externalForwardedProps:{...A,component:"span",...Y},getSlotProps:k=>({...k,onFocus:O=>{var z;(z=k.onFocus)==null||z.call(k,O),H(O)},onBlur:O=>{var z;(z=k.onBlur)==null||z.call(k,O),ee(O)}}),ownerState:te,additionalProps:{centerRipple:!0,focusRipple:!m,disabled:U,role:void 0,tabIndex:null}}),[ze,re]=Ge("input",{ref:I,elementType:Vn,className:F.input,externalForwardedProps:A,getSlotProps:k=>({...k,onChange:O=>{var z;(z=k.onChange)==null||z.call(k,O),ce(O)}}),ownerState:te,additionalProps:{autoFocus:s,checked:i,defaultChecked:l,disabled:U,id:me?a:void 0,name:p,readOnly:u,required:j,tabIndex:E,type:w,...w==="checkbox"&&S===void 0?{}:{value:S}}});return n.jsxs(ne,{...Le,children:[n.jsx(ze,{...re}),L?g:o]})}),Ln=X(n.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),zn=X(n.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),$n=X(n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Nn(e){return je("MuiCheckbox",e)}const Ue=Ce("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Kn=e=>{const{classes:t,indeterminate:r,color:s,size:i}=e,g={root:["root",r&&"indeterminate",`color${xe(s)}`,`size${xe(i)}`]},l=we(g,Nn,t);return{...t,...l}},_n=K(Bn,{shouldForwardProp:e=>St(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${xe(r.size)}`],r.color!=="default"&&t[`color${xe(r.color)}`]]}})(jn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(It()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(It()).map(([t])=>({props:{color:t},style:{[`&.${Ue.checked}, &.${Ue.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${Ue.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Un=n.jsx(zn,{}),Wn=n.jsx(Ln,{}),qn=n.jsx($n,{}),Gn=y.forwardRef(function(t,r){const s=bn({props:t,name:"MuiCheckbox"}),{checkedIcon:i=Un,color:g="primary",icon:l=Wn,indeterminate:c=!1,indeterminateIcon:m=qn,inputProps:h,size:o="medium",disableRipple:a=!1,className:f,slots:I={},slotProps:p={},...d}=s,b=c?m:l,x=c?m:i,u={...s,disableRipple:a,color:g,indeterminate:c,size:o},j=Kn(u),E=p.input??h,[w,S]=Ge("root",{ref:r,elementType:_n,className:nt(j.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:I,slotProps:p,...d},ownerState:u,additionalProps:{type:"checkbox",icon:y.cloneElement(b,{fontSize:b.props.fontSize??o}),checkedIcon:y.cloneElement(x,{fontSize:x.props.fontSize??o}),disableRipple:a,slots:I,slotProps:{input:yn(typeof E=="function"?E(u):E,{"data-indeterminate":c})}}});return n.jsx(w,{...S,classes:j})}),Xn=X(n.jsx("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"})),Yn=X(n.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),kt=X(n.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Hn=X(n.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function Jn(e,t){const r=Pt(e,t==null?void 0:t.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function Qn(e,t){const r=Pt(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function ot(e){return Mn}function Zn(e){return je("MuiTreeView",e)}Ce("MuiTreeView",["root"]);function er(e){return je("MuiSimpleTreeView",e)}Ce("MuiSimpleTreeView",["root"]);const tr=(e,t)=>{const r=y.useRef({}),[s,i]=y.useState(()=>{const l={};return e.forEach(c=>{c.models&&Object.entries(c.models).forEach(([m,h])=>{r.current[m]={isControlled:t[m]!==void 0,getDefaultValue:h.getDefaultValue},l[m]=h.getDefaultValue(t)})}),l});return Object.fromEntries(Object.entries(r.current).map(([l,c])=>{const m=t[l]??s[l];return[l,{value:m,setControlledValue:h=>{c.isControlled||i(o=>C({},o,{[l]:h}))}}]}))};class nr{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,r,s={}){let i=this.events[t];i||(i={highPriority:new Map,regular:new Map},this.events[t]=i),s.isFirst?i.highPriority.set(r,!0):i.regular.set(r,!0)}removeListener(t,r){this.events[t]&&(this.events[t].regular.delete(r),this.events[t].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(t,...r){const s=this.events[t];if(!s)return;const i=Array.from(s.highPriority.keys()),g=Array.from(s.regular.keys());for(let l=i.length-1;l>=0;l-=1){const c=i[l];s.highPriority.has(c)&&c.apply(this,r)}for(let l=0;l<g.length;l+=1){const c=g[l];s.regular.has(c)&&c.apply(this,r)}}once(t,r){const s=this;this.on(t,function i(...g){s.removeListener(t,i),r.apply(s,g)})}}const rr=e=>e.isPropagationStopped!==void 0,Rt=()=>{const[e]=y.useState(()=>new nr),t=y.useCallback((...s)=>{const[i,g,l={}]=s;l.defaultMuiPrevented=!1,!(rr(l)&&l.isPropagationStopped())&&e.emit(i,g,l)},[e]),r=y.useCallback((s,i)=>(e.on(s,i),()=>{e.removeListener(s,i)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:r}}};Rt.params={};const Dt=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};Dt.params={};let Mt=0;const sr=()=>(Mt+=1,`mui-tree-view-${Mt}`),Oe=({id:e,treeId:t="",itemId:r})=>e??`${t}-${r}`,lt=({params:e,state:t,setState:r})=>{y.useEffect(()=>{r(i=>i.id.treeId===e.id&&i.id.treeId!==void 0?i:C({},i,{id:C({},i.id,{treeId:e.id??sr()})}))},[r,e.id]);const s=e.id??t.id.treeId;return{getRootProps:()=>({id:s}),contextValue:{treeId:s}}};lt.params={id:!0};lt.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const or=[Rt,Dt,lt],lr=["slots","slotProps","apiRef","experimentalFeatures"],ir=e=>{let{props:{slots:t,slotProps:r,apiRef:s,experimentalFeatures:i},plugins:g}=e,l=se(e.props,lr);const c={};g.forEach(f=>{Object.assign(c,f.params)});const m={},h={};Object.keys(l).forEach(f=>{const I=l[f];c[f]?m[f]=I:h[f]=I});const o=i??{},a=g.reduce((f,I)=>I.getDefaultizedParams?I.getDefaultizedParams({params:f,experimentalFeatures:o}):f,m);return{apiRef:s,forwardedProps:h,pluginParams:a,slots:t??{},slotProps:r??{},experimentalFeatures:o}},ar=({plugins:e,instance:t,publicAPI:r,rootRef:s})=>({runItemPlugins:c=>{let m=null,h=null;const o=[],a={};e.forEach(p=>{if(!p.itemPlugin)return;const d=p.itemPlugin({props:c,rootRef:m,contentRef:h});d!=null&&d.rootRef&&(m=d.rootRef),d!=null&&d.contentRef&&(h=d.contentRef),d!=null&&d.propsEnhancers&&(o.push(d.propsEnhancers),Object.keys(d.propsEnhancers).forEach(b=>{a[b]=!0}))});const f=p=>d=>{const b={};return o.forEach(x=>{const u=x[p];u!=null&&Object.assign(b,u(d))}),b},I=Object.fromEntries(Object.keys(a).map(p=>[p,f(p)]));return{contentRef:h,rootRef:m,propsEnhancers:I}},wrapItem:({itemId:c,children:m})=>{let h=m;for(let o=e.length-1;o>=0;o-=1){const a=e[o];a.wrapItem&&(h=a.wrapItem({itemId:c,children:h,instance:t}))}return h},wrapRoot:({children:c})=>{let m=c;for(let h=e.length-1;h>=0;h-=1){const o=e[h];o.wrapRoot&&(m=o.wrapRoot({children:m,instance:t}))}return m},instance:t,rootRef:s,publicAPI:r});function cr(e){const t=y.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const dr=({plugins:e,rootRef:t,props:r})=>{const s=[...or,...e],{pluginParams:i,forwardedProps:g,apiRef:l,experimentalFeatures:c,slots:m,slotProps:h}=ir({plugins:s,props:r}),o=tr(s,i),f=y.useRef({}).current,I=cr(l),p=y.useRef(null),d=Ae(p,t),b=ar({plugins:s,instance:f,publicAPI:I,rootRef:p}),[x,u]=y.useState(()=>{const S={};return s.forEach(R=>{R.getInitialState&&Object.assign(S,R.getInitialState(i))}),S}),j=[],E=S=>{const R=S({instance:f,params:i,slots:m,slotProps:h,experimentalFeatures:c,state:x,setState:u,rootRef:p,models:o,plugins:s});R.getRootProps&&j.push(R.getRootProps),R.publicAPI&&Object.assign(I,R.publicAPI),R.instance&&Object.assign(f,R.instance),R.contextValue&&Object.assign(b,R.contextValue)};return s.forEach(E),{getRootProps:(S={})=>{const R=C({role:"tree"},g,S,{ref:d});return j.forEach(_=>{Object.assign(R,_(S))}),R},rootRef:d,contextValue:b,instance:f}},At=y.createContext(null);function ur(e){const{value:t,children:r}=e;return n.jsx(At.Provider,{value:t,children:t.wrapRoot({children:r,instance:t.instance})})}const pe=()=>{const e=y.useContext(At);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},Ft=(e,t,r)=>{e.$$publishEvent(t,r)},ie="__TREE_VIEW_ROOT_PARENT_ID__",Ot=e=>{const t={};return e.forEach((r,s)=>{t[r]=s}),t},be=y.createContext(()=>-1),pr=["children"],Vt=({items:e,isItemDisabled:t,getItemLabel:r,getItemId:s})=>{const i={},g={},l={[ie]:[]},c=(h,o,a)=>{var d,b;const f=s?s(h):h.id;if(f==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(h)].join(`
`));if(i[f]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${f}"`].join(`
`));const I=r?r(h):h.label;if(I==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(h)].join(`
`));i[f]={id:f,label:I,parentId:a,idAttribute:void 0,expandable:!!((d=h.children)!=null&&d.length),disabled:t?t(h):!1,depth:o},g[f]=h;const p=a??ie;l[p]||(l[p]=[]),l[p].push(f),(b=h.children)==null||b.forEach(x=>c(x,o+1,f))};e.forEach(h=>c(h,0,null));const m={};return Object.keys(l).forEach(h=>{m[h]=Ot(l[h])}),{itemMetaMap:i,itemMap:g,itemOrderedChildrenIds:l,itemChildrenIndexes:m}},ve=({instance:e,params:t,state:r,setState:s,experimentalFeatures:i})=>{const g=y.useCallback(x=>r.items.itemMetaMap[x],[r.items.itemMetaMap]),l=y.useCallback(x=>r.items.itemMap[x],[r.items.itemMap]),c=y.useCallback(()=>{const x=u=>{const j=r.items.itemMap[u],E=se(j,pr),w=r.items.itemOrderedChildrenIds[u];return w&&(E.children=w.map(x)),E};return r.items.itemOrderedChildrenIds[ie].map(x)},[r.items.itemMap,r.items.itemOrderedChildrenIds]),m=y.useCallback(x=>{if(x==null)return!1;let u=e.getItemMeta(x);if(!u)return!1;if(u.disabled)return!0;for(;u.parentId!=null;)if(u=e.getItemMeta(u.parentId),u.disabled)return!0;return!1},[e]),h=y.useCallback(x=>{const u=e.getItemMeta(x).parentId??ie;return r.items.itemChildrenIndexes[u][x]},[e,r.items.itemChildrenIndexes]),o=y.useCallback(x=>r.items.itemOrderedChildrenIds[x??ie]??[],[r.items.itemOrderedChildrenIds]),a=x=>{const u=e.getItemMeta(x);return u==null?null:document.getElementById(Oe({treeId:r.id.treeId,itemId:x,id:u.idAttribute}))},f=x=>t.disabledItemsFocusable?!0:!e.isItemDisabled(x),I=y.useRef(!1),p=y.useCallback(()=>{I.current=!0},[]),d=y.useCallback(()=>I.current,[]);return y.useEffect(()=>{e.areItemUpdatesPrevented()||s(x=>{const u=Vt({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(x.items.itemMetaMap).forEach(j=>{u.itemMetaMap[j.id]||Ft(e,"removeItem",{id:j.id})}),C({},x,{items:u})})},[e,s,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:l,getItemDOMElement:a,getItemTree:c,getItemOrderedChildrenIds:o},instance:{getItemMeta:g,getItem:l,getItemTree:c,getItemsToRender:()=>{const x=u=>{var E;const j=r.items.itemMetaMap[u];return{label:j.label,itemId:j.id,id:j.idAttribute,children:(E=r.items.itemOrderedChildrenIds[u])==null?void 0:E.map(x)}};return r.items.itemOrderedChildrenIds[ie].map(x)},getItemIndex:h,getItemDOMElement:a,getItemOrderedChildrenIds:o,isItemDisabled:m,isItemNavigable:f,preventItemUpdates:p,areItemUpdatesPrevented:d},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:i.indentationAtItemLevel??!1}}}};ve.getInitialState=e=>({items:Vt({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});ve.getDefaultizedParams=({params:e})=>C({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});ve.wrapRoot=({children:e,instance:t})=>n.jsx(be.Provider,{value:r=>{var s;return((s=t.getItemMeta(r))==null?void 0:s.depth)??0},children:e});ve.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const Ve=({instance:e,params:t,models:r})=>{const s=y.useMemo(()=>{const a=new Map;return r.expandedItems.value.forEach(f=>{a.set(f,!0)}),a},[r.expandedItems.value]),i=(a,f)=>{var I;(I=t.onExpandedItemsChange)==null||I.call(t,a,f),r.expandedItems.setControlledValue(f)},g=y.useCallback(a=>s.has(a),[s]),l=y.useCallback(a=>{var f;return!!((f=e.getItemMeta(a))!=null&&f.expandable)},[e]),c=Q((a,f)=>{const I=e.isItemExpanded(f);e.setItemExpansion(a,f,!I)}),m=Q((a,f,I)=>{if(e.isItemExpanded(f)===I)return;let d;I?d=[f].concat(r.expandedItems.value):d=r.expandedItems.value.filter(b=>b!==f),t.onItemExpansionToggle&&t.onItemExpansionToggle(a,f,I),i(a,d)}),h=(a,f)=>{const I=e.getItemMeta(f),d=e.getItemOrderedChildrenIds(I.parentId).filter(x=>e.isItemExpandable(x)&&!e.isItemExpanded(x)),b=r.expandedItems.value.concat(d);d.length>0&&(t.onItemExpansionToggle&&d.forEach(x=>{t.onItemExpansionToggle(a,x,!0)}),i(a,b))},o=y.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:m},instance:{isItemExpanded:g,isItemExpandable:l,setItemExpansion:m,toggleItemExpansion:c,expandAllSiblings:h},contextValue:{expansion:{expansionTrigger:o}}}};Ve.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const mr=[];Ve.getDefaultizedParams=({params:e})=>C({},e,{defaultExpandedItems:e.defaultExpandedItems??mr});Ve.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Bt=(e,t)=>{let r=t.length-1;for(;r>=0&&!e.isItemNavigable(t[r]);)r-=1;if(r!==-1)return t[r]},Lt=(e,t)=>{const r=e.getItemMeta(t),s=e.getItemOrderedChildrenIds(r.parentId),i=e.getItemIndex(t);if(i===0)return r.parentId;let g=i-1;for(;!e.isItemNavigable(s[g])&&g>=0;)g-=1;if(g===-1)return r.parentId==null?null:Lt(e,r.parentId);let l=s[g],c=Bt(e,e.getItemOrderedChildrenIds(l));for(;e.isItemExpanded(l)&&c!=null;)l=c,c=e.getItemOrderedChildrenIds(l).find(e.isItemNavigable);return l},ke=(e,t)=>{if(e.isItemExpanded(t)){const s=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(s!=null)return s}let r=e.getItemMeta(t);for(;r!=null;){const s=e.getItemOrderedChildrenIds(r.parentId),i=e.getItemIndex(r.id);if(i<s.length-1){let g=i+1;for(;!e.isItemNavigable(s[g])&&g<s.length-1;)g+=1;if(e.isItemNavigable(s[g]))return s[g]}r=e.getItemMeta(r.parentId)}return null},zt=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const r=e.getItemOrderedChildrenIds(t),s=Bt(e,r);if(s==null)return t;t=s}return t},ye=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),$t=(e,t,r)=>{if(t===r)return[t,r];const s=e.getItemMeta(t),i=e.getItemMeta(r);if(s.parentId===i.id||i.parentId===s.id)return i.parentId===s.id?[s.id,i.id]:[i.id,s.id];const g=[s.id],l=[i.id];let c=s.parentId,m=i.parentId,h=l.indexOf(c)!==-1,o=g.indexOf(m)!==-1,a=!0,f=!0;for(;!o&&!h;)a&&(g.push(c),h=l.indexOf(c)!==-1,a=c!==null,!h&&a&&(c=e.getItemMeta(c).parentId)),f&&!h&&(l.push(m),o=g.indexOf(m)!==-1,f=m!==null,!o&&f&&(m=e.getItemMeta(m).parentId));const I=h?c:m,p=e.getItemOrderedChildrenIds(I),d=g[g.indexOf(I)-1],b=l[l.indexOf(I)-1];return p.indexOf(d)<p.indexOf(b)?[t,r]:[r,t]},hr=(e,t,r)=>{const s=m=>{if(e.isItemExpandable(m)&&e.isItemExpanded(m))return e.getItemOrderedChildrenIds(m)[0];let h=e.getItemMeta(m);for(;h!=null;){const o=e.getItemOrderedChildrenIds(h.parentId),a=e.getItemIndex(h.id);if(a<o.length-1)return o[a+1];h=e.getItemMeta(h.parentId)}throw new Error("Invalid range")},[i,g]=$t(e,t,r),l=[i];let c=i;for(;c!==g;)c=s(c),e.isItemDisabled(c)||l.push(c);return l},fr=e=>{let t=ye(e);const r=[];for(;t!=null;)r.push(t),t=ke(e,t);return r},tt=(e,t)=>t!==e.closest('*[role="treeitem"]'),Re=e=>Array.isArray(e)?e:e!=null?[e]:[],We=e=>{const t={};return e.forEach(r=>{t[r]=!0}),t},Be=({instance:e,params:t,models:r})=>{const s=y.useRef(null),i=y.useRef({}),g=y.useMemo(()=>{const d=new Map;return Array.isArray(r.selectedItems.value)?r.selectedItems.value.forEach(b=>{d.set(b,!0)}):r.selectedItems.value!=null&&d.set(r.selectedItems.value,!0),d},[r.selectedItems.value]),l=(d,b)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const x=b.filter(j=>!e.isItemSelected(j)),u=r.selectedItems.value.filter(j=>!b.includes(j));x.forEach(j=>{t.onItemSelectionToggle(d,j,!0)}),u.forEach(j=>{t.onItemSelectionToggle(d,j,!1)})}else b!==r.selectedItems.value&&(r.selectedItems.value!=null&&t.onItemSelectionToggle(d,r.selectedItems.value,!1),b!=null&&t.onItemSelectionToggle(d,b,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(d,b),r.selectedItems.setControlledValue(b)},c=d=>g.has(d),m=({event:d,itemId:b,keepExistingSelection:x=!1,shouldBeSelected:u})=>{if(t.disableSelection)return;let j;if(x){const E=Re(r.selectedItems.value),w=e.isItemSelected(b);w&&(u===!1||u==null)?j=E.filter(S=>S!==b):!w&&(u===!0||u==null)?j=[b].concat(E):j=E}else u===!1||u==null&&e.isItemSelected(b)?j=t.multiSelect?[]:null:j=t.multiSelect?[b]:b;l(d,j),s.current=b,i.current={}},h=(d,[b,x])=>{if(t.disableSelection||!t.multiSelect)return;let u=Re(r.selectedItems.value).slice();Object.keys(i.current).length>0&&(u=u.filter(S=>!i.current[S]));const j=We(u),E=hr(e,b,x),w=E.filter(S=>!j[S]);u=u.concat(w),l(d,u),i.current=We(E)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:m},instance:{isItemSelected:c,selectItem:m,selectAllNavigableItems:d=>{if(t.disableSelection||!t.multiSelect)return;const b=fr(e);l(d,b),i.current=We(b)},expandSelectionRange:(d,b)=>{if(s.current!=null){const[x,u]=$t(e,b,s.current);h(d,[x,u])}},selectRangeFromStartToItem:(d,b)=>{h(d,[ye(e),b])},selectRangeFromItemToEnd:(d,b)=>{h(d,[b,zt(e)])},selectItemFromArrowNavigation:(d,b,x)=>{if(t.disableSelection||!t.multiSelect)return;let u=Re(r.selectedItems.value).slice();Object.keys(i.current).length===0?(u.push(x),i.current={[b]:!0,[x]:!0}):(i.current[b]||(i.current={}),i.current[x]?(u=u.filter(j=>j!==b),delete i.current[b]):(u.push(x),i.current[x]=!0)),l(d,u)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};Be.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const gr=[];Be.getDefaultizedParams=({params:e})=>C({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?gr:null)});Be.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Et=1e3;class xr{constructor(t=Et){this.timeouts=new Map,this.cleanupTimeout=Et,this.cleanupTimeout=t}register(t,r,s){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(s.cleanupToken)},this.cleanupTimeout);this.timeouts.set(s.cleanupToken,i)}unregister(t){const r=this.timeouts.get(t.cleanupToken);r&&(this.timeouts.delete(t.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((t,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class Ir{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,r,s){this.registry.register(t,r,s)}unregister(t){this.registry.unregister(t)}reset(){}}class br{}function yr(e){let t=0;return function(s,i,g){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Ir:new xr);const[l]=y.useState(new br),c=y.useRef(null),m=y.useRef(void 0);m.current=g;const h=y.useRef(null);if(!c.current&&m.current){const o=(a,f)=>{var I;f.defaultMuiPrevented||(I=m.current)==null||I.call(m,a,f)};c.current=s.$$subscribeEvent(i,o),t+=1,h.current={cleanupToken:t},e.registry.register(l,()=>{var a;(a=c.current)==null||a.call(c),c.current=null,h.current=null},h.current)}else!m.current&&c.current&&(c.current(),c.current=null,h.current&&(e.registry.unregister(h.current),h.current=null));y.useEffect(()=>{if(!c.current&&m.current){const o=(a,f)=>{var I;f.defaultMuiPrevented||(I=m.current)==null||I.call(m,a,f)};c.current=s.$$subscribeEvent(i,o)}return h.current&&e.registry&&(e.registry.unregister(h.current),h.current=null),()=>{var o;(o=c.current)==null||o.call(c),c.current=null}},[s,i])}}const jr={registry:null},Cr=yr(jr),Nt=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Nt(t.shadowRoot):t:null};function wr(e){return e.replace(/["\\]/g,"\\$&")}const vr=(e,t)=>{let r=Re(t).find(s=>{if(!e.isItemNavigable(s))return!1;const i=e.getItemMeta(s);return i&&(i.parentId==null||e.isItemExpanded(i.parentId))});return r==null&&(r=ye(e)),r},it=({instance:e,params:t,state:r,setState:s,models:i,rootRef:g})=>{const l=vr(e,i.selectedItems.value),c=Q(b=>{const x=typeof b=="function"?b(r.focusedItemId):b;r.focusedItemId!==x&&s(u=>C({},u,{focusedItemId:x}))}),m=y.useCallback(()=>!!g.current&&g.current.contains(Nt(Cn(g.current))),[g]),h=y.useCallback(b=>r.focusedItemId===b&&m(),[r.focusedItemId,m]),o=b=>{const x=e.getItemMeta(b);return x&&(x.parentId==null||e.isItemExpanded(x.parentId))},a=(b,x)=>{const u=e.getItemDOMElement(x);u&&u.focus(),c(x),t.onItemFocus&&t.onItemFocus(b,x)},f=Q((b,x)=>{o(x)&&a(b,x)}),I=Q(()=>{if(r.focusedItemId==null)return;if(e.getItemMeta(r.focusedItemId)){const x=e.getItemDOMElement(r.focusedItemId);x&&x.blur()}c(null)}),p=b=>b===l;Cr(e,"removeItem",({id:b})=>{r.focusedItemId===b&&a(null,l)});const d=b=>x=>{var u;(u=b.onFocus)==null||u.call(b,x),!x.defaultMuiPrevented&&x.target===x.currentTarget&&a(x,l)};return{getRootProps:b=>({onFocus:d(b)}),publicAPI:{focusItem:f},instance:{isItemFocused:h,canItemBeTabbed:p,focusItem:f,removeFocusedItem:I}}};it.getInitialState=()=>({focusedItemId:null});it.params={onItemFocus:!0};const De=(e,t)=>e.getAvailablePlugins().has(t),Tr=({props:e})=>{const{instance:t}=pe(),{label:r,itemId:s}=e,[i,g]=y.useState(r),l=t.isItemBeingEdited(s);return y.useEffect(()=>{l||g(r)},[l,r]),{propsEnhancers:{labelInput:({externalEventHandlers:c,interactions:m})=>t.isItemEditable(s)?{value:i??"","data-element":"labelInput",onChange:I=>{var p;(p=c.onChange)==null||p.call(c,I),g(I.target.value)},onKeyDown:I=>{var d;if((d=c.onKeyDown)==null||d.call(c,I),I.defaultMuiPrevented)return;const p=I.target;I.key==="Enter"&&p.value?m.handleSaveItemLabel(I,p.value):I.key==="Escape"&&m.handleCancelItemLabelEditing(I)},onBlur:I=>{var p;(p=c.onBlur)==null||p.call(c,I),!I.defaultMuiPrevented&&I.target.value&&m.handleSaveItemLabel(I,I.target.value)},autoFocus:!0,type:"text"}:{}}}},Z=({instance:e,state:t,setState:r,params:s})=>{const i=y.useRef(t.editedItemId),g=a=>i.current===a,l=a=>{r(f=>C({},f,{editedItemId:a})),i.current=a},c=a=>a===t.editedItemId,m=!!s.isItemEditable,h=a=>{if(a==null||!m)return!1;const f=e.getItem(a);return f?typeof s.isItemEditable=="function"?s.isItemEditable(f):!!s.isItemEditable:!1},o=(a,f)=>{if(!f)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",a].join(`
`));r(I=>{const p=I.items.itemMetaMap[a];return p.label!==f?C({},I,{items:C({},I.items,{itemMetaMap:C({},I.items.itemMetaMap,{[a]:C({},p,{label:f})})})}):I}),s.onItemLabelChange&&s.onItemLabelChange(a,f)};return{instance:{setEditedItemId:l,isItemBeingEdited:c,updateItemLabel:o,isItemEditable:h,isTreeViewEditable:m,isItemBeingEditedRef:g},publicAPI:{updateItemLabel:o}}};Z.itemPlugin=Tr;Z.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const r=t==null?void 0:t.labelEditing;return C({},e,{isItemEditable:r?e.isItemEditable??!1:!1})};Z.getInitialState=()=>({editedItemId:null});Z.params={onItemLabelChange:!0,isItemEditable:!0};function Mr(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Kt=({instance:e,params:t,state:r})=>{const s=wn(),i=y.useRef({}),g=Q(o=>{i.current=o(i.current)});y.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const o={},a=f=>{o[f.id]=f.label.substring(0,1).toLowerCase()};Object.values(r.items.itemMetaMap).forEach(a),i.current=o},[r.items.itemMetaMap,t.getItemId,e]);const l=(o,a)=>{const f=a.toLowerCase(),I=x=>{const u=ke(e,x);return u===null?ye(e):u};let p=null,d=I(o);const b={};for(;p==null&&!b[d];)i.current[d]===f?p=d:(b[d]=!0,d=I(d));return p},c=o=>!t.disableSelection&&!e.isItemDisabled(o),m=o=>!e.isItemDisabled(o)&&e.isItemExpandable(o);return{instance:{updateFirstCharMap:g,handleItemKeyDown:(o,a)=>{if(o.defaultMuiPrevented||o.altKey||tt(o.target,o.currentTarget))return;const f=o.ctrlKey||o.metaKey,I=o.key;switch(!0){case(I===" "&&c(a)):{o.preventDefault(),t.multiSelect&&o.shiftKey?e.expandSelectionRange(o,a):e.selectItem({event:o,itemId:a,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case I==="Enter":{De(e,Z)&&e.isItemEditable(a)&&!e.isItemBeingEdited(a)?e.setEditedItemId(a):m(a)?(e.toggleItemExpansion(o,a),o.preventDefault()):c(a)&&(t.multiSelect?(o.preventDefault(),e.selectItem({event:o,itemId:a,keepExistingSelection:!0})):e.isItemSelected(a)||(e.selectItem({event:o,itemId:a}),o.preventDefault()));break}case I==="ArrowDown":{const p=ke(e,a);p&&(o.preventDefault(),e.focusItem(o,p),t.multiSelect&&o.shiftKey&&c(p)&&e.selectItemFromArrowNavigation(o,a,p));break}case I==="ArrowUp":{const p=Lt(e,a);p&&(o.preventDefault(),e.focusItem(o,p),t.multiSelect&&o.shiftKey&&c(p)&&e.selectItemFromArrowNavigation(o,a,p));break}case(I==="ArrowRight"&&!s||I==="ArrowLeft"&&s):{if(f)return;if(e.isItemExpanded(a)){const p=ke(e,a);p&&(e.focusItem(o,p),o.preventDefault())}else m(a)&&(e.toggleItemExpansion(o,a),o.preventDefault());break}case(I==="ArrowLeft"&&!s||I==="ArrowRight"&&s):{if(f)return;if(m(a)&&e.isItemExpanded(a))e.toggleItemExpansion(o,a),o.preventDefault();else{const p=e.getItemMeta(a).parentId;p&&(e.focusItem(o,p),o.preventDefault())}break}case I==="Home":{c(a)&&t.multiSelect&&f&&o.shiftKey?e.selectRangeFromStartToItem(o,a):e.focusItem(o,ye(e)),o.preventDefault();break}case I==="End":{c(a)&&t.multiSelect&&f&&o.shiftKey?e.selectRangeFromItemToEnd(o,a):e.focusItem(o,zt(e)),o.preventDefault();break}case I==="*":{e.expandAllSiblings(o,a),o.preventDefault();break}case(String.fromCharCode(o.keyCode)==="A"&&f&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(o),o.preventDefault();break}case(!f&&!o.shiftKey&&Mr(I)):{const p=l(a,I);p!=null&&(e.focusItem(o,p),o.preventDefault());break}}}}}};Kt.params={};const _t=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});_t.params={};const Ut=y.createContext(null);function Wt(e){const{children:t,itemId:r=null}=e,{instance:s,treeId:i,rootRef:g}=pe(),l=y.useRef(new Map);y.useEffect(()=>{if(!g.current)return;let m=null;if(r==null)m=g.current.id;else{const p=s.getItemMeta(r);p!==void 0&&(m=Oe({itemId:r,treeId:i,id:p.idAttribute}))}if(m==null)return;const h=s.getItemOrderedChildrenIds(r??null)??[],o=wr(m),a=g.current.querySelectorAll(`${r==null?"":`*[id="${o}"] `}[role="treeitem"]:not(*[id="${o}"] [role="treeitem"] [role="treeitem"])`),f=Array.from(a).map(p=>l.current.get(p.id));(f.length!==h.length||f.some((p,d)=>p!==h[d]))&&s.setJSXItemsOrderedChildrenIds(r??null,f)});const c=y.useMemo(()=>({registerChild:(m,h)=>l.current.set(m,h),unregisterChild:m=>l.current.delete(m),parentId:r}),[r]);return n.jsx(Ut.Provider,{value:c,children:t})}const Te=({instance:e,setState:t})=>{e.preventItemUpdates();const r=Q(g=>(t(l=>{if(l.items.itemMetaMap[g.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${g.id}"`].join(`
`));return C({},l,{items:C({},l.items,{itemMetaMap:C({},l.items.itemMetaMap,{[g.id]:g}),itemMap:C({},l.items.itemMap,{[g.id]:{id:g.id,label:g.label}})})})}),()=>{t(l=>{const c=C({},l.items.itemMetaMap),m=C({},l.items.itemMap);return delete c[g.id],delete m[g.id],C({},l,{items:C({},l.items,{itemMetaMap:c,itemMap:m})})}),Ft(e,"removeItem",{id:g.id})})),s=(g,l)=>{const c=g??ie;t(m=>C({},m,{items:C({},m.items,{itemOrderedChildrenIds:C({},m.items.itemOrderedChildrenIds,{[c]:l}),itemChildrenIndexes:C({},m.items.itemChildrenIndexes,{[c]:Ot(l)})})}))},i=Q((g,l)=>(e.updateFirstCharMap(c=>(c[g]=l,c)),()=>{e.updateFirstCharMap(c=>{const m=C({},c);return delete m[g],m})}));return{instance:{insertJSXItem:r,setJSXItemsOrderedChildrenIds:s,mapFirstCharFromJSX:i}}},qt=e=>Array.isArray(e)?e.length>0&&e.some(qt):!!e,Er=({props:e,rootRef:t,contentRef:r})=>{const{instance:s,treeId:i}=pe(),{children:g,disabled:l=!1,label:c,itemId:m,id:h}=e,o=y.useContext(Ut);if(o==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:a,unregisterChild:f,parentId:I}=o,p=qt(g),d=y.useRef(null),b=Ae(d,r);return vn(()=>{const x=Oe({itemId:m,treeId:i,id:h});return a(x,m),()=>{f(x)}},[a,f,m,h,i]),y.useEffect(()=>s.insertJSXItem({id:m,idAttribute:h,parentId:I,expandable:p,disabled:l}),[s,I,m,p,l,h]),y.useEffect(()=>{var x;if(c)return s.mapFirstCharFromJSX(m,(((x=d.current)==null?void 0:x.textContent)??"").substring(0,1).toLowerCase())},[s,m,c]),{contentRef:b,rootRef:t}};Te.itemPlugin=Er;Te.wrapItem=({children:e,itemId:t})=>{const r=y.useContext(be);return n.jsx(Wt,{itemId:t,children:n.jsx(be.Provider,{value:r+1,children:e})})};Te.wrapRoot=({children:e})=>n.jsx(Wt,{children:n.jsx(be.Provider,{value:0,children:e})});Te.params={};const Sr=[ve,Ve,Be,it,Kt,_t,Te],Pr=ot(),kr=e=>{const{classes:t}=e;return we({root:["root"]},er,t)},Gt=K("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),Rr=[],Dr=y.forwardRef(function(t,r){const s=Pr({props:t,name:"MuiSimpleTreeView"}),i=s,{getRootProps:g,contextValue:l}=dr({plugins:Sr,rootRef:r,props:C({},s,{items:Rr})}),{slots:c,slotProps:m}=s,h=kr(s),o=(c==null?void 0:c.root)??Gt,a=fe({elementType:o,externalSlotProps:m==null?void 0:m.root,className:h.root,getSlotProps:g,ownerState:i});return n.jsx(ur,{value:l,children:n.jsx(o,C({},a))})}),Ar=ot(),Fr=e=>{const{classes:t}=e;return we({root:["root"]},Zn,t)},Or=K(Gt,{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Vr=y.forwardRef(function(t,r){const s=Ar({props:t,name:"MuiTreeView"}),i=Fr(s);return n.jsx(Dr,C({},s,{ref:r,classes:i,slots:C({root:Or},s.slots)}))});function Xt(e){const{instance:t,items:{onItemClick:r},selection:{multiSelect:s,checkboxSelection:i,disableSelection:g},expansion:{expansionTrigger:l}}=pe(),c=t.isItemExpandable(e),m=t.isItemExpanded(e),h=t.isItemFocused(e),o=t.isItemSelected(e),a=t.isItemDisabled(e),f=t!=null&&t.isItemBeingEdited?t==null?void 0:t.isItemBeingEdited(e):!1,I=t.isItemEditable?t.isItemEditable(e):!1,p=w=>{if(!a){h||t.focusItem(w,e);const S=s&&(w.shiftKey||w.ctrlKey||w.metaKey);c&&!(S&&t.isItemExpanded(e))&&t.toggleItemExpansion(w,e)}},d=w=>{a||(!h&&!f&&t.focusItem(w,e),s&&(w.shiftKey||w.ctrlKey||w.metaKey)?w.shiftKey?t.expandSelectionRange(w,e):t.selectItem({event:w,itemId:e,keepExistingSelection:!0}):t.selectItem({event:w,itemId:e,shouldBeSelected:!0}))},b=w=>{if(g||a)return;const S=w.nativeEvent.shiftKey;s&&S?t.expandSelectionRange(w,e):t.selectItem({event:w,itemId:e,keepExistingSelection:s,shouldBeSelected:w.target.checked})},x=w=>{(w.shiftKey||w.ctrlKey||w.metaKey||a)&&w.preventDefault()},u=()=>{De(t,Z)&&t.isItemEditable(e)&&(t.isItemBeingEdited(e)?t.setEditedItemId(null):t.setEditedItemId(e))};return{disabled:a,expanded:m,selected:o,focused:h,editable:I,editing:f,disableSelection:g,checkboxSelection:i,handleExpansion:p,handleSelection:d,handleCheckboxSelection:b,handleContentClick:r,preventSelection:x,expansionTrigger:l,toggleItemEditing:u,handleSaveItemLabel:(w,S)=>{De(t,Z)&&t.isItemBeingEditedRef(e)&&(t.updateItemLabel(e,S),u(),t.focusItem(w,e))},handleCancelItemLabelEditing:w=>{De(t,Z)&&t.isItemBeingEditedRef(e)&&(u(),t.focusItem(w,e))}}}const Br=K("div",{name:"MuiTreeItem2DragAndDropOverlay",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>rt(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:ge(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function Lr(e){return e.action==null?null:n.jsx(Br,C({},e))}const zr=K("input",{name:"MuiTreeItem2",slot:"LabelInput",overridesResolver:(e,t)=>t.labelInput})(({theme:e})=>C({},e.typography.body1,{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${e.palette.primary.main}`}})),$r=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown","dragAndDropOverlayProps","labelInputProps"],Yt=y.forwardRef(function(t,r){const{classes:s,className:i,displayIcon:g,expansionIcon:l,icon:c,label:m,itemId:h,onClick:o,onMouseDown:a,dragAndDropOverlayProps:f,labelInputProps:I}=t,p=se(t,$r),{disabled:d,expanded:b,selected:x,focused:u,editing:j,editable:E,disableSelection:w,checkboxSelection:S,handleExpansion:R,handleSelection:_,handleCheckboxSelection:Y,handleContentClick:L,preventSelection:ae,expansionTrigger:V,toggleItemEditing:H}=Xt(h),ee=c||l||g,ce=y.useRef(null),U=A=>{ae(A),a&&a(A)},me=A=>{var ne;L==null||L(A,h),!((ne=ce.current)!=null&&ne.contains(A.target))&&(V==="content"&&R(A),S||_(A),o&&o(A))},te=l!=null&&ee===l&&V==="iconContainer"?A=>{l!=null&&ee===l&&V==="iconContainer"&&R(A)}:void 0,F=A=>{A.defaultMuiPrevented||H()};return n.jsxs("div",C({},p,{className:nt(s.root,i,b&&s.expanded,x&&s.selected,u&&s.focused,d&&s.disabled,j&&s.editing,E&&s.editable),onClick:me,onMouseDown:U,ref:r,children:[n.jsx("div",{className:s.iconContainer,onClick:te,children:ee}),S&&n.jsx(Gn,{className:s.checkbox,checked:x,onChange:Y,disabled:d||w,ref:ce,tabIndex:-1}),j?n.jsx(zr,C({},I,{className:s.labelInput})):n.jsx("div",C({className:s.label},E&&{onDoubleClick:F},{children:m})),f&&n.jsx(Lr,C({},f))]}))});function Nr(e){return je("MuiTreeItem",e)}const W=Ce("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox","labelInput","editable","editing","dragAndDropOverlay"]),Kr=X(n.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),_r=X(n.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function Ht(e){const{children:t,itemId:r}=e,{wrapItem:s,instance:i}=pe();return s({children:t,itemId:r,instance:i})}Ht.propTypes={children:xt.node,itemId:xt.string.isRequired};const Ur=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],Wr=["ownerState"],qr=["ownerState"],Gr=["ownerState"],Xr=ot(),Yr=e=>{const{classes:t}=e;return we({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],labelInput:["labelInput"],editing:["editing"],editable:["editable"],groupTransition:["groupTransition"]},Nr,t)},Hr=K("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Jr=K(Yt,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${W.iconContainer}`]:t.iconContainer},t.label&&{[`& .${W.label}`]:t.label}],shouldForwardProp:e=>rt(e)&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${W.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${W.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${W.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ge(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ge(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ge(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${W.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ge(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${W.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${W.label}`]:C({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1),[`& .${W.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),Qr=K(En,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>rt(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),Zr=y.forwardRef(function(t,r){var ut,pt,mt,ht;const{icons:s,runItemPlugins:i,items:{disabledItemsFocusable:g,indentationAtItemLevel:l},selection:{disableSelection:c},treeId:m,instance:h}=pe(),o=y.useContext(be),a=Xr({props:t,name:"MuiTreeItem"}),{children:f,className:I,slots:p,slotProps:d,ContentComponent:b=Yt,ContentProps:x,itemId:u,id:j,label:E,onClick:w,onMouseDown:S,onBlur:R,onKeyDown:_}=a,Y=se(a,Ur),{expanded:L,focused:ae,selected:V,disabled:H,editing:ee,handleCancelItemLabelEditing:ce,handleSaveItemLabel:U}=Xt(u),{contentRef:me,rootRef:te,propsEnhancers:F}=i(a),A=y.useRef(null),ne=y.useRef(null),Le=Ae(r,te,A),ze=Ae(x==null?void 0:x.ref,me,ne),re={expandIcon:(p==null?void 0:p.expandIcon)??s.slots.expandIcon??Kr,collapseIcon:(p==null?void 0:p.collapseIcon)??s.slots.collapseIcon??_r,endIcon:(p==null?void 0:p.endIcon)??s.slots.endIcon,icon:p==null?void 0:p.icon,groupTransition:p==null?void 0:p.groupTransition},k=P=>Array.isArray(P)?P.length>0&&P.some(k):!!P,O=k(f),z=C({},a,{expanded:L,focused:ae,selected:V,disabled:H,indentationAtItemLevel:l}),B=Yr(z),at=re.groupTransition??void 0,Jt=fe({elementType:at,ownerState:{},externalSlotProps:d==null?void 0:d.groupTransition,additionalProps:C({unmountOnExit:!0,in:L,component:"ul",role:"group"},l?{indentationAtItemLevel:!0}:{}),className:B.groupTransition}),$e=L?re.collapseIcon:re.expandIcon,Qt=fe({elementType:$e,ownerState:{},externalSlotProps:P=>L?C({},ue(s.slotProps.collapseIcon,P),ue(d==null?void 0:d.collapseIcon,P)):C({},ue(s.slotProps.expandIcon,P),ue(d==null?void 0:d.expandIcon,P))}),Zt=se(Qt,Wr),en=O&&$e?n.jsx($e,C({},Zt)):null,Ne=O?void 0:re.endIcon,tn=fe({elementType:Ne,ownerState:{},externalSlotProps:P=>O?{}:C({},ue(s.slotProps.endIcon,P),ue(d==null?void 0:d.endIcon,P))}),nn=se(tn,qr),rn=Ne?n.jsx(Ne,C({},nn)):null,Ke=re.icon,sn=fe({elementType:Ke,ownerState:{},externalSlotProps:d==null?void 0:d.icon}),on=se(sn,Gr),ln=Ke?n.jsx(Ke,C({},on)):null;let Me;V?Me=!0:c||H?Me=void 0:Me=!1;function an(P){!ae&&(!H||g)&&P.currentTarget===P.target&&h.focusItem(P,u)}function cn(P){var de,he,ft,gt;R==null||R(P),!(ee||P.relatedTarget&&tt(P.relatedTarget,A.current)&&(P.target&&((he=(de=P.target)==null?void 0:de.dataset)==null?void 0:he.element)==="labelInput"&&tt(P.target,A.current)||((gt=(ft=P.relatedTarget)==null?void 0:ft.dataset)==null?void 0:gt.element)==="labelInput"))&&h.removeFocusedItem()}const dn=P=>{var de,he;_==null||_(P),((he=(de=P.target)==null?void 0:de.dataset)==null?void 0:he.element)!=="labelInput"&&h.handleItemKeyDown(P,u)},un=Oe({itemId:u,treeId:m,id:j}),pn=h.canItemBeTabbed(u)?0:-1,Ee={rootRefObject:A,contentRefObject:ne,interactions:{handleSaveItemLabel:U,handleCancelItemLabelEditing:ce}},mn=((ut=F.root)==null?void 0:ut.call(F,C({},Ee,{externalEventHandlers:bt(Y)})))??{},hn=((pt=F.content)==null?void 0:pt.call(F,C({},Ee,{externalEventHandlers:bt(x)})))??{},ct=((mt=F.dragAndDropOverlay)==null?void 0:mt.call(F,C({},Ee,{externalEventHandlers:{}})))??{},dt=((ht=F.labelInput)==null?void 0:ht.call(F,C({},Ee,{externalEventHandlers:{}})))??{};return n.jsx(Ht,{itemId:u,children:n.jsxs(Hr,C({className:nt(B.root,I),role:"treeitem","aria-expanded":O?L:void 0,"aria-selected":Me,"aria-disabled":H||void 0,id:un,tabIndex:pn},Y,{ownerState:z,onFocus:an,onBlur:cn,onKeyDown:dn,ref:Le,style:l?C({},Y.style,{"--TreeView-itemDepth":typeof o=="function"?o(u):o}):Y.style},mn,{children:[n.jsx(Jr,C({as:b,classes:{root:B.content,expanded:B.expanded,selected:B.selected,focused:B.focused,disabled:B.disabled,editable:B.editable,editing:B.editing,iconContainer:B.iconContainer,label:B.label,labelInput:B.labelInput,checkbox:B.checkbox},label:E,itemId:u,onClick:w,onMouseDown:S,icon:ln,expansionIcon:en,displayIcon:rn,ownerState:z},x,hn,ct.action==null?{}:{dragAndDropOverlayProps:ct},dt.value==null?{}:{labelInputProps:dt},{ref:ze})),f&&n.jsx(Qr,C({as:at},Jt,{children:f}))]}))})}),es=()=>{const[e,t]=y.useState([]),[r,s]=y.useState(!0),[i,g]=y.useState(!1),[l,c]=y.useState({code:"",name:"",description:"",parentId:void 0,annualBudget:0,quarterlyBudget:0,monthlyBudget:0,responsiblePerson:""}),[m,h]=y.useState("");y.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const p=await Fe.get("undefined/cost-accounting/cost-centers/hierarchy",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t(p.data.data)}catch(p){console.error("Failed to fetch cost centers:",p)}finally{s(!1)}},a=async()=>{var p,d;try{if(h(""),!l.code||!l.name){h("Kod ve isim alanları zorunludur");return}await Fe.post("undefined/cost-accounting/cost-centers",l,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),g(!1),c({code:"",name:"",description:"",parentId:void 0,annualBudget:0,quarterlyBudget:0,monthlyBudget:0,responsiblePerson:""}),o()}catch(b){h(((d=(p=b.response)==null?void 0:p.data)==null?void 0:d.error)||"Maliyet merkezi oluşturulamadı")}},f=p=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(p),I=p=>p.map(d=>n.jsx(Zr,{nodeId:d.id.toString(),label:n.jsxs(D,{sx:{display:"flex",alignItems:"center",py:1},children:[n.jsx(Xn,{sx:{mr:1,color:"primary.main"}}),n.jsxs(D,{sx:{flexGrow:1},children:[n.jsxs(v,{variant:"body1",fontWeight:"bold",children:[d.code," - ",d.name]}),d.description&&n.jsx(v,{variant:"caption",color:"text.secondary",display:"block",children:d.description}),d.responsiblePerson&&n.jsxs(v,{variant:"caption",color:"text.secondary",display:"block",children:["Sorumlu: ",d.responsiblePerson]})]}),n.jsxs(D,{sx:{display:"flex",gap:1,alignItems:"center"},children:[d.annualBudget&&n.jsx(oe,{label:`Yıllık Bütçe: ${f(d.annualBudget)}`,size:"small",color:"primary",variant:"outlined"}),n.jsx(oe,{label:`Toplam Gider: ${f(d.totalExpenses)}`,size:"small",color:d.totalExpenses>(d.annualBudget||0)?"error":"success"})]})]}),children:d.children.length>0&&I(d.children)},d.id));return r?n.jsx(D,{sx:{display:"flex",justifyContent:"center",p:3},children:n.jsx(v,{children:"Yükleniyor..."})}):n.jsxs(D,{children:[n.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[n.jsx(v,{variant:"h6",children:"Maliyet Merkezi Hiyerarşisi"}),n.jsxs(D,{children:[n.jsx(Ie,{onClick:o,color:"primary",children:n.jsx(st,{})}),n.jsx(Se,{variant:"contained",startIcon:n.jsx(yt,{}),onClick:()=>g(!0),children:"Yeni Maliyet Merkezi"})]})]}),e.length===0?n.jsxs($,{sx:{p:3,textAlign:"center"},children:[n.jsx(v,{color:"text.secondary",children:"Henüz maliyet merkezi tanımlanmamış"}),n.jsx(Se,{variant:"contained",startIcon:n.jsx(yt,{}),onClick:()=>g(!0),sx:{mt:2},children:"İlk Maliyet Merkezini Oluştur"})]}):n.jsx($,{sx:{p:2},children:n.jsx(Vr,{defaultCollapseIcon:n.jsx(Hn,{}),defaultExpandIcon:n.jsx(Yn,{}),children:I(e)})}),n.jsxs(Sn,{open:i,onClose:()=>g(!1),maxWidth:"md",fullWidth:!0,children:[n.jsx(Pn,{children:"Yeni Maliyet Merkezi"}),n.jsxs(kn,{children:[m&&n.jsx(Tn,{severity:"error",sx:{mb:2},children:m}),n.jsxs(T,{container:!0,spacing:2,sx:{mt:1},children:[n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,label:"Kod",required:!0,value:l.code,onChange:p=>c({...l,code:p.target.value}),placeholder:"Örn: MM-001"})}),n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,label:"İsim",required:!0,value:l.name,onChange:p=>c({...l,name:p.target.value})})}),n.jsx(T,{item:!0,xs:12,children:n.jsx(N,{fullWidth:!0,label:"Açıklama",multiline:!0,rows:2,value:l.description,onChange:p=>c({...l,description:p.target.value})})}),n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,label:"Sorumlu Kişi",value:l.responsiblePerson,onChange:p=>c({...l,responsiblePerson:p.target.value})})}),n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,type:"number",label:"Yıllık Bütçe",value:l.annualBudget,onChange:p=>c({...l,annualBudget:parseFloat(p.target.value)||0}),inputProps:{step:1e3}})}),n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,type:"number",label:"Çeyrek Dönem Bütçesi",value:l.quarterlyBudget,onChange:p=>c({...l,quarterlyBudget:parseFloat(p.target.value)||0}),inputProps:{step:1e3}})}),n.jsx(T,{item:!0,xs:12,sm:6,children:n.jsx(N,{fullWidth:!0,type:"number",label:"Aylık Bütçe",value:l.monthlyBudget,onChange:p=>c({...l,monthlyBudget:parseFloat(p.target.value)||0}),inputProps:{step:1e3}})})]})]}),n.jsxs(Rn,{children:[n.jsx(Se,{onClick:()=>g(!1),children:"İptal"}),n.jsx(Se,{onClick:a,variant:"contained",children:"Oluştur"})]})]})]})},ts=()=>{const[e,t]=y.useState(new Date().getFullYear()),[r,s]=y.useState(""),[i,g]=y.useState(""),[l,c]=y.useState(null),[m,h]=y.useState([]),[o,a]=y.useState({}),[f,I]=y.useState(!0);y.useEffect(()=>{p()},[e,r,i]);const p=async()=>{try{I(!0);const u={year:e};r&&(u.month=r),i&&(u.quarter=i);const E=(await Fe.get("undefined/cost-accounting/reports/budget",{params:u,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;c(E.summary),h(E.items||[]),a(E.byCategory||{})}catch(u){console.error("Failed to fetch budget data:",u)}finally{I(!1)}},d=u=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),b=u=>u<0?"success":u>0?"error":"default",x=u=>u<=70?"success":u<=90?"warning":"error";return f?n.jsx(Pe,{}):n.jsxs(D,{children:[n.jsx($,{sx:{p:2,mb:3},children:n.jsxs(T,{container:!0,spacing:2,alignItems:"center",children:[n.jsx(T,{item:!0,xs:12,sm:4,children:n.jsx(N,{select:!0,fullWidth:!0,label:"Yıl",value:e,onChange:u=>t(parseInt(u.target.value)),size:"small",children:[2024,2025,2026].map(u=>n.jsx(J,{value:u,children:u},u))})}),n.jsx(T,{item:!0,xs:12,sm:3,children:n.jsxs(N,{select:!0,fullWidth:!0,label:"Ay",value:r,onChange:u=>s(u.target.value?parseInt(u.target.value):""),size:"small",children:[n.jsx(J,{value:"",children:"Tümü"}),Array.from({length:12},(u,j)=>j+1).map(u=>n.jsx(J,{value:u,children:new Date(2e3,u-1).toLocaleString("tr-TR",{month:"long"})},u))]})}),n.jsx(T,{item:!0,xs:12,sm:3,children:n.jsxs(N,{select:!0,fullWidth:!0,label:"Çeyrek",value:i,onChange:u=>g(u.target.value?parseInt(u.target.value):""),size:"small",children:[n.jsx(J,{value:"",children:"Tümü"}),n.jsx(J,{value:1,children:"Q1"}),n.jsx(J,{value:2,children:"Q2"}),n.jsx(J,{value:3,children:"Q3"}),n.jsx(J,{value:4,children:"Q4"})]})}),n.jsx(T,{item:!0,xs:12,sm:2,children:n.jsx(Xe,{title:"Yenile",children:n.jsx(Ie,{onClick:p,color:"primary",children:n.jsx(st,{})})})})]})}),l&&n.jsxs(T,{container:!0,spacing:3,sx:{mb:3},children:[n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Planlanan Toplam"}),n.jsx(v,{variant:"h5",fontWeight:"bold",children:d(l.totalPlanned)})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Gerçekleşen Toplam"}),n.jsx(v,{variant:"h5",fontWeight:"bold",children:d(l.totalActual)}),n.jsx(D,{sx:{mt:1},children:n.jsx(Pe,{variant:"determinate",value:Math.min(l.totalActual/l.totalPlanned*100,100),color:x(l.totalActual/l.totalPlanned*100)})})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{sx:{bgcolor:l.totalVariance>0?"error.light":"success.light"},children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"white",gutterBottom:!0,children:"Varyans"}),n.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[l.totalVariance>0?n.jsx(Ye,{sx:{mr:1,color:"white"}}):n.jsx(He,{sx:{mr:1,color:"white"}}),n.jsx(v,{variant:"h5",fontWeight:"bold",color:"white",children:d(Math.abs(l.totalVariance))})]}),n.jsxs(v,{variant:"body2",color:"white",children:[l.totalVariancePercent.toFixed(1),"%"]})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Bütçe Durumu"}),n.jsxs(D,{sx:{display:"flex",gap:1,mt:1},children:[n.jsx(oe,{label:`Aşan: ${l.overBudgetCount}`,color:"error",size:"small"}),n.jsx(oe,{label:`Normal: ${l.underBudgetCount}`,color:"success",size:"small"})]})]})})})]}),Object.keys(o).length>0&&n.jsxs($,{sx:{p:3,mb:3},children:[n.jsx(v,{variant:"h6",gutterBottom:!0,children:"Kategorilere Göre Bütçe"}),n.jsx(T,{container:!0,spacing:2,children:Object.entries(o).map(([u,j])=>n.jsx(T,{item:!0,xs:12,sm:6,md:4,children:n.jsx(q,{variant:"outlined",children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:u}),n.jsxs(D,{sx:{mb:1},children:[n.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[n.jsx(v,{variant:"body2",color:"text.secondary",children:"Planlanan:"}),n.jsx(v,{variant:"body2",fontWeight:"bold",children:d(j.planned)})]}),n.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[n.jsx(v,{variant:"body2",color:"text.secondary",children:"Gerçekleşen:"}),n.jsx(v,{variant:"body2",fontWeight:"bold",children:d(j.actual)})]}),n.jsxs(D,{sx:{display:"flex",justifyContent:"space-between"},children:[n.jsx(v,{variant:"body2",color:"text.secondary",children:"Varyans:"}),n.jsx(oe,{label:d(Math.abs(j.variance)),color:b(j.variance),size:"small"})]})]}),n.jsx(Pe,{variant:"determinate",value:Math.min(j.actual/j.planned*100,100),color:x(j.actual/j.planned*100)})]})})},u))})]}),n.jsxs($,{children:[n.jsxs(D,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(v,{variant:"h6",children:"Bütçe Kalemleri Detayı"}),n.jsx(Ie,{color:"primary",children:n.jsx(kt,{})})]}),n.jsx(Je,{children:n.jsxs(Qe,{children:[n.jsx(Ze,{children:n.jsxs(le,{children:[n.jsx(M,{children:"Kalem"}),n.jsx(M,{children:"Kategori"}),n.jsx(M,{children:"Maliyet Merkezi"}),n.jsx(M,{align:"right",children:"Planlanan"}),n.jsx(M,{align:"right",children:"Gerçekleşen"}),n.jsx(M,{align:"right",children:"Varyans"}),n.jsx(M,{align:"center",children:"Durum"})]})}),n.jsx(et,{children:m.length===0?n.jsx(le,{children:n.jsx(M,{colSpan:7,align:"center",children:"Bütçe kalemi bulunamadı"})}):m.map(u=>{var j;return n.jsxs(le,{hover:!0,children:[n.jsx(M,{children:u.name}),n.jsx(M,{children:u.category}),n.jsx(M,{children:((j=u.costCenter)==null?void 0:j.name)||"-"}),n.jsx(M,{align:"right",children:d(u.plannedAmount)}),n.jsx(M,{align:"right",children:d(u.actualAmount)}),n.jsx(M,{align:"right",children:n.jsx(oe,{label:`${d(Math.abs(u.variance))} (${Math.abs(u.variancePercent).toFixed(1)}%)`,color:b(u.variance),size:"small"})}),n.jsx(M,{align:"center",children:n.jsx(Pe,{variant:"determinate",value:Math.min(u.actualAmount/u.plannedAmount*100,100),color:x(u.actualAmount/u.plannedAmount*100),sx:{width:100}})})]},u.id)})})]})})]})]})},ns=()=>{const[e,t]=y.useState(Qn(new Date)),[r,s]=y.useState(Jn(new Date)),[i,g]=y.useState(null),[l,c]=y.useState(!1),m=async()=>{if(!e||!r){alert("Lütfen tarih aralığı seçiniz");return}try{c(!0);const o=await Fe.get("undefined/cost-accounting/reports/profit-loss",{params:{startDate:e.toISOString(),endDate:r.toISOString()},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});g(o.data.data)}catch(o){console.error("Failed to fetch P&L report:",o),alert("Rapor yüklenemedi")}finally{c(!1)}};fn.useEffect(()=>{e&&r&&m()},[e,r]);const h=o=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(o);return n.jsxs(D,{children:[n.jsx($,{sx:{p:2,mb:3},children:n.jsxs(T,{container:!0,spacing:2,alignItems:"center",children:[n.jsx(T,{item:!0,xs:12,sm:4,children:n.jsx(Ct,{dateAdapter:wt,adapterLocale:Tt,children:n.jsx(vt,{label:"Başlangıç Tarihi",value:e,onChange:o=>t(o),slotProps:{textField:{fullWidth:!0,size:"small"}}})})}),n.jsx(T,{item:!0,xs:12,sm:4,children:n.jsx(Ct,{dateAdapter:wt,adapterLocale:Tt,children:n.jsx(vt,{label:"Bitiş Tarihi",value:r,onChange:o=>s(o),slotProps:{textField:{fullWidth:!0,size:"small"}}})})}),n.jsx(T,{item:!0,xs:12,sm:4,children:n.jsxs(D,{sx:{display:"flex",gap:1},children:[n.jsx(Xe,{title:"Yenile",children:n.jsx(Ie,{onClick:m,color:"primary",disabled:l,children:n.jsx(st,{})})}),n.jsx(Xe,{title:"İndir",children:n.jsx(Ie,{color:"primary",children:n.jsx(kt,{})})})]})})]})}),l?n.jsx($,{sx:{p:3,textAlign:"center"},children:n.jsx(v,{children:"Yükleniyor..."})}):i?n.jsxs(n.Fragment,{children:[n.jsxs(T,{container:!0,spacing:3,sx:{mb:3},children:[n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{sx:{bgcolor:"success.light"},children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"white",gutterBottom:!0,children:"Toplam Gelir"}),n.jsx(v,{variant:"h5",fontWeight:"bold",color:"white",children:h(i.revenue.total)}),n.jsxs(v,{variant:"body2",color:"white",sx:{mt:1},children:["Tahsil Edilen: ",h(i.revenue.paid)]})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{sx:{bgcolor:"error.light"},children:n.jsxs(G,{children:[n.jsx(v,{variant:"subtitle2",color:"white",gutterBottom:!0,children:"Toplam Gider"}),n.jsx(v,{variant:"h5",fontWeight:"bold",color:"white",children:h(i.expenses.total)}),n.jsxs(v,{variant:"body2",color:"white",sx:{mt:1},children:[i.summary.totalExpenseItems," kalem"]})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{sx:{bgcolor:i.profit.gross>0?"info.light":"warning.light"},children:n.jsxs(G,{children:[n.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:1},children:[i.profit.gross>0?n.jsx(Ye,{sx:{mr:1,color:"white"}}):n.jsx(He,{sx:{mr:1,color:"white"}}),n.jsx(v,{variant:"subtitle2",color:"white",children:"Brüt Kâr/Zarar"})]}),n.jsx(v,{variant:"h5",fontWeight:"bold",color:"white",children:h(Math.abs(i.profit.gross))}),n.jsxs(v,{variant:"body2",color:"white",sx:{mt:1},children:["Marj: ",i.profit.margin.toFixed(1),"%"]})]})})}),n.jsx(T,{item:!0,xs:12,sm:6,md:3,children:n.jsx(q,{sx:{bgcolor:i.profit.net>0?"primary.main":"warning.main"},children:n.jsxs(G,{children:[n.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:1},children:[i.profit.net>0?n.jsx(Ye,{sx:{mr:1,color:"white"}}):n.jsx(He,{sx:{mr:1,color:"white"}}),n.jsx(v,{variant:"subtitle2",color:"white",children:"Net Kâr/Zarar"})]}),n.jsx(v,{variant:"h5",fontWeight:"bold",color:"white",children:h(Math.abs(i.profit.net))}),n.jsx(oe,{label:i.profit.net>0?"Kâr":"Zarar",size:"small",sx:{mt:1,bgcolor:"white",color:"primary.main"}})]})})})]}),n.jsxs(T,{container:!0,spacing:3,children:[n.jsx(T,{item:!0,xs:12,md:6,children:n.jsxs($,{sx:{p:3},children:[n.jsx(v,{variant:"h6",gutterBottom:!0,children:"Kategorilere Göre Giderler"}),n.jsx(jt,{sx:{mb:2}}),n.jsx(Je,{children:n.jsxs(Qe,{size:"small",children:[n.jsx(Ze,{children:n.jsxs(le,{children:[n.jsx(M,{children:"Kategori"}),n.jsx(M,{align:"right",children:"Tutar"}),n.jsx(M,{align:"right",children:"Adet"}),n.jsx(M,{align:"right",children:"Oran"})]})}),n.jsx(et,{children:Object.entries(i.expenses.byCategory).map(([o,a])=>n.jsxs(le,{children:[n.jsx(M,{children:o}),n.jsx(M,{align:"right",children:h(a.total)}),n.jsx(M,{align:"right",children:a.count}),n.jsxs(M,{align:"right",children:[(a.total/i.expenses.total*100).toFixed(1),"%"]})]},o))})]})})]})}),n.jsx(T,{item:!0,xs:12,md:6,children:n.jsxs($,{sx:{p:3},children:[n.jsx(v,{variant:"h6",gutterBottom:!0,children:"Maliyet Merkezlerine Göre Giderler"}),n.jsx(jt,{sx:{mb:2}}),n.jsx(Je,{children:n.jsxs(Qe,{size:"small",children:[n.jsx(Ze,{children:n.jsxs(le,{children:[n.jsx(M,{children:"Maliyet Merkezi"}),n.jsx(M,{align:"right",children:"Tutar"}),n.jsx(M,{align:"right",children:"Adet"}),n.jsx(M,{align:"right",children:"Oran"})]})}),n.jsx(et,{children:Object.entries(i.expenses.byCostCenter).map(([o,a])=>n.jsxs(le,{children:[n.jsx(M,{children:o}),n.jsx(M,{align:"right",children:h(a.total)}),n.jsx(M,{align:"right",children:a.count}),n.jsxs(M,{align:"right",children:[(a.total/i.expenses.total*100).toFixed(1),"%"]})]},o))})]})})]})})]})]}):n.jsx($,{sx:{p:3,textAlign:"center"},children:n.jsx(v,{color:"text.secondary",children:"Rapor görüntülemek için tarih aralığı seçiniz"})})]})},qe=({children:e,value:t,index:r})=>n.jsx("div",{role:"tabpanel",hidden:t!==r,children:t===r&&n.jsx(D,{sx:{py:3},children:e})}),us=()=>{const[e,t]=y.useState(0),r=(s,i)=>{t(i)};return n.jsxs(D,{sx:{p:3},children:[n.jsx(v,{variant:"h4",gutterBottom:!0,children:"Maliyet Muhasebesi"}),n.jsx($,{sx:{width:"100%",mb:3},children:n.jsxs(Dn,{value:e,onChange:r,"aria-label":"cost accounting tabs",variant:"scrollable",scrollButtons:"auto",children:[n.jsx(_e,{label:"Maliyet Merkezleri"}),n.jsx(_e,{label:"Bütçe Takibi"}),n.jsx(_e,{label:"Kâr/Zarar Raporu"})]})}),n.jsx(qe,{value:e,index:0,children:n.jsx(es,{})}),n.jsx(qe,{value:e,index:1,children:n.jsx(ts,{})}),n.jsx(qe,{value:e,index:2,children:n.jsx(ns,{})})]})};export{us as default};
