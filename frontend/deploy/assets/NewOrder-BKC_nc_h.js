import{a as St,r as a,j as e}from"./react-vendor-DBHNAGPW.js";import{u as Dt,b as S}from"./index-C00KFl1S.js";import{X as i,ah as oe,ai as $,aj as ze,F as qe,ak as Tt,$ as Et,u as Q,o as Ie,al as Rt,ae as u,ac as ie,ab as Pt,P as At,Q as Ft,ad as D}from"./ui-vendor-CIs_GH3f.js";import"./chart-vendor-R5Y1AjBI.js";import"./state-vendor-JOdu_MDH.js";const Bt=()=>{const de=St(),{showNotification:N}=Dt(),[x,Be]=a.useState(null),[L,_e]=a.useState(""),[ce,$e]=a.useState(""),[K,Qe]=a.useState(""),[ue,Le]=a.useState(""),[Ke,Ue]=a.useState(""),[xe,Ye]=a.useState(""),[me,pe]=a.useState(!1),[Ve,U]=a.useState(!1),[Ge,Y]=a.useState(!1),[be,V]=a.useState(!1),[Je,T]=a.useState(!1),[Xe,E]=a.useState(!1),[He,m]=a.useState(!1),[G,he]=a.useState("customer"),[We,R]=a.useState(!1),[o,p]=a.useState({type:"percentage",value:0,reason:""}),[P,A]=a.useState(""),[d,J]=a.useState(null),[b,y]=a.useState(""),[ge,h]=a.useState(""),[Ze,et]=a.useState("order_confirmation"),[fe,tt]=a.useState(""),[je,Ne]=a.useState(""),[st,ye]=a.useState(""),[F,M]=a.useState(!1),[rt,O]=a.useState(!1),[v,z]=a.useState(""),[X,q]=a.useState("#3B82F6"),[w,ve]=a.useState([]),H=a.useRef(null),[at,W]=a.useState(!1),[lt,we]=a.useState(!1),[nt,I]=a.useState(!1),[g,ke]=a.useState([]),[Ce,Se]=a.useState(!1),De=a.useRef(null),[Z,Te]=a.useState(!1),[Ee,ot]=a.useState(""),[k,c]=a.useState([]),[Re,Pe]=a.useState(null),B=()=>Math.random().toString(36).slice(2,9),ee=t=>{const r=B();c(t==="charge"?s=>[...s,{id:r,type:"charge",title:"Charge",qty:1,price:0,tax:"No tax"}]:t==="section"?s=>[...s,{id:r,type:"section",title:"Section",isSection:!0}]:s=>[...s,{id:r,type:"custom",title:"",qty:1,price:0,tax:"No tax"}]),V(!1)},f=(t,r)=>{c(s=>s.map(l=>l.id===t?{...l,...r}:l))},it=t=>{c(r=>r.filter(s=>s.id!==t))},dt=(t,r)=>{Pe(r),t.dataTransfer.effectAllowed="move"},ct=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},ut=(t,r)=>{t.preventDefault(),Re!==null&&(c(s=>{const l=[...s],[n]=l.splice(Re,1);return l.splice(r,0,n),l}),Pe(null))},j=k.reduce((t,r)=>{if(r.type==="charge"||r.type==="custom"){const s=Number(r.qty||0),l=Number(r.price||0);return t+s*l}return t},0),Ae=o.type==="percentage"?j*o.value/100:o.value,Fe=d?d.type==="percentage"?j*d.value/100:d.value:0,_=Ae+Fe,Me=Math.max(0,j-_),te=Me*1.2;a.useEffect(()=>{const t=r=>{r.target.closest(".dropdown-container")||(pe(!1),V(!1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const Oe=async()=>{var t,r;if(b.trim()){h("");try{if(G==="customer"){const s=await S.get(`/customers/scan/${b}`);s.data.success&&s.data.data?(Be(s.data.data),m(!1),y("")):h("Customer not found")}else{const s=await S.get(`/equipment/scan/${b}`);if(s.data&&s.data.id){const l=s.data,n=B();c(C=>[...C,{id:n,type:"custom",title:l.name,equipmentId:l.id,qty:1,price:l.dailyRate||l.price||0,tax:"No tax"}]),m(!1),y("")}else h("Equipment not found")}}catch(s){console.error("QR scan failed:",s),h(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to scan QR code. Please try again.")}}},xt=[{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Red",value:"#EF4444"},{name:"Yellow",value:"#F59E0B"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Gray",value:"#6B7280"}],mt=()=>{if(!v.trim())return;const t={id:B(),name:v.trim(),color:X};ve(r=>[...r,t]),z(""),q("#3B82F6"),O(!1)},pt=t=>{ve(r=>r.filter(s=>s.id!==t))},bt=t=>{Ye(t),W(!1),H.current&&clearTimeout(H.current),H.current=setTimeout(async()=>{we(!0),await new Promise(r=>setTimeout(r,500)),we(!1),W(!0),setTimeout(()=>W(!1),2e3)},2e3)},ht=t=>{const r=t.target.files;!r||r.length===0||(gt(Array.from(r)),t.target.value="")},gt=async t=>{Se(!0);try{for(const r of t){await new Promise(l=>setTimeout(l,500));const s={id:B(),name:r.name,size:r.size,type:r.type,uploadedAt:new Date().toISOString()};ke(l=>[...l,s])}I(!1)}catch(r){console.error("Document upload failed:",r),alert("Failed to upload document. Please try again.")}finally{Se(!1)}},ft=t=>{ke(r=>r.filter(s=>s.id!==t))},jt=async()=>{var t,r;if(!x){N("error","Lütfen bir müşteri seçin");return}if(!L||!K){N("error","Lütfen başlangıç ve bitiş tarihlerini seçin");return}if(k.filter(s=>s.type!=="section").length===0){N("error","Lütfen en az bir ürün ekleyin");return}Te(!0);try{const s={customerId:x.id,startDate:new Date(`${L}T${ce||"00:00"}`).toISOString(),endDate:new Date(`${K}T${ue||"00:00"}`).toISOString(),status:"PENDING",paymentStatus:"payment_due",totalAmount:te,subtotal:j,taxAmount:te-Me,discountAmount:_,notes:xe,tags:JSON.stringify(w),documents:JSON.stringify(g),orderItems:k.filter(n=>n.type!=="section").map(n=>({equipmentId:n.equipmentId||null,quantity:parseInt(n.qty)||1,unitPrice:parseFloat(n.price)||0,totalPrice:(parseInt(n.qty)||1)*(parseFloat(n.price)||0),description:n.title||""}))},l=await S.post("/orders",s);if(l.data){if(N("success","Sipariş başarıyla kaydedildi!"),w.length>0)for(const n of w)try{await S.post(`/orders/${l.data.id}/tags`,{name:n.name,color:n.color})}catch(C){console.error("Failed to save tag:",C)}if(g.length>0)for(const n of g)try{await S.post(`/orders/${l.data.id}/documents`,{name:n.name,size:n.size,type:n.type,url:n.url})}catch(C){console.error("Failed to save document:",C)}de("/orders")}}catch(s){console.error("Save order error:",s),N("error",((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Sipariş kaydedilemedi. Lütfen tekrar deneyin.")}finally{Te(!1)}},Nt=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB",[se,yt]=a.useState(!0),[re,vt]=a.useState(!0),[ae,wt]=a.useState(!0),[le,kt]=a.useState(!0),[ne,Ct]=a.useState(!0);return e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[Ve&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Yeni müşteri"}),e.jsx("button",{onClick:()=>U(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Ad *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Soyad"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"E-posta *"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Şirket"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Vergi Numarası"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Adres"}),e.jsx("input",{type:"text",placeholder:"Sokak adresi",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 mb-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Şehir",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"}),e.jsx("input",{type:"text",placeholder:"Posta kodu",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsx("input",{type:"text",placeholder:"Ülke",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Notlar"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"İptal"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Add customer"})]})]})}),Ge&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"New custom field"}),e.jsx("button",{onClick:()=>Y(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Custom field label"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Data type"}),e.jsxs("select",{className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",children:[e.jsx("option",{children:"Single line text"}),e.jsx("option",{children:"Multi-line text"}),e.jsx("option",{children:"Date"}),e.jsx("option",{children:"Address"}),e.jsx("option",{children:"Phone"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Value"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Show on"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Quotes"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Contracts"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Invoices"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-neutral-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Packing slip"})]})]})]})]}),e.jsxs("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Add field"})]})]})}),Je&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Add discount"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Discount type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(t=>({...t,type:"percentage"})),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${o.type==="percentage"?"bg-blue-50 border-neutral-500 text-blue-700":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-50"}`,children:"Percentage (%)"}),e.jsx("button",{onClick:()=>p(t=>({...t,type:"fixed"})),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${o.type==="fixed"?"bg-blue-50 border-neutral-500 text-blue-700":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-50"}`,children:"Fixed (£)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:o.type==="percentage"?"Percentage":"Amount (£)"}),e.jsx("input",{type:"number",min:"0",max:o.type==="percentage"?100:void 0,value:o.value,onChange:t=>p(r=>({...r,value:Number(t.target.value)})),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",placeholder:o.type==="percentage"?"0-100":"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Reason (optional)"}),e.jsx("textarea",{rows:2,value:o.reason,onChange:t=>p(r=>({...r,reason:t.target.value})),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none",placeholder:"e.g., Early bird discount, Bulk order..."})]}),o.value>0&&e.jsx("div",{className:"bg-blue-50 border border-neutral-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-700",children:"Discount amount:"}),e.jsxs("span",{className:"font-semibold text-blue-700",children:["£",o.type==="percentage"?(j*o.value/100).toFixed(2):o.value.toFixed(2)]})]})})]}),e.jsxs("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{T(!1),p({type:"percentage",value:0,reason:""})},className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Apply discount"})]})]})}),Xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Add coupon"}),e.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Coupon code"}),e.jsx("input",{type:"text",value:P,onChange:t=>A(t.target.value.toUpperCase()),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 font-mono uppercase",placeholder:"Enter coupon code"})]}),d&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-800 text-sm mb-1",children:d.code}),e.jsx("div",{className:"text-xs text-green-600",children:d.type==="percentage"?`${d.value}% off`:`£${d.value} off`})]}),e.jsx("button",{onClick:()=>{J(null),A("")},className:"text-green-600 hover:text-green-800",children:e.jsx(i,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enter a valid coupon code to apply a discount to your order."})]}),e.jsxs("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{E(!1),d||A("")},className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&J({code:P,type:"percentage",value:10}),E(!1)},disabled:!P||d!==null,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply coupon"})]})]})}),He&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-neutral-900",children:["Scan QR Code - ",G==="customer"?"Customer":"Equipment"]}),e.jsx("button",{onClick:()=>{m(!1),y(""),h("")},className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[ge&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:ge})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Enter QR Code or ID manually"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:t=>y(t.target.value),onKeyPress:t=>{t.key==="Enter"&&b.trim()&&Oe()},className:"flex-1 px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 font-mono",placeholder:"Paste or type code here"}),e.jsx("button",{onClick:Oe,disabled:!b.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Scan"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-neutral-300 rounded-lg p-8 text-center bg-neutral-50",children:[e.jsx(oe,{className:"w-16 h-16 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-1",children:"Camera scanning coming soon"}),e.jsx("p",{className:"text-xs text-gray-500",children:"For now, please use manual input above"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("p",{className:"font-medium mb-1",children:"Tips:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-neutral-600",children:[e.jsx("li",{children:"Paste the QR code value from your scanner"}),e.jsxs("li",{children:["Or type the ",G==="customer"?"customer":"equipment"," ID directly"]}),e.jsx("li",{children:"Press Enter to scan quickly"})]})]})]}),e.jsx("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end",children:e.jsx("button",{onClick:()=>{m(!1),y(""),h("")},className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Close"})})]})}),We&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Send Email"}),e.jsx("button",{onClick:()=>R(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email Template"}),e.jsxs("select",{value:Ze,onChange:t=>{var s,l;et(t.target.value);const r={order_confirmation:{subject:"Order Confirmation - #{ORDER_ID}",body:`Dear Customer,

Your order has been confirmed.

Order Details:
...`},payment_reminder:{subject:"Payment Reminder - Order #{ORDER_ID}",body:`Dear Customer,

This is a friendly reminder about your pending payment.

...`},pickup_reminder:{subject:"Pickup Reminder - Order #{ORDER_ID}",body:`Dear Customer,

Your equipment is ready for pickup.

...`},return_reminder:{subject:"Return Reminder - Order #{ORDER_ID}",body:`Dear Customer,

Please remember to return your equipment.

...`}};Ne(((s=r[t.target.value])==null?void 0:s.subject)||""),ye(((l=r[t.target.value])==null?void 0:l.body)||"")},className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",children:[e.jsx("option",{value:"order_confirmation",children:"Order Confirmation"}),e.jsx("option",{value:"payment_reminder",children:"Payment Reminder"}),e.jsx("option",{value:"pickup_reminder",children:"Pickup Reminder"}),e.jsx("option",{value:"return_reminder",children:"Return Reminder"}),e.jsx("option",{value:"custom",children:"Custom Email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"To"}),e.jsx("input",{type:"email",value:fe||(x==null?void 0:x.email)||"",onChange:t=>tt(t.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",placeholder:"customer@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Subject"}),e.jsx("input",{type:"text",value:je,onChange:t=>Ne(t.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",placeholder:"Email subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Message"}),e.jsx("textarea",{rows:8,value:st,onChange:t=>ye(t.target.value),className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none font-mono",placeholder:"Email message body..."})]}),e.jsx("div",{className:"bg-blue-50 border border-neutral-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Available variables:"})," #","{ORDER_ID}",", #","{CUSTOMER_NAME}",", #","{PICKUP_DATE}",", #","{RETURN_DATE}",", #","{TOTAL_AMOUNT}"]})})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>R(!1),disabled:F,className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{var t,r;M(!0);try{if(!x){alert("Please select a customer first"),M(!1);return}await new Promise(s=>setTimeout(s,1e3)),M(!1),R(!1),alert("Email sent successfully!")}catch(s){console.error("Email send failed:",s),alert(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to send email"),M(!1)}},disabled:F||!fe||!je,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[F&&e.jsx($,{className:"w-4 h-4 animate-spin"}),F?"Sending...":"Send Email"]})]})]})}),rt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Add Tag"}),e.jsx("button",{onClick:()=>{O(!1),z(""),q("#3B82F6")},className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tag Name"}),e.jsx("input",{type:"text",value:v,onChange:t=>z(t.target.value),placeholder:"e.g., Urgent, VIP Customer, Follow-up",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tag Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:xt.map(t=>e.jsx("button",{onClick:()=>q(t.value),className:`h-10 rounded-lg border-2 transition-all ${X===t.value?"border-gray-900 scale-105":"border-neutral-200 hover:border-neutral-300"}`,style:{backgroundColor:t.value},title:t.name},t.value))})]}),e.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Preview:"}),e.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium text-white",style:{backgroundColor:X},children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),v||"Tag Name"]})]})]}),e.jsxs("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{O(!1),z(""),q("#3B82F6")},className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:mt,disabled:!v.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Tag"})]})]})}),nt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Upload Document"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(i,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("input",{ref:De,type:"file",onChange:ht,className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),e.jsx("button",{onClick:()=>{var t;return(t=De.current)==null?void 0:t.click()},disabled:Ce,className:"w-full border-2 border-dashed border-neutral-300 rounded-lg p-8 hover:border-neutral-500 hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("div",{className:"flex flex-col items-center gap-3",children:Ce?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-12 h-12 text-blue-600 animate-spin"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-12 h-12 text-gray-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Click to upload documents"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, DOC, DOCX, JPG, PNG, TXT"})]})]})})}),e.jsx("div",{className:"mt-4 bg-blue-50 border border-neutral-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Tip:"})," You can upload multiple files at once. Maximum file size: 10MB per file."]})})]}),e.jsx("div",{className:"border-t border-neutral-200 px-6 py-4 flex items-center justify-end",children:e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-sm font-medium text-neutral-700 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Close"})})]})}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"bg-white border-b border-neutral-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-neutral-600",children:[e.jsx("span",{className:"hover:text-neutral-900 cursor-pointer",onClick:()=>de("/orders"),children:"Kiralamalar"}),e.jsx("span",{className:"mx-2",children:"›"}),e.jsx("span",{className:"text-neutral-900",children:"Yeni kiralama"})]}),e.jsx("span",{className:"px-2.5 py-0.5 bg-neutral-200 text-neutral-700 text-xs font-medium rounded-full",children:"Yeni"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:jt,disabled:Z,className:"px-4 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors text-sm font-medium text-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Z&&e.jsx($,{className:"w-4 h-4 animate-spin"}),Z?"Kaydediliyor...":"Taslak olarak kaydet"]}),e.jsxs("div",{className:"relative dropdown-container",children:[e.jsx("button",{onClick:()=>pe(!me),className:"p-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:e.jsx(Tt,{className:"w-5 h-5 text-neutral-600"})}),me&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-neutral-200 py-1 z-50",children:[e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"Kiralamayı kopyala"]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-500 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Taslağa geri dön"]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-500 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Rezerve'ye geri dön"]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-500 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Teslim alındı'ya geri dön"]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-500 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"İade edildi'ye geri dön"]}),e.jsx("hr",{className:"my-1 border-neutral-200"}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),"Kiralamayı iptal et"]})]})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[Ee&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(i,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:Ee})}),e.jsx("button",{onClick:()=>ot(""),className:"text-red-400 hover:text-red-600",children:e.jsx(i,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900 mb-4",children:"Müşteri"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Müşteri ara",className:"w-full pl-10 pr-4 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsx("button",{onClick:()=>{he("customer"),m(!0)},className:"p-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"QR Tara",children:e.jsx(oe,{className:"w-4 h-4 text-neutral-600"})}),e.jsx("button",{onClick:()=>U(!0),className:"p-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"Müşteri ekle",children:e.jsx(Rt,{className:"w-4 h-4 text-neutral-600"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:"Bilgiler"}),e.jsx("button",{onClick:()=>Y(!0),className:"text-sm text-neutral-700 hover:text-neutral-900 font-medium px-3 py-1.5 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",children:"Alan ekle"})]}),e.jsxs("div",{className:"text-center py-8 border border-dashed border-neutral-300 rounded-lg bg-neutral-50",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 mb-2",children:"Henüz özel alan oluşturmadınız."}),e.jsx("p",{className:"text-xs text-neutral-600 mb-3 px-4",children:"Özel alanlar, teslimat bilgileri veya notlar gibi ekstra detayları gösterir. Kiralamalar üzerinde otomatik doldurulacak şekilde ayarlayabilir veya yukarıdaki butonu kullanarak tek seferlik alanlar ekleyebilirsiniz."}),e.jsx("button",{onClick:()=>{alert("Özel alanlar ayarları sayfası sonraki aşamada oluşturulacak")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Özel alanları ayarla"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-neutral-900 mb-4",children:"Teslim Alma"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-3",children:"Teslim alma"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"date",value:L,onChange:t=>_e(t.target.value),placeholder:"Tarih seçin",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})}),e.jsx("div",{children:e.jsx("input",{type:"time",value:ce,onChange:t=>$e(t.target.value),placeholder:"Saat",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-3",children:"İade"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"date",value:K,onChange:t=>Qe(t.target.value),placeholder:"Tarih seçin",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})}),e.jsx("div",{children:e.jsx("input",{type:"time",value:ue,onChange:t=>Le(t.target.value),placeholder:"Saat",className:"w-full px-3 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-6",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ürün eklemek için ara",value:Ke,onChange:t=>Ue(t.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-500"})]}),e.jsx("button",{onClick:()=>{he("equipment"),m(!0)},className:"p-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"QR Tara",children:e.jsx(oe,{className:"w-4 h-4 text-neutral-600"})})]}),k.length===0?e.jsx("div",{className:"text-center py-20 mb-6",children:e.jsx("p",{className:"text-sm text-neutral-900 font-medium mb-1",children:"Bu kiralama boş. Ürün veya özel satır ekleyerek başlayın."})}):e.jsx("div",{className:"space-y-2 mb-6",children:k.map((t,r)=>e.jsxs("div",{draggable:!t.isSection,onDragStart:s=>dt(s,r),onDragOver:ct,onDrop:s=>ut(s,r),className:"flex items-center gap-2 p-2 border border-neutral-200 rounded-md bg-white hover:bg-neutral-50",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-neutral-600 cursor-grab active:cursor-grabbing",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("circle",{cx:"6",cy:"4",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"10",cy:"4",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6",cy:"8",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"10",cy:"8",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6",cy:"12",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"10",cy:"12",r:"1",fill:"currentColor"})]})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-neutral-600",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:t.title,onChange:s=>f(t.id,{title:s.target.value}),placeholder:t.isSection?"Bölüm adı":t.type==="charge"?"Başlık":"Ad",className:"w-full px-3 py-1.5 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500"})}),t.type==="charge"&&e.jsxs("div",{className:"flex items-center border border-neutral-300 rounded",children:[e.jsx("button",{onClick:()=>f(t.id,{qty:Math.max(1,Number(t.qty||1)-1)}),className:"px-2 py-1 hover:bg-neutral-100 text-neutral-600",children:"-"}),e.jsx("input",{type:"text",value:t.qty||1,onChange:s=>f(t.id,{qty:Number(s.target.value)||1}),className:"w-12 text-center text-sm py-1 border-x border-neutral-300"}),e.jsx("button",{onClick:()=>f(t.id,{qty:Number(t.qty||1)+1}),className:"px-2 py-1 hover:bg-neutral-100 text-neutral-600",children:"+"})]}),t.type==="charge"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"£"}),e.jsx("input",{type:"text",value:t.price||"0,00",onChange:s=>f(t.id,{price:s.target.value}),className:"w-20 px-2 py-1.5 text-sm text-right border border-neutral-300 rounded focus:outline-none focus:border-neutral-500"})]}),t.type==="charge"&&e.jsxs("select",{value:t.tax||"Vergisiz",onChange:s=>f(t.id,{tax:s.target.value}),className:"px-3 py-1.5 text-sm border border-neutral-300 rounded focus:outline-none focus:border-neutral-500 bg-white",children:[e.jsx("option",{children:"Vergi kategorisi yok"}),e.jsx("option",{children:"%20 KDV"}),e.jsx("option",{children:"Vergisiz"})]}),t.type==="charge"&&e.jsxs("div",{className:"w-24 text-right font-medium text-sm",children:["₺",((Number(t.qty)||0)*(Number(t.price)||0)).toFixed(2)]}),e.jsx("button",{onClick:()=>it(t.id),className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(i,{className:"w-4 h-4"})})]},t.id))}),e.jsx("hr",{className:"my-6 border-neutral-200"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"relative dropdown-container",children:[e.jsxs("button",{onClick:()=>V(!be),className:"text-sm text-neutral-700 hover:text-neutral-900 font-medium flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),"Özel satır ekle"]}),be&&e.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-neutral-200 py-1 z-50",children:[e.jsxs("button",{onClick:()=>ee("custom"),className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Özel satır ekle"]}),e.jsxs("button",{onClick:()=>ee("charge"),className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Ücret"]}),e.jsxs("button",{onClick:()=>ee("section"),className:"w-full px-4 py-2 text-left text-sm text-neutral-700 hover:bg-neutral-50 flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Bölüm"]})]})]}),e.jsxs("div",{className:"w-80 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-700",children:"Ara Toplam"}),e.jsxs("span",{className:"font-medium text-neutral-900",children:["₺",j.toFixed(2)]})]}),o.value>0?e.jsx("div",{className:"bg-blue-50 border border-neutral-200 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs font-medium text-blue-700",children:["İndirim ",o.type==="percentage"?`(${o.value}%)`:""]}),o.reason&&e.jsx("div",{className:"text-xs text-blue-600 mt-0.5",children:o.reason})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["-₺",Ae.toFixed(2)]}),e.jsx("button",{onClick:()=>p({type:"percentage",value:0,reason:""}),className:"text-blue-400 hover:text-blue-600",children:e.jsx(i,{className:"w-3 h-3"})})]})]})}):e.jsx("button",{onClick:()=>T(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium block",children:"İndirim ekle"}),d?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 font-mono",children:d.code}),e.jsx("div",{className:"text-xs text-green-600 mt-0.5",children:d.type==="percentage"?`%${d.value} indirim`:`₺${d.value} indirim`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["-₺",Fe.toFixed(2)]}),e.jsx("button",{onClick:()=>{J(null),A("")},className:"text-green-400 hover:text-green-600",children:e.jsx(i,{className:"w-3 h-3"})})]})]})}):e.jsx("button",{onClick:()=>E(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium block",children:"Kupon ekle"}),_>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-700",children:"Toplam indirim"}),e.jsxs("span",{className:"font-medium text-green-600",children:["-₺",_.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-neutral-200 pt-3 flex justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Vergiler dahil toplam"}),e.jsxs("span",{className:"text-sm font-semibold text-neutral-900",children:["₺",te.toFixed(2)]})]})]})]})]})]})]}),e.jsx("div",{className:"w-64 border-l border-neutral-200 bg-white",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 p-3 space-y-2",children:[e.jsxs("button",{onClick:()=>R(!0),className:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),"E-posta gönder"]}),e.jsx("button",{className:"w-full px-3 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors text-sm font-medium text-neutral-700",children:"Yeni sözleşme"}),e.jsx("button",{className:"w-full px-3 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors text-sm font-medium text-neutral-700",children:"Yeni teklif"})]}),e.jsx("button",{className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium text-left",children:"E-posta geçmişini görüntüle (0)"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[e.jsxs("button",{onClick:()=>yt(!se),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[e.jsxs("span",{className:"text-sm font-semibold text-neutral-900",children:["Belgeler ",g.length>0&&e.jsx("span",{className:"text-gray-500",children:g.length})]}),se?e.jsx(D,{className:"w-4 h-4 text-gray-500"}):e.jsx(u,{className:"w-4 h-4 text-gray-500"})]}),se&&e.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[g.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-2 hover:bg-neutral-50 rounded px-2 group",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(qe,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-neutral-700 truncate",children:t.name}),e.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:Nt(t.size)})]}),e.jsx("button",{onClick:()=>ft(t.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-neutral-200 rounded transition-all",children:e.jsx(i,{className:"w-3 h-3 text-gray-500"})})]},t.id)),e.jsxs("button",{onClick:()=>I(!0),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors text-sm text-neutral-700 flex items-center justify-center gap-2 mt-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Belge yükle"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[e.jsxs("button",{onClick:()=>vt(!re),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Faturalar"}),re?e.jsx(D,{className:"w-4 h-4 text-gray-500"}):e.jsx(u,{className:"w-4 h-4 text-gray-500"})]}),re&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Fatura bulunamadı."})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[e.jsxs("button",{onClick:()=>wt(!ae),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Ödemeler"}),ae?e.jsx(D,{className:"w-4 h-4 text-gray-500"}):e.jsx(u,{className:"w-4 h-4 text-gray-500"})]}),ae&&e.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Ödendi"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"₺0,00"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Vadesi gelecek"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"₺0,00"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[e.jsxs("button",{onClick:()=>kt(!le),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Etiketler"}),le?e.jsx(D,{className:"w-4 h-4 text-gray-500"}):e.jsx(u,{className:"w-4 h-4 text-gray-500"})]}),le&&e.jsxs("div",{className:"px-4 pb-3 space-y-2",children:[w.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(t=>e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium text-white",style:{backgroundColor:t.color},children:[e.jsx(ze,{className:"w-3 h-3"}),t.name,e.jsx("button",{onClick:()=>pt(t.id),className:"hover:bg-white hover:bg-opacity-20 rounded-full p-0.5 transition-colors",children:e.jsx(i,{className:"w-3 h-3"})})]},t.id))}),e.jsxs("button",{onClick:()=>O(!0),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors text-sm text-neutral-700 flex items-center justify-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Etiket ekle"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200",children:[e.jsxs("button",{onClick:()=>Ct(!ne),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-neutral-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Notlar"}),lt&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3 animate-spin"}),"Kaydediliyor..."]}),at&&e.jsx("span",{className:"text-xs text-green-600 flex items-center gap-1",children:"✓ Kaydedildi"})]}),ne?e.jsx(D,{className:"w-4 h-4 text-gray-500"}):e.jsx(u,{className:"w-4 h-4 text-gray-500"})]}),ne&&e.jsx("div",{className:"px-4 pb-3",children:e.jsx("textarea",{value:xe,onChange:t=>bt(t.target.value),placeholder:"Yeni not ekle (2 saniye sonra otomatik kaydedilir)",rows:3,className:"w-full text-sm border border-neutral-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none"})})]})]})})]})]})};export{Bt as default};
