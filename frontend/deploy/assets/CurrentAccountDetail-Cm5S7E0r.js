import{o as is,a as os,r as l,z as n,j as e}from"./react-vendor-DBHNAGPW.js";import{D as a,b as m,a as i}from"./index-C5wiI25D.js";import{f as ds}from"./excelExport-CyZjk0TN.js";import{am as ms,Q as Wa,a0 as xs,v as ps,w as hs,D as us,ab as ys,ay as js,aa as gs,a9 as Ns,ac as bs,R as fs,aI as $s,F as vs,ag as ws}from"./ui-vendor-CIs_GH3f.js";import"./chart-vendor-R5Y1AjBI.js";import"./xlsx-DrgRuPKf.js";function Bs(){var D,S,A,E,L,B,F,z,P,R,I,M,H,K,Y,O,U,V,G,Q,_,q,J,W,X,Z,ee,ae,se,te,re,le,ce,ne,ie,oe,de,me,xe,pe,he,ue,ye,je,ge,Ne,be,fe,$e,ve,we,ke,Te,Ce,De,Se,Ae,Ee,Le,Be,Fe,ze,Pe,Re,Ie,Me,He,Ke,Ye,Oe,Ue,Ve,Ge,Qe,_e,qe,Je,We,Xe,Ze,ea,aa,sa,ta,ra,la,ca,na,ia,oa,da,ma,xa,pa,ha,ua,ya,ja,ga,Na,ba,fa,$a,va,wa,ka,Ta,Ca,Da,Sa,Aa,Ea,La,Ba,Fa,za,Pa,Ra,Ia,Ma,Ha,Ka,Ya,Oa,Ua,Va,Ga,Qa,_a,qa;const{id:o}=is(),b=os(),[t,Xa]=l.useState(null),[y,Za]=l.useState([]),[ks,Ts]=l.useState([]),[es,f]=l.useState(!1),[as,$]=l.useState(!1),[x,v]=l.useState(""),[p,w]=l.useState(""),[h,k]=l.useState("ALL"),[d,j]=l.useState(1),[u,ss]=l.useState(1);l.useEffect(()=>{o&&(ts(),g())},[o]),l.useEffect(()=>{o&&g()},[x,p,h,d]);const ts=async()=>{try{f(!0);const s=await fetch(`/api/accounting/current-accounts/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("Failed to load account");const r=await s.json();Xa(r.data||r)}catch(s){console.error("Failed to load account:",s),n.error("Cari hesap y�klenemedi"),b("/accounting")}finally{f(!1)}},g=async()=>{var s;try{$(!0);const r=new URLSearchParams({page:d.toString(),limit:"20"});x&&r.append("startDate",x),p&&r.append("endDate",p),h!=="ALL"&&r.append("type",h);const Ja=await fetch(`/api/accounting/current-accounts/${o}/transactions?${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ja.ok)throw new Error("Failed to load transactions");const N=await Ja.json();Za(N.data||N.transactions||[]),ss(((s=N.pagination)==null?void 0:s.pages)||1)}catch(r){console.error("Failed to load transactions:",r),n.error("Hareketler y�klenemedi")}finally{$(!1)}},rs=()=>{if(t)try{ds(t,y),n.success("Cari ekstre Excel olarak indirildi")}catch{n.error("Excel export ba�ar�s�z oldu")}},ls=()=>{n.success("Email g�nderme �zelli�i yak�nda eklenecek")},cs=s=>{const r=s==="CUSTOMER"?{label:"M��teri",color:"bg-neutral-100 text-neutral-800"}:{label:"Tedarik�i",color:"bg-neutral-100 text-neutral-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.color}`,children:r.label})},T=s=>"text-neutral-900",c=s=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(s),C=s=>new Date(s).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),ns=s=>new Date(s).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return es||!t?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-600"})}):e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>b("/accounting"),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(ms,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h1",{className:`${(S=(D=a)==null?void 0:D.typography)==null?void 0:S.heading.h1} ${(E=(A=a)==null?void 0:A.colors)==null?void 0:E.text.primary}`,children:t.name}),cs(t.type),!t.isActive&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-neutral-100 text-neutral-700",children:"Pasif"})]}),e.jsxs("p",{className:`${(B=(L=a)==null?void 0:L.typography)==null?void 0:B.body.md} ${(z=(F=a)==null?void 0:F.colors)==null?void 0:z.text.secondary}`,children:["Cari Kodu: ",t.code]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ls,className:m("secondary","md","md"),children:[e.jsx(Wa,{className:"w-4 h-4"}),"Ekstre G�nder"]}),e.jsxs("button",{onClick:rs,className:m("primary","md","md"),children:[e.jsx(xs,{className:"w-4 h-4"}),"Ekstre �ndir"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(ps,{className:"w-8 h-8 text-neutral-900"})}),e.jsx("p",{className:`${(R=(P=a)==null?void 0:P.typography)==null?void 0:R.stat.lg} text-neutral-900 mb-1`,children:c(t.totalDebit)}),e.jsx("p",{className:`${(M=(I=a)==null?void 0:I.typography)==null?void 0:M.body.sm} ${(K=(H=a)==null?void 0:H.colors)==null?void 0:K.text.secondary}`,children:"Toplam Bor�"})]}),e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(hs,{className:"w-8 h-8 text-neutral-800"})}),e.jsx("p",{className:`${(O=(Y=a)==null?void 0:Y.typography)==null?void 0:O.stat.lg} text-neutral-800 mb-1`,children:c(t.totalCredit)}),e.jsx("p",{className:`${(V=(U=a)==null?void 0:U.typography)==null?void 0:V.body.sm} ${(Q=(G=a)==null?void 0:G.colors)==null?void 0:Q.text.secondary}`,children:"Toplam Alacak"})]}),e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(us,{className:"w-8 h-8 text-neutral-900"})}),e.jsx("p",{className:`${(q=(_=a)==null?void 0:_.typography)==null?void 0:q.stat.lg} ${T(t.balance)} mb-1`,children:c(t.balance)}),e.jsx("p",{className:`${(W=(J=a)==null?void 0:J.typography)==null?void 0:W.body.sm} ${(Z=(X=a)==null?void 0:X.colors)==null?void 0:Z.text.secondary}`,children:"Net Bakiye"}),t.balance>0&&e.jsx("p",{className:"text-xs text-neutral-900 mt-1",children:"Alacakl�"}),t.balance<0&&e.jsx("p",{className:"text-xs text-neutral-800 mt-1",children:"Bor�lu"})]}),e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(ys,{className:"w-8 h-8 text-neutral-900"})}),e.jsx("p",{className:`${(ae=(ee=a)==null?void 0:ee.typography)==null?void 0:ae.stat.lg} ${(te=(se=a)==null?void 0:se.colors)==null?void 0:te.text.primary} mb-1`,children:t.creditLimit?c(t.creditLimit):"?"}),e.jsx("p",{className:`${(le=(re=a)==null?void 0:re.typography)==null?void 0:le.body.sm} ${(ne=(ce=a)==null?void 0:ce.colors)==null?void 0:ne.text.secondary}`,children:"Kredi Limiti"}),t.creditLimit&&t.balance<0&&e.jsxs("p",{className:"text-xs text-neutral-600 mt-1",children:["Kullan�lan: ",c(Math.abs(t.balance))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("h3",{className:`${(oe=(ie=a)==null?void 0:ie.typography)==null?void 0:oe.heading.h4} ${(me=(de=a)==null?void 0:de.colors)==null?void 0:me.text.primary} mb-4`,children:"�leti�im Bilgileri"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(js,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`${(pe=(xe=a)==null?void 0:xe.typography)==null?void 0:pe.label.sm} ${(ue=(he=a)==null?void 0:he.colors)==null?void 0:ue.text.tertiary}`,children:"Vergi Bilgileri"}),e.jsxs("p",{className:`${(je=(ye=a)==null?void 0:ye.typography)==null?void 0:je.body.md} ${(Ne=(ge=a)==null?void 0:ge.colors)==null?void 0:Ne.text.primary}`,children:["VKN: ",t.taxNumber||"-"]}),e.jsx("p",{className:`${(fe=(be=a)==null?void 0:be.typography)==null?void 0:fe.body.sm} ${(ve=($e=a)==null?void 0:$e.colors)==null?void 0:ve.text.secondary}`,children:t.taxOffice||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gs,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`${(ke=(we=a)==null?void 0:we.typography)==null?void 0:ke.label.sm} ${(Ce=(Te=a)==null?void 0:Te.colors)==null?void 0:Ce.text.tertiary}`,children:"Telefon"}),e.jsx("p",{className:`${(Se=(De=a)==null?void 0:De.typography)==null?void 0:Se.body.md} ${(Ee=(Ae=a)==null?void 0:Ae.colors)==null?void 0:Ee.text.primary}`,children:t.phone||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Wa,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`${(Be=(Le=a)==null?void 0:Le.typography)==null?void 0:Be.label.sm} ${(ze=(Fe=a)==null?void 0:Fe.colors)==null?void 0:ze.text.tertiary}`,children:"Email"}),e.jsx("p",{className:`${(Re=(Pe=a)==null?void 0:Pe.typography)==null?void 0:Re.body.md} ${(Me=(Ie=a)==null?void 0:Ie.colors)==null?void 0:Me.text.primary}`,children:t.email||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ns,{className:"w-5 h-5 text-neutral-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`${(Ke=(He=a)==null?void 0:He.typography)==null?void 0:Ke.label.sm} ${(Oe=(Ye=a)==null?void 0:Ye.colors)==null?void 0:Oe.text.tertiary}`,children:"Adres"}),e.jsx("p",{className:`${(Ve=(Ue=a)==null?void 0:Ue.typography)==null?void 0:Ve.body.md} ${(Qe=(Ge=a)==null?void 0:Ge.colors)==null?void 0:Qe.text.primary}`,children:t.address||"-"}),e.jsxs("p",{className:`${(qe=(_e=a)==null?void 0:_e.typography)==null?void 0:qe.body.sm} ${(We=(Je=a)==null?void 0:Je.colors)==null?void 0:We.text.secondary}`,children:[t.city||"-",", ",t.country||"-"]})]})]})]})]}),e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsx("h3",{className:`${(Ze=(Xe=a)==null?void 0:Xe.typography)==null?void 0:Ze.heading.h4} ${(aa=(ea=a)==null?void 0:ea.colors)==null?void 0:aa.text.primary} mb-4`,children:"Hesap Bilgileri"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${(ta=(sa=a)==null?void 0:sa.typography)==null?void 0:ta.label.sm} ${(la=(ra=a)==null?void 0:ra.colors)==null?void 0:la.text.tertiary} mb-1`,children:"�deme Vadesi"}),e.jsx("p",{className:`${(na=(ca=a)==null?void 0:ca.typography)==null?void 0:na.body.md} ${(oa=(ia=a)==null?void 0:ia.colors)==null?void 0:oa.text.primary}`,children:t.paymentTerm?`${t.paymentTerm} g�n`:"Tan�ms�z"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${(ma=(da=a)==null?void 0:da.typography)==null?void 0:ma.label.sm} ${(pa=(xa=a)==null?void 0:xa.colors)==null?void 0:pa.text.tertiary} mb-1`,children:"Hesap A��l�� Tarihi"}),e.jsx("p",{className:`${(ua=(ha=a)==null?void 0:ha.typography)==null?void 0:ua.body.md} ${(ja=(ya=a)==null?void 0:ya.colors)==null?void 0:ja.text.primary}`,children:C(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${(Na=(ga=a)==null?void 0:ga.typography)==null?void 0:Na.label.sm} ${(fa=(ba=a)==null?void 0:ba.colors)==null?void 0:fa.text.tertiary} mb-1`,children:"Son ��lem Tarihi"}),e.jsx("p",{className:`${(va=($a=a)==null?void 0:$a.typography)==null?void 0:va.body.md} ${(ka=(wa=a)==null?void 0:wa.colors)==null?void 0:ka.text.primary}`,children:t.lastTransactionDate?C(t.lastTransactionDate):"Hen�z i�lem yok"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${(Ca=(Ta=a)==null?void 0:Ta.typography)==null?void 0:Ca.label.sm} ${(Sa=(Da=a)==null?void 0:Da.colors)==null?void 0:Sa.text.tertiary} mb-1`,children:"Durum"}),e.jsx("p",{className:`${(Ea=(Aa=a)==null?void 0:Aa.typography)==null?void 0:Ea.body.md} ${(Ba=(La=a)==null?void 0:La.colors)==null?void 0:Ba.text.primary}`,children:t.isActive?e.jsx("span",{className:"text-neutral-900 font-medium",children:"? Aktif"}):e.jsx("span",{className:"text-neutral-800 font-medium",children:"? Pasif"})})]})]})]})]}),e.jsxs("div",{className:i("md","md","default","lg"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`${(za=(Fa=a)==null?void 0:Fa.typography)==null?void 0:za.heading.h3} ${(Ra=(Pa=a)==null?void 0:Pa.colors)==null?void 0:Ra.text.primary}`,children:"Hesap Hareketleri"}),e.jsxs("button",{onClick:()=>n.success("Yeni hareket ekleme �zelli�i yak�nda"),className:m("secondary","sm","md"),children:[e.jsx(bs,{className:"w-4 h-4"}),"Yeni Hareket"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block ${(Ma=(Ia=a)==null?void 0:Ia.typography)==null?void 0:Ma.label.sm} ${(Ka=(Ha=a)==null?void 0:Ha.colors)==null?void 0:Ka.text.primary} mb-1`,children:"Ba�lang�� Tarihi"}),e.jsx("input",{type:"date",value:x,onChange:s=>v(s.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block ${(Oa=(Ya=a)==null?void 0:Ya.typography)==null?void 0:Oa.label.sm} ${(Va=(Ua=a)==null?void 0:Ua.colors)==null?void 0:Va.text.primary} mb-1`,children:"Biti� Tarihi"}),e.jsx("input",{type:"date",value:p,onChange:s=>w(s.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block ${(Qa=(Ga=a)==null?void 0:Ga.typography)==null?void 0:Qa.label.sm} ${(qa=(_a=a)==null?void 0:_a.colors)==null?void 0:qa.text.primary} mb-1`,children:"��lem Tipi"}),e.jsxs("select",{value:h,onChange:s=>k(s.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500",children:[e.jsx("option",{value:"ALL",children:"T�m�"}),e.jsx("option",{value:"DEBIT",children:"Bor�"}),e.jsx("option",{value:"CREDIT",children:"Alacak"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("button",{onClick:g,className:m("secondary","md","md"),children:[e.jsx(fs,{className:"w-4 h-4"}),"Yenile"]}),e.jsxs("button",{onClick:()=>{v(""),w(""),k("ALL"),j(1)},className:m("secondary","md","md"),children:[e.jsx($s,{className:"w-4 h-4"}),"Temizle"]})]})]}),as?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-neutral-600"})}):y.length===0?e.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[e.jsx(vs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Hen�z hareket bulunmamaktad�r"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 border-b-2 border-neutral-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase",children:"A��klama"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-neutral-500 uppercase",children:"Referans"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase",children:"Bor�"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase",children:"Alacak"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase",children:"Bakiye"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-neutral-500 uppercase",children:"��lem"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-900",children:ns(s.date)}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-900",children:e.jsxs("div",{children:[e.jsx("p",{children:s.description}),s.paymentMethod&&e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:s.paymentMethod})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:s.invoiceNumber?e.jsx("span",{className:"px-2 py-1 bg-neutral-50 text-neutral-800 rounded text-xs font-mono",children:s.invoiceNumber}):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-900 font-medium text-right whitespace-nowrap",children:s.type==="DEBIT"?c(s.amount):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-neutral-800 font-medium text-right whitespace-nowrap",children:s.type==="CREDIT"?c(s.amount):"-"}),e.jsx("td",{className:`px-4 py-3 text-sm font-bold text-right whitespace-nowrap ${T(s.balance)}`,children:c(s.balance)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>n.success("Detay g�r�nt�leme �zelli�i yak�nda"),className:"p-1 text-neutral-900 hover:bg-neutral-50 rounded",title:"Detay",children:e.jsx(ws,{className:"w-4 h-4"})})})]},s.id))})]})}),u>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 pt-4 border-t",children:[e.jsx("button",{onClick:()=>j(s=>Math.max(1,s-1)),disabled:d===1,className:"px-3 py-1 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"�nceki"}),e.jsxs("span",{className:"text-sm text-neutral-600",children:["Sayfa ",d," / ",u]}),e.jsx("button",{onClick:()=>j(s=>Math.min(u,s+1)),disabled:d===u,className:"px-3 py-1 border rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]})]})]})}export{Bs as default};
