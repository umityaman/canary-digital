import{r,j as e}from"./react-vendor-DBHNAGPW.js";import{b as x}from"./index-C00KFl1S.js";import{be as b,bf as A,A as D,u as T,R as m,a as E,C as R}from"./ui-vendor-CIs_GH3f.js";function I(){const[t,v]=r.useState(null),[z,p]=r.useState(!0),[u,h]=r.useState(""),[j,w]=r.useState("https://api.booqable.com"),[g,f]=r.useState(!1),[c,y]=r.useState(!1),[N,n]=r.useState(null);r.useEffect(()=>{o()},[]);const o=async()=>{try{p(!0);const s=await x.get("/booqable/status");v(s.data)}catch(s){console.error("Failed to fetch Booqable status:",s)}finally{p(!1)}},C=async()=>{var s,a;if(!u.trim()){n("API Key gereklidir");return}f(!0),n(null);try{await x.post("/booqable/connect",{apiKey:u.trim(),accountUrl:j.trim()}),await o(),h(""),alert("Booqable baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±! âœ…")}catch(i){n(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.error)||"BaÄŸlantÄ± baÅŸarÄ±sÄ±z")}finally{f(!1)}},B=async()=>{if(confirm("Booqable baÄŸlantÄ±sÄ±nÄ± kesmek istediÄŸinize emin misiniz?"))try{await x.delete("/booqable/disconnect"),await o(),alert("Booqable baÄŸlantÄ±sÄ± kesildi")}catch{alert("BaÄŸlantÄ± kesilemedi")}},d=async s=>{var a,i;y(!0),n(null);try{await x.post(`/booqable/sync/${s}`),alert(`${s} senkronizasyonu baÅŸlatÄ±ldÄ±! â³`),setTimeout(()=>{o()},2e3)}catch(l){n(((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.error)||"Senkronizasyon baÅŸlatÄ±lamadÄ±")}finally{y(!1)}},S=s=>{switch(s){case"SUCCESS":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:[e.jsx(R,{size:12})," BaÅŸarÄ±lÄ±"]});case"FAILED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 text-xs rounded",children:[e.jsx(E,{size:12})," BaÅŸarÄ±sÄ±z"]});case"IN_PROGRESS":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:[e.jsx(b,{size:12,className:"animate-spin"})," Devam Ediyor"]});default:return e.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-700 text-xs rounded",children:s})}},q=s=>({PRODUCT:"ÃœrÃ¼nler",CUSTOMER:"MÃ¼ÅŸteriler",ORDER:"SipariÅŸler",FULL:"TÃ¼mÃ¼"})[s]||s,k=s=>{const a=new Date(s),l=Math.floor((new Date().getTime()-a.getTime())/6e4);return l<1?"Az Ã¶nce":l<60?`${l} dakika Ã¶nce`:l<1440?`${Math.floor(l/60)} saat Ã¶nce`:a.toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"})};return z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(b,{className:"animate-spin text-neutral-900",size:32})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-neutral-900 flex items-center gap-2",children:[e.jsx(A,{size:28}),"Booqable Entegrasyonu"]}),e.jsx("p",{className:"text-neutral-600 mt-1",children:"Booqable ile ekipman, mÃ¼ÅŸteri ve sipariÅŸ verilerinizi senkronize edin"})]}),N&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-2",children:[e.jsx(D,{size:20,className:"flex-shrink-0 mt-0.5"}),e.jsx("span",{children:N})]}),t!=null&&t.connected?e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"BaÄŸlÄ±"}),e.jsx("p",{className:"text-sm text-neutral-600",children:t.accountUrl})]})]}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-colors",children:"BaÄŸlantÄ±yÄ± Kes"})]}),t.lastSyncAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600 pt-2 border-t",children:[e.jsx(T,{size:16}),e.jsxs("span",{children:["Son senkronizasyon: ",k(t.lastSyncAt)]}),t.lastSyncStatus&&S(t.lastSyncStatus)]})]}):e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"BaÄŸlan"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Booqable API Key *"}),e.jsx("input",{type:"password",value:u,onChange:s=>h(s.target.value),placeholder:"sk_live_xxxxxxxxxxxxxxxx",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"API anahtarÄ±nÄ±zÄ± Booqable â†’ Settings â†’ API'den alabilirsiniz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Account URL (opsiyonel)"}),e.jsx("input",{type:"text",value:j,onChange:s=>w(s.target.value),placeholder:"https://api.booqable.com",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),e.jsx("button",{onClick:C,disabled:g,className:"w-full px-4 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(b,{size:16,className:"animate-spin"}),"BaÄŸlanÄ±yor..."]}):"BaÄŸlan"})]}),(t==null?void 0:t.connected)&&e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Manuel Senkronizasyon"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>d("products"),disabled:c,className:"px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-1",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"ÃœrÃ¼nler"})]}),e.jsxs("button",{onClick:()=>d("customers"),disabled:c,className:"px-4 py-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-1",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"MÃ¼ÅŸteriler"})]}),e.jsxs("button",{onClick:()=>d("orders"),disabled:c,className:"px-4 py-3 bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-1",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"SipariÅŸler"})]}),e.jsxs("button",{onClick:()=>d("all"),disabled:c,className:"px-4 py-3 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors disabled:opacity-50 flex flex-col items-center gap-1",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"TÃ¼mÃ¼"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Ä°pucu: Otomatik senkronizasyon webhook'lar ile gerÃ§ek zamanlÄ± Ã§alÄ±ÅŸÄ±r"})]}),(t==null?void 0:t.connected)&&t.recentSyncs&&t.recentSyncs.length>0&&e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Son Senkronizasyonlar"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-neutral-600 border-b",children:[e.jsx("th",{className:"pb-3",children:"Tip"}),e.jsx("th",{className:"pb-3",children:"Durum"}),e.jsx("th",{className:"pb-3",children:"Ä°ÅŸlenen"}),e.jsx("th",{className:"pb-3",children:"OluÅŸturulan"}),e.jsx("th",{className:"pb-3",children:"GÃ¼ncellenen"}),e.jsx("th",{className:"pb-3",children:"BaÅŸarÄ±sÄ±z"}),e.jsx("th",{className:"pb-3",children:"Tarih"})]})}),e.jsx("tbody",{children:t.recentSyncs.map(s=>e.jsxs("tr",{className:"border-b last:border-0 text-sm",children:[e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"font-medium text-neutral-900",children:q(s.syncType)})}),e.jsx("td",{className:"py-3",children:S(s.status)}),e.jsx("td",{className:"py-3 text-neutral-700",children:s.recordsProcessed}),e.jsx("td",{className:"py-3 text-green-600",children:s.recordsCreated}),e.jsx("td",{className:"py-3 text-blue-600",children:s.recordsUpdated}),e.jsx("td",{className:"py-3 text-red-600",children:s.recordsFailed}),e.jsx("td",{className:"py-3 text-neutral-600",children:k(s.startedAt)})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-neutral-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ“– DokÃ¼mantasyon"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Booqable entegrasyonu hakkÄ±nda daha fazla bilgi iÃ§in:"}),e.jsx("a",{href:"https://docs.booqable.com/api",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"Booqable API DokÃ¼mantasyonu â†’"})]})]})}export{I as B};
